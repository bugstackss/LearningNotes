<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.53" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://Ragnarokoo.github.io/LearningNotes/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html"><meta property="og:site_name" content="📚全栈开发学习指南"><meta property="og:title" content="三句话让 AJAX 为我欲罢不能"><meta property="og:description" content="大家好，我是精通AJAX的猿类高质量雄性码农，三句话让AJAX为我欲罢不能 什么是 AJAX？; 为什么要AJAX？; 怎么AJAX？; 下面就带着这三句话，来一起深入了解AJAX吧~ 1、AJAX 简介 AJAX全称为Asynchronous JavaScript And XML，就是异步的 JS 和 XML 通过AJAX可以在浏览器中向服务器发送异..."><meta property="og:type" content="article"><meta property="og:image" content="https://Ragnarokoo.github.io/LearningNotes/"><meta property="og:updated_time" content="2023-05-31T09:16:41.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="三句话让 AJAX 为我欲罢不能"><meta property="article:tag" content="ajax"><meta property="article:tag" content="javascript"><meta property="article:modified_time" content="2023-05-31T09:16:41.000Z"><link rel="icon" href="/site_logo.svg"><title>三句话让 AJAX 为我欲罢不能 | 📚全栈开发学习指南</title><meta name="description" content="大家好，我是精通AJAX的猿类高质量雄性码农，三句话让AJAX为我欲罢不能 什么是 AJAX？; 为什么要AJAX？; 怎么AJAX？; 下面就带着这三句话，来一起深入了解AJAX吧~ 1、AJAX 简介 AJAX全称为Asynchronous JavaScript And XML，就是异步的 JS 和 XML 通过AJAX可以在浏览器中向服务器发送异...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style.bc8b6d7c.css" as="style" /><link rel="stylesheet" href="/assets/style.bc8b6d7c.css" />
    <link rel="modulepreload" href="/assets/app.9b10ba0a.js"><link rel="modulepreload" href="/assets/三句话让 AJAX 为我欲罢不能.html.b11f20bc.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/三句话让 AJAX 为我欲罢不能.html.12fad696.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/site_logo.svg" alt="📚全栈开发学习指南"><!----><span class="site-name hide-in-pad">📚全栈开发学习指南</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/quicknav/" class="nav-link" aria-label="快速导航"><span class="icon iconfont icon-navigation"></span>快速导航<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/" class="nav-link" aria-label="博客主页"><span class="icon iconfont icon-blog"></span>博客主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/notes/" class="nav-link" aria-label="Java学习教程"><span class="icon iconfont icon-java"></span>Java学习教程<!----></a></div><div class="nav-item hide-in-mobile"><a href="/web/" class="nav-link active" aria-label="web学习教程"><span class="icon iconfont icon-note"></span>web学习教程<!----></a></div><div class="nav-item hide-in-mobile"><a href="/springcloud/" class="nav-link" aria-label="SpringCloud学习教程"><span class="icon iconfont icon-cache"></span>SpringCloud学习教程<!----></a></div><div class="nav-item hide-in-mobile"><a href="/distributed/" class="nav-link" aria-label="分布式微服务架构"><span class="icon iconfont icon-read"></span>分布式微服务架构<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="资源宝库"><span class="title"><span class="icon iconfont icon-advance"></span>资源宝库</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/resources/books/" class="nav-link" aria-label="书籍资源"><span class="icon iconfont icon-animation"></span>书籍资源<!----></a></li><li class="dropdown-item"><a href="/resources/videos/" class="nav-link" aria-label="影音资源"><span class="icon iconfont icon-play"></span>影音资源<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/Ragnarokoo/LearningNotes" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索本站" autocomplete="off" spellcheck="false" value><!----></form><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-html"></span><span class="title">HTML&amp;CSS</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-javascript"></span><span class="title">深入学习JavaScript系列</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-ajax"></span><span class="title">RESTAPI&amp;AJAX</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/web/ajax/AJAX%E6%A6%82%E8%BF%B0%20HTTP%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98.html" class="nav-link sidebar-link sidebar-page" aria-label="AJAX概述 HTTP相关问题"><!---->AJAX概述 HTTP相关问题<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/ajax/axios%20fetch%20%E8%B7%A8%E5%9F%9F.html" class="nav-link sidebar-link sidebar-page" aria-label="axios fetch 跨域"><!---->axios fetch 跨域<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/ajax/fetch%E3%80%81ajax%E3%80%81axios%E7%9A%84%E5%8C%BA%E5%88%AB.html" class="nav-link sidebar-link sidebar-page" aria-label="fetch、ajax、axios的区别"><!---->fetch、ajax、axios的区别<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="三句话让 AJAX 为我欲罢不能"><!---->三句话让 AJAX 为我欲罢不能<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_1、ajax-简介" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、AJAX 简介"><!---->1、AJAX 简介<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_2、xml-简介" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、XML 简介"><!---->2、XML 简介<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_3、ajax-的特点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、AJAX 的特点"><!---->3、AJAX 的特点<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#ajax-的优点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="AJAX 的优点"><!---->AJAX 的优点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#ajax-的缺点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="AJAX 的缺点"><!---->AJAX 的缺点<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_4、http-协议" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、HTTP 协议"><!---->4、HTTP 协议<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#请求报文" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="请求报文"><!---->请求报文<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#响应报文" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="响应报文"><!---->响应报文<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#状态码分类表" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="状态码分类表"><!---->状态码分类表<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#常见的响应状态码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="常见的响应状态码"><!---->常见的响应状态码<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_5、开发准备" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、开发准备"><!---->5、开发准备<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#安装-node-js" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装 Node.js"><!---->安装 Node.js<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#使用-express" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用 express"><!---->使用 express<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#案例前准备" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="案例前准备"><!---->案例前准备<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_6、ajax-发送-get-请求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6、AJAX 发送 GET 请求"><!---->6、AJAX 发送 GET 请求<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#get-设置请求行" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="GET 设置请求行"><!---->GET 设置请求行<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_7、ajax-发送-post-请求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7、AJAX 发送 POST 请求"><!---->7、AJAX 发送 POST 请求<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#post-设置请求体" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="POST 设置请求体"><!---->POST 设置请求体<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_8、ajax-设置请求头信息" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8、AJAX 设置请求头信息"><!---->8、AJAX 设置请求头信息<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#预定义的请求头" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="预定义的请求头"><!---->预定义的请求头<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#自定义的请求头" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="自定义的请求头"><!---->自定义的请求头<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_9、服务器端响应-json-数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9、服务器端响应 JSON 数据"><!---->9、服务器端响应 JSON 数据<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#手动转换数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="手动转换数据"><!---->手动转换数据<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#自动转换数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="自动转换数据"><!---->自动转换数据<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_10、nodemon-自动重启工具安装" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10、nodemon 自动重启工具安装"><!---->10、nodemon 自动重启工具安装<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_11、ie缓存问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11、IE缓存问题"><!---->11、IE缓存问题<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_12、请求超时与网络异常" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12、请求超时与网络异常"><!---->12、请求超时与网络异常<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#请求超时" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="请求超时"><!---->请求超时<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#网络异常" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="网络异常"><!---->网络异常<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_13、手动取消请求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="13、手动取消请求"><!---->13、手动取消请求<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_14、请求重复发送" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="14、请求重复发送"><!---->14、请求重复发送<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_15、jquery-发送-ajax-请求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="15、jQuery 发送 AJAX 请求"><!---->15、jQuery 发送 AJAX 请求<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#get-请求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="GET 请求"><!---->GET 请求<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#post请求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="POST请求"><!---->POST请求<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#通用方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="通用方法"><!---->通用方法<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_16、axios-发送-ajax-请求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="16、axios 发送 AJAX 请求"><!---->16、axios 发送 AJAX 请求<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#get-请求-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="GET 请求"><!---->GET 请求<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#post-请求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="POST 请求"><!---->POST 请求<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#通用方法-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="通用方法"><!---->通用方法<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_17、fetch-函数-发送-ajax-请求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="17、fetch 函数 发送 AJAX 请求"><!---->17、fetch 函数 发送 AJAX 请求<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_18、跨域问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="18、跨域问题"><!---->18、跨域问题<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#同源策略" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="同源策略"><!---->同源策略<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#如何解决跨域" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="如何解决跨域"><!---->如何解决跨域<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/web/ajax/Axios%E5%85%A5%E9%97%A8%E4%B8%8E%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.html" class="nav-link sidebar-link sidebar-page" aria-label="Axios入门与源码分析"><!---->Axios入门与源码分析<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/ajax/Fetch%20API%20%E6%95%99%E7%A8%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="Fetch API 教程"><!---->Fetch API 教程<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-structure"></span><span class="title">Promise从入门到精通</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-jQuery"></span><span class="title">jQuery从入门到精通</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-css"></span><span class="title">CSS 预处理语言</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-css"></span><span class="title">Tailwind CSS</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-vue"></span><span class="title">Vue 渐进式框架</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-react"></span><span class="title">Facebook React</span><!----></p><ul class="sidebar-links"></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-typescript"></span><span class="title">深入浅出typescript</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-es6"></span><span class="title">ECMAScript6语法糖系列</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-view"></span><span class="title">前端构建工具</span><!----></p><ul class="sidebar-links"></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-nodeJS"></span><span class="title">深入浅出NodeJs系列</span><!----></p><ul class="sidebar-links"></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->三句话让 AJAX 为我欲罢不能</h1><div class="page-info"><span class="category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li><span class="category category3 clickable" role="navigation">ajax</span></li></ul><meta property="articleSection" content="ajax"></span><span aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li><span class="tag tag3 clickable" role="navigation">ajax</span></li><li><span class="tag tag4 clickable" role="navigation">javascript</span></li></ul><meta property="keywords" content="ajax,javascript"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 20 分钟</span><meta property="timeRequired" content="PT20M"></span><span class="author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://github.com/Ragnarokoo/" target="_blank" rel="noopener noreferrer">Ragnarok</a></span><span property="author" content="Ragnarok"></span></span><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-05-31T09:16:41.000Z"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_1、ajax-简介" class="router-link-active router-link-exact-active toc-link level2">1、AJAX 简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_2、xml-简介" class="router-link-active router-link-exact-active toc-link level2">2、XML 简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_3、ajax-的特点" class="router-link-active router-link-exact-active toc-link level2">3、AJAX 的特点</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#ajax-的优点" class="router-link-active router-link-exact-active toc-link level3">AJAX 的优点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#ajax-的缺点" class="router-link-active router-link-exact-active toc-link level3">AJAX 的缺点</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_4、http-协议" class="router-link-active router-link-exact-active toc-link level2">4、HTTP 协议</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#请求报文" class="router-link-active router-link-exact-active toc-link level3">请求报文</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#响应报文" class="router-link-active router-link-exact-active toc-link level3">响应报文</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#状态码分类表" class="router-link-active router-link-exact-active toc-link level3">状态码分类表</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#常见的响应状态码" class="router-link-active router-link-exact-active toc-link level3">常见的响应状态码</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_5、开发准备" class="router-link-active router-link-exact-active toc-link level2">5、开发准备</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#安装-node-js" class="router-link-active router-link-exact-active toc-link level3">安装 Node.js</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#使用-express" class="router-link-active router-link-exact-active toc-link level3">使用 express</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#案例前准备" class="router-link-active router-link-exact-active toc-link level3">案例前准备</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_6、ajax-发送-get-请求" class="router-link-active router-link-exact-active toc-link level2">6、AJAX 发送 GET 请求</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#get-设置请求行" class="router-link-active router-link-exact-active toc-link level3">GET 设置请求行</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_7、ajax-发送-post-请求" class="router-link-active router-link-exact-active toc-link level2">7、AJAX 发送 POST 请求</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#post-设置请求体" class="router-link-active router-link-exact-active toc-link level3">POST 设置请求体</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_8、ajax-设置请求头信息" class="router-link-active router-link-exact-active toc-link level2">8、AJAX 设置请求头信息</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#预定义的请求头" class="router-link-active router-link-exact-active toc-link level3">预定义的请求头</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#自定义的请求头" class="router-link-active router-link-exact-active toc-link level3">自定义的请求头</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_9、服务器端响应-json-数据" class="router-link-active router-link-exact-active toc-link level2">9、服务器端响应 JSON 数据</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#手动转换数据" class="router-link-active router-link-exact-active toc-link level3">手动转换数据</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#自动转换数据" class="router-link-active router-link-exact-active toc-link level3">自动转换数据</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_10、nodemon-自动重启工具安装" class="router-link-active router-link-exact-active toc-link level2">10、nodemon 自动重启工具安装</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_11、ie缓存问题" class="router-link-active router-link-exact-active toc-link level2">11、IE缓存问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_12、请求超时与网络异常" class="router-link-active router-link-exact-active toc-link level2">12、请求超时与网络异常</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#请求超时" class="router-link-active router-link-exact-active toc-link level3">请求超时</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#网络异常" class="router-link-active router-link-exact-active toc-link level3">网络异常</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_13、手动取消请求" class="router-link-active router-link-exact-active toc-link level2">13、手动取消请求</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_14、请求重复发送" class="router-link-active router-link-exact-active toc-link level2">14、请求重复发送</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_15、jquery-发送-ajax-请求" class="router-link-active router-link-exact-active toc-link level2">15、jQuery 发送 AJAX 请求</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#get-请求" class="router-link-active router-link-exact-active toc-link level3">GET 请求</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#post请求" class="router-link-active router-link-exact-active toc-link level3">POST请求</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#通用方法" class="router-link-active router-link-exact-active toc-link level3">通用方法</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_16、axios-发送-ajax-请求" class="router-link-active router-link-exact-active toc-link level2">16、axios 发送 AJAX 请求</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#get-请求-1" class="router-link-active router-link-exact-active toc-link level3">GET 请求</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#post-请求" class="router-link-active router-link-exact-active toc-link level3">POST 请求</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#通用方法-1" class="router-link-active router-link-exact-active toc-link level3">通用方法</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_17、fetch-函数-发送-ajax-请求" class="router-link-active router-link-exact-active toc-link level2">17、fetch 函数 发送 AJAX 请求</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#_18、跨域问题" class="router-link-active router-link-exact-active toc-link level2">18、跨域问题</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#同源策略" class="router-link-active router-link-exact-active toc-link level3">同源策略</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/ajax/%E4%B8%89%E5%8F%A5%E8%AF%9D%E8%AE%A9%20AJAX%20%E4%B8%BA%E6%88%91%E6%AC%B2%E7%BD%A2%E4%B8%8D%E8%83%BD.html#如何解决跨域" class="router-link-active router-link-exact-active toc-link level3">如何解决跨域</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="三句话让-ajax-为我欲罢不能" tabindex="-1"><a class="header-anchor" href="#三句话让-ajax-为我欲罢不能" aria-hidden="true">#</a> 三句话让 AJAX 为我欲罢不能</h1><p>大家好，我是精通<code>AJAX</code>的猿类高质量雄性码农，三句话让<code>AJAX</code>为我欲罢不能</p><ul><li>什么是 <code>AJAX</code>？</li><li>为什么要<code>AJAX</code>？</li><li>怎么<code>AJAX</code>？</li></ul><p>下面就带着这三句话，来一起深入了解<code>AJAX</code>吧~</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>🤓
  👔🤳
  👖
👞👞
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1、ajax-简介" tabindex="-1"><a class="header-anchor" href="#_1、ajax-简介" aria-hidden="true">#</a> 1、AJAX 简介</h2><hr><p><code>AJAX</code>全称为<code>Asynchronous JavaScript And XML</code>，就是异步的 JS 和 XML</p><p>通过<code>AJAX</code>可以在浏览器中向服务器发送异步请求，最大的优势： <strong>无刷新获取数据</strong></p><p><code>AJAX</code>不是新的编程语言，而是一种将现有的标准组合在一起使用的新方式</p><p><strong>场景1：关键字检索</strong></p><p><img src="/assets/8fuMd1zh2cpeUOG.617a6f49.png" alt="img"></p><p><strong>场景2：注册用户名重名检测</strong></p><p><img src="/assets/FLv3KZM4gr6H9tk.0c6bd5ed.png" alt="img"></p><p><strong>场景3：菜单详情内容</strong></p><p><img src="/assets/cbLql3TwFNzt7vu.7eee03b3.png" alt="img"></p><p><strong>场景4：二级三级菜单分类</strong></p><p><img src="/assets/5yk1HUfoRFiB9bn.3085669d.png" alt="img"></p><p><strong>场景5：加载更多</strong></p><p><img src="https://i.loli.net/2021/09/11/FKQmgorATWq3cZI.png" alt="img"></p><p><strong>好处：</strong> 懒加载，按需加载，提高资源利用率，加快页面整体加载速度，提升用户体验</p><h2 id="_2、xml-简介" tabindex="-1"><a class="header-anchor" href="#_2、xml-简介" aria-hidden="true">#</a> 2、XML 简介</h2><hr><p>XML 可扩展标记语言，被设计用来传输和存储数据</p><p>XML 和 HTML 类似，不同的是 HTML 中都是预定义标签，而 XML 中没有预定义标签，全都是自定义标签，用来表示一些数据</p><p>比如说我有一个学生数据：<code>name=&quot;孙悟空&quot;;age=18;gender=&quot;男&quot;;</code></p><p>用 XML 表示：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>student</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>孙悟空<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>age</span><span class="token punctuation">&gt;</span></span>18<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>age</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>gender</span><span class="token punctuation">&gt;</span></span>男<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>gender</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>student</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在已经被 JSON 取代了。用 JSON 表示：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;孙悟空&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;age&quot;</span><span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token property">&quot;gender&quot;</span><span class="token operator">:</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3、ajax-的特点" tabindex="-1"><a class="header-anchor" href="#_3、ajax-的特点" aria-hidden="true">#</a> 3、AJAX 的特点</h2><hr><h3 id="ajax-的优点" tabindex="-1"><a class="header-anchor" href="#ajax-的优点" aria-hidden="true">#</a> AJAX 的优点</h3><ul><li>可以无需刷新页面而与服务器端进行通信</li><li>允许你根据用户事件来更新部分页面内容</li></ul><h3 id="ajax-的缺点" tabindex="-1"><a class="header-anchor" href="#ajax-的缺点" aria-hidden="true">#</a> AJAX 的缺点</h3><ul><li>没有浏览历史，不能回退</li><li>存在跨域问题（同源）</li><li>SEO（Search Engine Optimization，搜索引擎优化）不友好，爬虫无法爬取</li></ul><h2 id="_4、http-协议" tabindex="-1"><a class="header-anchor" href="#_4、http-协议" aria-hidden="true">#</a> 4、HTTP 协议</h2><hr><p>HTTP（hypertext transport protocol）协议「超文本传输议」，协议详细规定了浏览器和万维网服务器之间互相通信的规则</p><p>重点是 <strong>格式与参数</strong></p><h3 id="请求报文" tabindex="-1"><a class="header-anchor" href="#请求报文" aria-hidden="true">#</a> 请求报文</h3><ul><li>请求行 <ul><li>请求类型：<code>GET</code>/<code>POST</code>/<code>PUT</code>/<code>DELETE</code>/<code>PATCH</code></li><li>URL 路径：<code>s?ie=utf-8</code></li><li>HTTP 协议版本：<code>HTTP/1.1</code></li></ul></li><li>请求头 <ul><li><code>Host: atguigu.com</code></li><li><code>Cookie: name=guigu</code></li><li><code>Content-type: application/x-www-form-urlencoded</code></li><li><code>User-Agent: chrome 83</code></li><li>...</li></ul></li><li>空行：固定格式，必须有</li><li>请求体：GET请求，请求体为空；POST请求，请求体可以不为空 <ul><li><code>username=admin&amp;password=admin</code></li></ul></li></ul><p><img src="https://i.loli.net/2021/09/11/mR6qoArTkIzFWU9.png" alt="image-20210911121856952"></p><p><img src="/assets/6AL9pb2fnNds4kZ.03cf7428.png" alt="image-20210911121929929"></p><h3 id="响应报文" tabindex="-1"><a class="header-anchor" href="#响应报文" aria-hidden="true">#</a> 响应报文</h3><ul><li><p>响应行</p><ul><li>HTTP 协议版本：<code>HTTP/1.1</code></li><li>响应状态码：<code>200/404/500</code></li><li>响应状态字符串：<code>OK/Not Found/Internal Server Error</code>，与响应状态码对应</li></ul></li><li><p>响应头</p><ul><li><code>Content-Type: text/html;charset=utf-8</code></li><li><code>Content-length: 2048</code></li><li><code>Content-encoding: gzip</code></li><li>...</li></ul></li><li><p>空行：固定格式，必须有</p></li><li><p>响应体</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>响应体<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><img src="/assets/CDpd6rJTlVz4yLq.d8dcb0f5.png" alt="image-20210911121546478"></p><p><img src="/assets/p47sgA9oFCPYVGZ.76d83354.png" alt="image-20210911121636341"></p><h3 id="状态码分类表" tabindex="-1"><a class="header-anchor" href="#状态码分类表" aria-hidden="true">#</a> 状态码分类表</h3><table><thead><tr><th></th><th>类别</th><th>描述</th></tr></thead><tbody><tr><td><code>1xx</code></td><td><code>Informational(信息性状态码)</code></td><td>请求正在处理</td></tr><tr><td><code>2xx</code></td><td><code>Success(成功状态码)</code></td><td>请求正常处理完毕</td></tr><tr><td><code>3xx</code></td><td><code>Redirection(重定向)</code></td><td>需要进行附加操作以完成请求</td></tr><tr><td><code>4xx</code></td><td><code>Client error(客户端错误)</code></td><td>客户端请求出错</td></tr><tr><td><code>5xx</code></td><td><code>Server Error(服务器错误)</code></td><td>服务器处理请求出错</td></tr></tbody></table><h3 id="常见的响应状态码" tabindex="-1"><a class="header-anchor" href="#常见的响应状态码" aria-hidden="true">#</a> 常见的响应状态码</h3><table><thead><tr><th>状态码</th><th>状态字符串</th><th>描述</th></tr></thead><tbody><tr><td><code>200</code></td><td><code>OK</code></td><td>请求成功</td></tr><tr><td><code>302</code></td><td><code>Found</code></td><td>请求资源的 URL 被暂时修改到 Location 提供的 URL</td></tr><tr><td><code>304</code></td><td><code>Not Modified</code></td><td>资源未变更</td></tr><tr><td><code>308</code></td><td><code>Permanent Redirect</code></td><td>永久重定向</td></tr><tr><td><code>400</code></td><td><code>Bad Request</code></td><td>请求语法有问题，服务器无法识别</td></tr><tr><td><code>401</code></td><td><code>UnAuthorized</code></td><td>客户端未授权该请求</td></tr><tr><td><code>403</code></td><td><code>Forbidden</code></td><td>服务器拒绝响应</td></tr><tr><td><code>404</code></td><td><code>Not Found</code></td><td>URL 无效或者 URL 有效但是没有资源</td></tr><tr><td><code>500</code></td><td><code>Internal Server Error</code></td><td>服务器内部错误</td></tr><tr><td><code>502</code></td><td><code>Bad Gateway</code></td><td>服务器作为网关使用时，收到上游服务器返回的无效响应</td></tr><tr><td><code>503</code></td><td><code>Service Unavailable</code></td><td>无法服务。一般发生在因维护而停机或者服务过载</td></tr><tr><td><code>504</code></td><td><code>Gateway Timeout</code></td><td>网关超时</td></tr><tr><td><code>505</code></td><td><code>Http Version Not Supported</code></td><td>发出的请求http版本服务器不支持</td></tr></tbody></table><h2 id="_5、开发准备" tabindex="-1"><a class="header-anchor" href="#_5、开发准备" aria-hidden="true">#</a> 5、开发准备</h2><hr><h3 id="安装-node-js" tabindex="-1"><a class="header-anchor" href="#安装-node-js" aria-hidden="true">#</a> 安装 Node.js</h3><ul><li>官网地址：<a href="https://gitee.com/link?target=https%3A%2F%2Fnodejs.org%2Fen%2F" target="_blank" rel="noopener noreferrer">https://nodejs.org/en/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>cmd 键入命令<code>node -v</code>，出现版本号信息说明安装成功</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> <span class="token parameter variable">-v</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="使用-express" tabindex="-1"><a class="header-anchor" href="#使用-express" aria-hidden="true">#</a> 使用 express</h3><ul><li>官网地址：<a href="https://gitee.com/link?target=https%3A%2F%2Fwww.expressjs.com.cn%2F" target="_blank" rel="noopener noreferrer">https://www.expressjs.com.cn/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><strong>npm（node package manager）</strong>：<code>Node.js</code>的包管理器，用于<code>node</code>插件管理（包括安装、卸载、管理依赖等）</li></ul><p>打开终端，键入命令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 初始化</span>
<span class="token function">npm</span> init <span class="token parameter variable">--yes</span>
<span class="token comment"># 安装express框架</span>
<span class="token function">npm</span> i express
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建 js 文件，编写代码</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 1、引入express</span>
<span class="token comment">// const express = require(&#39;express&#39;);</span>
<span class="token keyword">import</span> express <span class="token keyword">from</span> <span class="token string">&#39;express&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// 2、创建应用对象</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3、创建路由规则</span>
<span class="token comment">// request 请求报文的封装</span>
<span class="token comment">// response 响应报文的封装</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置响应</span>
    response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello Express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4、监听端口启动服务</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务已经启动，8000 端口监听中...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再次打开终端，键入命令 <code>node js文件名</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">node</span> 01-express基本使用.js
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>出现<code>服务已经启动，8000 端口监听中...</code>字样，说明启动成功</p><p>我们打开浏览器，访问<code>http://127.0.0.1:8000/</code>，出现<code>Hello Express</code>字样，验证 OK</p><h3 id="案例前准备" tabindex="-1"><a class="header-anchor" href="#案例前准备" aria-hidden="true">#</a> 案例前准备</h3><p>新建 HTML</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">#result</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #90b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>点击发送请求<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对路由规则稍作修改</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置响应头，设置允许跨域</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Origin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置响应体</span>
    response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello Express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>按照上述步骤启动express后，浏览器访问<code>http://127.0.0.1:8000/server</code>，能够正常访问，并且响应头中出现我们设置的头部信息即可</p><p><img src="/assets/xXmCQGZBqckr5tg.4cd38332.png" alt="image-20210911152140112"></p><h2 id="_6、ajax-发送-get-请求" tabindex="-1"><a class="header-anchor" href="#_6、ajax-发送-get-请求" aria-hidden="true">#</a> 6、AJAX 发送 GET 请求</h2><hr><ul><li><p>1、创建对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>2、初始化</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://127.0.0.1:8000/server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>3、发送</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>4、事件绑定，处理服务器端返回的结果</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><code>readeyState</code></p><ul><li><code>0</code>：未初始化</li><li><code>1</code>：open 方法调用完毕</li><li><code>2</code>：send 方法调用完毕</li><li><code>3</code>：服务端返回部分结果</li><li><code>4</code>：服务端返回所有结果</li></ul></li><li><p><code>status</code>：状态码</p></li><li><p><code>statusText</code>：状态字符串</p></li><li><p><code>getAllResponseHeaders()</code>：响应头</p></li><li><p><code>response</code>：响应体</p></li></ul><p><strong>完整代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;result&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 按钮绑定事件</span>
<span class="token keyword">const</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1、创建对象</span>
    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2、初始化</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://127.0.0.1:8000/server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3、发送</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 4、事件绑定，处理服务器端返回的结果</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 服务端返回所有结果</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 2xx 成功</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 状态码、状态字符串</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
                <span class="token comment">// 响应头</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAllResponseHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// content-length: 13  content-type: text/html; charset=utf-8</span>
                <span class="token comment">// 响应体</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello Express</span>
                <span class="token comment">// 将响应体内容设置为文本</span>
                result<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>效果</strong></p><p><img src="/assets/NxT8f1rKHJnRezd.4423f4fb.gif" alt="AJAX 请求的基本操作"></p><h3 id="get-设置请求行" tabindex="-1"><a class="header-anchor" href="#get-设置请求行" aria-hidden="true">#</a> GET 设置请求行</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://127.0.0.1:8000/server?a=100&amp;b=200&amp;c=300&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_7、ajax-发送-post-请求" tabindex="-1"><a class="header-anchor" href="#_7、ajax-发送-post-请求" aria-hidden="true">#</a> 7、AJAX 发送 POST 请求</h2><hr><p>我们对之前的发送请求代码稍作修改，将<code>GET</code>请求改为<code>POST</code>即可</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;result&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
result<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;mouseover&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://127.0.0.1:8000/server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在浏览器中测试结果，报错</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVgAAAB1CAMAAAA89wkuAAAAulBMVEX////+/v78/Pz7+/v5+fn4+Pj39/fy8vLw8PD03vvn5+fk5OTx1/rg4OLd3d7c3Nza2trZ2dnT09TT09PpvffOzs7MzM3MzMzlsfXExMTDw8TCwsLAwMHdm/O2tre2tra1tbWxsbKvr7DYi/GgoKLReO6enp6ampyYmJrMaeyUlJaTk5WSkpKRkZGIiIrFVOqFhYXBSehycnVtbW24LuViYmJhYWFVVVVUVFRSUlZJSUlISEg9PT04OD2LSNqJAAAJH0lEQVR42u2dYV/juBHGn+u2y6HSnjmxbdoKL1W0adNZSu3TAgLr+3+tvhjJlp0EuF/jhHTneYHj2LHwP5OZsSVrAJFIJBLNpx8+/PihXNdEROQAAEREFgDgiIi0I5ZJ+zrz2tGN6/erWwBoY4w1EFm8E/WvUPHmpPwu2rRH3jxdAig+9j70m9///acPG2DJASZhTIRfAuvMDsykAWgCEGKb6NaZQaDEFWhD4lqjjlXPOx8l7ZE3T5cAKLw3i/3dX//1jz9+HIEFNJFSRBZQRBaaSAFaA3BU4HsVrCYAsBaIVdv29sev6jjYWsV42nbg3VLeAYF4j7x5uhw+9K7AEv3zTx/HYEGkLfsDTaQM9f/2BKwlslBERH8hItIg7YgsYHqkyWyxATaxYKYFnt746piMuCWgisPm6TIdJLBfiDESUMc6htBme48xAIh1zL+Hg4Al+vPHH0qwhkglhIpIa+rJjsGShiZdWiyRAsgwWEWq97MD2IpdQbZHXjLYWG8Fiwi09bB5uuSDty1Aaf8adWzTtkAIaXPvXA4Gln7+7djHWmRXSqRhKaMdg7WJZwHWDCjL0FWAjaE02NfA5pgV6SWwsc6HaFsA1LLvrWKFKlbpGwIiHRusGRAS6fSu2upjJ2D7aJXfYbMtPGsoPMDbwMYWoFjtBlvHPtiFGGOMYTgsBRDnINVBU4etrgAABh+bQjPZXwlWF342g6VsND2+ignU/V9qJ2B7RnnzdJmtP8Qw+SGwI+7bOjTYzeDFL3JWYDgfeBPYwhWUoSuB7VOtIozvyAq2gN2VFfTWX8UqJW7pQ1WsI4YM7rBgt6Rb7CGnGa3eDdZmj0ukoEjD0MQtMIUiglU5kFFIkYUJ1ZEDeRG8QouUt/Lm6ZItsgXqiCoSQHX+VgLDD0DVHhbslguE/FLliwFF2cXuAKuJNP8hzd+AoXHoymDzFVc67yrWQBtjC44sNV9iTcAiRE6T0ubpMqcZMVa8oL6B9BOJOd063iXt/6j8w5+GrjlVHzCJOpoGsJoUAOvmbzO03xVYkUgkEolEIpFIJBKJRCKRaG79QTSLxLJEIpFIJBKJRCKRSCQSiXD56dOlUNi3zlYPXdd1D6uzAzesHA+/7Me3qeM+Q9X4BQAsm20b195737x2iPKzl0/d/e3Nze1993R5FLCAS2S1OzJYvwG2X1mv33KI4rOX3fMNv7p57g5JljSDHZ6mzbKztnvN+O48L/M6gGbtl3sDe/b0fAmsHh5WwOXz0wG9gSblLA2P0QIgO/+g13MGeucB74d1AGiWa3+R4Cy990ug8d6vR2AvkkfwCwDNEgt/4b2/YGexHsCuuhtg1d3fdyvgplsd0GSddeUzGVCkYc3crX65u/bAlb8Grv11Xk9g4RsGu/YA/HLTYhd+AaybEmwDNOkji8ELP94DuH8EHr8BeHw4uI81KXQpIkOAoXnRXvmraw9c+3Oce/8lr2ewC7/EssGFXwBY+BKs994v0azB5lpYLO/pF2DkycPeAljd4OzpFwC3h/SyihwAay0ATW4gPWcIu7tDAus9/Je8nsFi7bFssPD8q7/YsFhOHJplAZa/gsU48H3qOHKdfev+BuCm+3RQHwsowgEedyki13kC669w7r/k9R4s/HqvYP/T3eKwYBVBOcAaGH6uUDnFj3PNGcDuvPfe+6srfw1c+au8PoBd+KbBhb/YcAXrYR/4RfoWBrD8kWbsCoBf7oFDuwIox6GLNGAsnIKxKK4XZrNaAHf+HHd+WB+grf0oePkdwWvdAOsCLJoGWBbB6xtbLlvq4+Nhgxc/9aZIK1Jwiq8R5r7+YpDe+ztsAwvfpFi14P3G6dYiJ2De+2XhCoBmM90Cbr+yJ1gdFqzLGYHqH6k1+P/Q2fPTZTbVy6fnM4j2dWOre/qcLmmfOrnFtU+yz923r58/f33onoXrnm8bPnZd1z2uxA/s32rlRrdIJBKJRCKRSCQSiURvlXa5t0vn7kM1+0gYnieyilWVZkX/d1pWdUyz5+W96mL2snhyYNVo5MsBwRYTy9bD/IYhDC9jD5biCYLNtloOMXJHA8tvte1oDvVicvTTA5tMY+ZhW28Ey1NpDnOon9hkkZqISJf1Dpx2Rh8VLM8UzZ72dMG6vj+Rx8I5rdy8owryxNpxF9hIRXmEU7ZYpZwxAIHnhlbuLdVP5rJYnme3f/t0wVo4pZ0iGAuucqAcAOeO5wpKoCcL1lg4pS2sJUCT6ivOGDoq2DwL9MmCtQZOWZPmh38feeyG5VI8PbCk4DTBkOoT1/cANtCJg1UOcNaQBWDSta1yR/+3qoPV3vnO1AZhIBKJRCKRSCQSiUQi0bFkLN895JVUQ3Xu7kRQus3Cd6zaOO7bLu7BVHEyuoB3SG/Uo5sK04rg+Zip4F/ohyy81Mje6gE6bYcOb5f6vdzcc0Fwh1caK1DUWc8k8l6FijvvIZ/8S2CHgQgh1lvqhe9opNrT3UnluIMGucvWwinwk5/zqQ2xGsYK5CrquYpyVr3DYgecL4AdBiJQiHVR//a1Rtr99J1Yi9xBmwCz9c5Kto6JI597rqIOoApb7HKqUE/gBP5iKIwMvy8tyqVDh6O93Ei1l3uWmqzpB79oqwn5+5pzAoNYj8DmKuoJR8xFV0f0MPaIUxulVFS98Bi5Vi2BK68n83y1kb3cZSdj+5AFEAi50uyMHeChxQhsNXGhoxrMiXjc5gnQ9hBiVdQFL8G2AYg1qhiGkPlyI2EP4UsZbQGXRsJwyV8Dq62eESwFjMHmKuqFgxwcIp9ztR1szA6R2my/Q3XVYVhNrFODowC2q5Gwl7xA58yK+7uTxc4KdnCMxbmnc24nrrM/57ANbNsix7zeMVTF770cdVOAfaWR/YFNRabBI+Jmt1hgbLEl2M1gvwm2igW5ugCTioK3k3yKc9NQv7WR/fRkagsFR4ZSunUAi52C7auov3DOVCZcoSouMoo8YHKBMAZLffX2Vxqp99OTya6gH1VA0AZ25uA1BdtXUe/PuR2d83QzA8iXUdT/9l8EC5pc3u1qZE95bPaxxvVgiZShIxafLtIiFHnYOJGti31Syfv4a65GdzZSfQ8123fbez3f11pDJBKJRCKRSPTO9F/9mQX3/xY6dgAAAABJRU5ErkJggg==" alt="image-20210911162007786"></p><p>这是因为，<code>server.js</code>中只设置了<code>GET</code>请求方式的路由规则，并没有创建<code>POST</code>请求的路由规则</p><p>我们添加下，同样只是稍作修改，将<code>get</code>方法改为<code>post</code>方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置响应头，设置允许跨域</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Origin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置响应体</span>
    response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello Express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新运行<code>node server.js</code>命令，并访问浏览器，能够正常获取数据</p><p><img src="/assets/S4LTPdh7FcXsCrf.c107addf.gif" alt="AJAX 发送 POST 请求"></p><h3 id="post-设置请求体" tabindex="-1"><a class="header-anchor" href="#post-设置请求体" aria-hidden="true">#</a> POST 设置请求体</h3><p>可以设置任意类型、任意格式的数据，只要服务器端有与之对应的处理方式即可</p><p>从语法上来说，请求体格式非常灵活；但实际使用场景中，一般会按照特定格式书写（如 JSON）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;a=100&amp;b=200&amp;c=300&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_8、ajax-设置请求头信息" tabindex="-1"><a class="header-anchor" href="#_8、ajax-设置请求头信息" aria-hidden="true">#</a> 8、AJAX 设置请求头信息</h2><hr><h3 id="预定义的请求头" tabindex="-1"><a class="header-anchor" href="#预定义的请求头" aria-hidden="true">#</a> 预定义的请求头</h3><p>在初始化之后、发送请求之前，可以设置请求头信息</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-Type&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;application/x-www-form-urlencoded&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="/assets/WZXJYdsfBx2S8ja.6f8cf9b0.png" alt="image-20210911163738410"></p><h3 id="自定义的请求头" tabindex="-1"><a class="header-anchor" href="#自定义的请求头" aria-hidden="true">#</a> 自定义的请求头</h3><p>除了可以设置上述预定义的请求头信息，也可以设置自定义的请求头信息</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;atguigu&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看头信息已经有了</p><p><img src="/assets/Q1KTYFhXxWUoMdv.dd2e6ea7.png" alt="image-20210911163955857"></p><p>但是，这时候会有报错，这是因为浏览器的安全机制</p><p><img src="/assets/uSAjZ1fxJvE7sVW.b31226b5.png" alt="image-20210911164619003"></p><p>我们需要在<code>server.js</code>中添加一行响应头的设置</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Headers&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>但是仅仅如此，依然不行。我们注意到还有一个<code>OPTIONS</code>请求方法，它会对请求头进行校验，检测头信息可用不可用</p><p>要知道，我们在<code>server.js</code>中并没有创建过<code>OPTIONS</code>相关的路由规则，所以是接收不到<code>OPTIONS</code>请求的</p><p>我们可以用将<code>post</code>方法改为<code>all</code>，它可以接收任意类型的请求（GET/POST/PUT/DELETE/PATCH/OPTIONS...）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置响应头，允许跨域</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Origin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置响应头，允许任意类型的头信息</span>
    response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Headers&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置响应体</span>
    response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello Express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启<code>server.js</code>服务，查看网络控制台，状态已经正常了</p><p><img src="/assets/olXuCGhQwxvEFZR.e04618b6.png" alt="image-20210911165659245"></p><h2 id="_9、服务器端响应-json-数据" tabindex="-1"><a class="header-anchor" href="#_9、服务器端响应-json-数据" aria-hidden="true">#</a> 9、服务器端响应 JSON 数据</h2><hr><p>修改<code>server.js</code>中<code>send</code>方法中的内容，需要注意的是该方法只能接收字符串和<code>buffer</code>，所以对其需要做转换</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;Hello Ajax&#39;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>js 代码</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;result&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onkeydown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://127.0.0.1:8000/server-json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            result<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>效果</strong></p><p><img src="/assets/yYNBQG4ahDq8mHC.89355cd2.gif" alt="服务器端响应 JSON 数据"></p><p>上述返回数据比较简单，获取其中内容相对方便。一旦结果比较复杂，想要提取某些数据，就会很麻烦</p><p>这时候就需要对返回结果进行处理</p><h3 id="手动转换数据" tabindex="-1"><a class="header-anchor" href="#手动转换数据" aria-hidden="true">#</a> 手动转换数据</h3><p>因为我们服务端返回的是<code>json</code>字符串内容，所以<code>response</code>的内容类型也是字符串</p><p>这个时候使用<code>JSON</code>工具方法，可以将<code>json</code>字符串转换为<code>json</code>对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string</span>
data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
result<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> data<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/P7rTFYwDjzIqGX5.03448f59.gif" alt="手动转换数据"></p><h3 id="自动转换数据" tabindex="-1"><a class="header-anchor" href="#自动转换数据" aria-hidden="true">#</a> 自动转换数据</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 设置响应体类型</span>
xhr<span class="token punctuation">.</span>responseType <span class="token operator">=</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>这样在获取结果就是<code>json</code>对象了，不用进行手动转换即可使用</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> response <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object</span>
result<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> response<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10、nodemon-自动重启工具安装" tabindex="-1"><a class="header-anchor" href="#_10、nodemon-自动重启工具安装" aria-hidden="true">#</a> 10、nodemon 自动重启工具安装</h2><hr><ul><li>官网地址：<a href="https://gitee.com/link?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fnodemon" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/nodemon<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>安装命令：<code>npm install -g nodemon</code></li><li>启动命令：<code>nodemon xxx.js</code>替代<code>node xxx.js</code></li><li>优点：修改服务端代码不用每次手动<code>shutdown</code>重启，而是每次在我们修改完代码后自动重启</li></ul><p><img src="/assets/tPTAeYF8njgGkwq.bda09d0e.gif" alt="nodemon 自动重启"></p><h2 id="_11、ie缓存问题" tabindex="-1"><a class="header-anchor" href="#_11、ie缓存问题" aria-hidden="true">#</a> 11、IE缓存问题</h2><hr><p>使用<code>nodemon</code>启动项目后，对响应体内容进行修改</p><p>在 Chrome 中表现正常，二次请求都是<code>200</code></p><p><img src="/assets/Ko7ThvdfuknFwMO.6cd56405.gif" alt="Chrome 缓存问题"></p><p>在 IE 中表现异常，这是因为 IE 默认走了缓存，我们可以看到第二次网络请求状态码为<code>304</code></p><p><img src="/assets/lEScpMJILbqiQYa.69018828.gif" alt="IE 缓存问题"></p><p>怎么解决 IE 浏览器缓存的问题呢？</p><p>处理很简单，只需将代码添加一个时间戳参数</p><p>因为时间戳几乎是时刻变化的，这样每次请求参数都会不一样，浏览器就会将其当成不同的请求</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://127.0.0.1:8000/server-ie?t&#39;</span> <span class="token operator">+</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>再来看下 IE 中的效果</p><p><img src="/assets/uQJfCmLZqkdrjgH.c3b16118.gif" alt="IE 缓存问题2"></p><h2 id="_12、请求超时与网络异常" tabindex="-1"><a class="header-anchor" href="#_12、请求超时与网络异常" aria-hidden="true">#</a> 12、请求超时与网络异常</h2><hr><h3 id="请求超时" tabindex="-1"><a class="header-anchor" href="#请求超时" aria-hidden="true">#</a> 请求超时</h3><p>修改<code>server.js</code>，设置延时发送响应报文</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello Ajax&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>效果</strong></p><p><img src="/assets/14sHfEKTB5pignD.5d6ee38c.gif" alt="请求超时"></p><p>我们这里为模拟超时而设置的延时时间较短，但是一般情况下，请求时间如果过长的话必须要进行处理</p><p>如果请求超时，则应该给出相应的超时提醒，一方面可以减少网络带宽资源的占用，一方面也可以提升用户体验</p><p><strong>那么要怎么设置超时的相关信息呢？</strong></p><ul><li>超时时间：<code>timeout</code></li><li>超时回调：<code>ontimeout</code></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 设置超时时间</span>
xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token comment">// 设置超时回调</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;请求超时！&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>效果</strong></p><p><img src="/assets/qKmUfPO4D91526n.d7339b14.gif" alt="请求超时2"></p><p>可以看到，当请求时间超过我们设置的<code>timeout</code>时长后，就会调用超时回调函数，并且还能看到网络请求状态变成了<code>(canceled)</code></p><h3 id="网络异常" tabindex="-1"><a class="header-anchor" href="#网络异常" aria-hidden="true">#</a> 网络异常</h3><p>当然除了服务器响应时间较长导致<code>请求超时</code>之外，还有可能因为我们的网速或者其他网络问题导致请求失败</p><p>我们可以添加一个<code>onerror</code>回调函数，对此类问题进行处理</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 设置网络异常回调</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;网络异常&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们将 Chrome 的网络控制台状态切换为<code>offline</code>，模拟断网环境下的请求</p><p><img src="/assets/ZEpJtIKxuwP21zd.efb13755.gif" alt="网络异常"></p><p>可以看到，这里提示了<code>网络异常</code>，也就是走了<code>onerror</code>的回调函数，且状态变成了<code>(failed) net::ERR_INTERNET_DISCONNECTED</code></p><h2 id="_13、手动取消请求" tabindex="-1"><a class="header-anchor" href="#_13、手动取消请求" aria-hidden="true">#</a> 13、手动取消请求</h2><hr><ul><li><code>abort()</code>方法：手动取消请求</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> btn1 <span class="token operator">=</span> btns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> btn2 <span class="token operator">=</span> btns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
btn1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://127.0.0.1:8000/server-timeout&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>效果</strong></p><p><img src="/assets/JIe9By1kjiKXwdh.6b7642c3.gif" alt="主动取消请求"></p><h2 id="_14、请求重复发送" tabindex="-1"><a class="header-anchor" href="#_14、请求重复发送" aria-hidden="true">#</a> 14、请求重复发送</h2><hr><p>如果服务器响应相对比较慢，而用户因为得不到响应而频繁地点击按钮。那么，浏览器短时间内会向服务器发起大量重复的请求，服务器就要对这些请求进行频繁的处理，服务器端的压力就会非常的大</p><p><strong>那么有什么办法可以解决请求重复发送的问题呢？</strong></p><p>思路：发送一个请求之前，查询之前是否有正在进行处理的相同请求，如果有，则取消之前的相同请求，发送一个新的请求。这样保证同一个请求同一时间内只会有一个，这样服务器的压力就会小一些</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token comment">// 标识是否正在发送 AJAX 请求</span>
<span class="token keyword">let</span> isSending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
btns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 若上一个请求尚未完成，则手动取消请求</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>isSending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://127.0.0.1:8000/servertimeout&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 请求响应完毕后，修改变量标识</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            isSending <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>效果</strong></p><p><img src="/assets/YMNVw9HSB2o5yTG.809cee1d.gif" alt="请求重复发送"></p><p>可以看出，如果频繁的点击按钮，发起同一个请求，则每次发起一个新的请求之前，都会取消上一个请求的发送</p><h2 id="_15、jquery-发送-ajax-请求" tabindex="-1"><a class="header-anchor" href="#_15、jquery-发送-ajax-请求" aria-hidden="true">#</a> 15、jQuery 发送 AJAX 请求</h2><hr><ul><li><p>jQuery 脚本</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>bootstrp 脚本</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>link href<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.0.2/css/bootstrap.css&quot;</span> rel<span class="token operator">=</span><span class="token string">&quot;stylesheet&quot;</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><h3 id="get-请求" tabindex="-1"><a class="header-anchor" href="#get-请求" aria-hidden="true">#</a> GET 请求</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>callback<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>url</code>：请求的 URL 地址</li><li><code>data</code>：请求携带的参数</li><li><code>callback</code>：载入成功时回调函数</li><li><code>type</code>：设置返回内容格式，xml，html，script，ison，text，_default</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>btns<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;http://127.0.0.1:8000/server-jquery&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> data<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object {name: &quot;Hello jquery&quot;}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/X83DRPyHbh7TBgm.8de4aa27.png" alt="image-20210912104245019"></p><h3 id="post请求" tabindex="-1"><a class="header-anchor" href="#post请求" aria-hidden="true">#</a> POST请求</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span><span class="token punctuation">[</span>data<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>callback<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>url</code>：请求的 URL 地址</li><li><code>data</code>：请求携带的参数</li><li><code>callback</code>：载入成功时回调函数</li><li><code>type</code>：设置返回内容格式，xml，html，script，ison，text，_default</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>btns<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;http://127.0.0.1:8000/server-jquery&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> data<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string {name: &quot;Hello jquery&quot;}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/PIOq1fl3ug5EGBH.e48145c5.png" alt="image-20210912104348613"></p><h3 id="通用方法" tabindex="-1"><a class="header-anchor" href="#通用方法" aria-hidden="true">#</a> 通用方法</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 请求地址</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;http://127.0.0.1:8000/server-jquery&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求参数</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">200</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求类型</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 响应体类型</span>
    <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 成功回调</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> data<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string {name: &quot;Hello jquery&quot;}  开启dataType后：object {name: &quot;Hello jquery&quot;}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 超时时间</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token comment">// 失败的回调</span>
    <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;出错了&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 头信息</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
        <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token number">400</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>error 回调</strong></p><p><img src="/assets/NaTZhmeVwQzLf3A.e1f9975d.gif" alt="jQuery 发送 AJAX 请求-通用方法"></p><p><strong>error 网络状态</strong></p><p><img src="data:image/png;base64,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" alt="image-20210912110951759"></p><p><strong>头信息</strong></p><p><img src="/assets/ORaxnZgz7b9UpIM.9cff74af.png" alt="image-20210912111541997"></p><h2 id="_16、axios-发送-ajax-请求" tabindex="-1"><a class="header-anchor" href="#_16、axios-发送-ajax-请求" aria-hidden="true">#</a> 16、axios 发送 AJAX 请求</h2><hr><ul><li>axios 官网：<a href="https://gitee.com/link?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Faxios" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/axios<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="get-请求-1" tabindex="-1"><a class="header-anchor" href="#get-请求-1" aria-hidden="true">#</a> GET 请求</h3><ul><li><code>axios#get(url[,config])</code></li><li>函数返回结果是一个<code>promise</code>对象，用<code>then</code>回调处理</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">&#39;http://127.0.0.1:8000/&#39;</span><span class="token punctuation">;</span>
axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;server-axios&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// 请求参数</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">200</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求头</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
        <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token number">400</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>请求参数、头信息</strong></p><p><img src="/assets/i9d74IwL8MpjVra.685b1653.png" alt="image-20210912113545338"></p><p><strong>控制台信息</strong></p><p><img src="/assets/SABZop4JWmGiOey.0b93d8c6.png" alt="image-20210912113738609"></p><h3 id="post-请求" tabindex="-1"><a class="header-anchor" href="#post-请求" aria-hidden="true">#</a> POST 请求</h3><ul><li><code>axios#post(url[,data[,config]])</code></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;server-axios&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// 请求体</span>
    <span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
    <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token number">600</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// 请求参数</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">200</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求头</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
        <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token number">400</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>头信息</strong></p><p><img src="/assets/AKPMu3o1rJD9Gai.0a7937d8.png" alt="image-20210912121249559"></p><p><strong>请求参数、请求体</strong></p><p><img src="data:image/png;base64,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" alt="image-20210912121337597"></p><h3 id="通用方法-1" tabindex="-1"><a class="header-anchor" href="#通用方法-1" aria-hidden="true">#</a> 通用方法</h3><ul><li><code>axios(url[, config])</code></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;server-axios&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求参数</span>
    <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">200</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求头</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
        <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token number">400</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求体</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
        <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token number">600</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 响应体类型</span>
    <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">&#39;json&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 200</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {content-length: &quot;22&quot;, content-type: &quot;text/html; charset=utf-8&quot;}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> response<span class="token punctuation">.</span>data<span class="token punctuation">,</span> response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object {name: &quot;Hello axios&quot;}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_17、fetch-函数-发送-ajax-请求" tabindex="-1"><a class="header-anchor" href="#_17、fetch-函数-发送-ajax-请求" aria-hidden="true">#</a> 17、fetch 函数 发送 AJAX 请求</h2><hr><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;http://127.0.0.1:8000/server-fetch?a=100&amp;b=100&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token comment">// 请求方法</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求头</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
        <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token number">400</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 请求体</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token string">&#39;e=500&amp;f=600&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>请求参数、头信息</strong></p><p><img src="/assets/4cObCykE7gBAipH.f3898646.png" alt="image-20210912123549428"></p><p><strong>请求体信息</strong></p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAABQCAMAAACK2N/TAAAA8FBMVEXV1dXV1crK1dXV1bPK1crK1bOy1dWy1crVx6Kgx9XVs4Wys8rKn4WDs9XKn2Kenp6eno6enn6Onp59np5gn8qejmuyhWKNjY2DhbOyhSSHh4dpjp6OfH6efFOAgIBghbOgY4V5eXp9fFOOaWuDY6JRfJ5ycnOOaTugYyRpaY4ghbNra2xRaY59U1M4aY5eXmB9Uzs4aX59UyRXV1kgY6JSUlJQUVI4U35JSksgU35pOjtROmtpOiRCQ0VgIYWDISQ9PT07PD5gIWIgOms1NjhgISQzMzNRISQuLzEgIYU4ISQgIWInKCsgIVMgITsgISRifqevAAADv0lEQVR42u2afXPaRhDGD0iJUCodYBFHcambtCpUSUjr0hcaWpJQ4gIm+/2/TefZvcNCOJlEMU48sztjnaQ73f1u99k9/rChl7/R7TKjyIqsyJ8T+c3tMhWGIiuyIiuyIivyLUZ+e2Jhg0qTTvjb3mqvY3TVS7bNkT27HuSPYs78qoJsO+c3jTzAPO9a4r2rTkA7sfsQ14385NjZ7x6ZMiwx70qQJ9Z2frK9lQOCDzPLXPBq50V361ju3BzZAT61fZrY9pRnFOSMX0og8QFuvq+EfPGtEP+49fK8KxcWprQ7yBm/OWMd7CGPfI8dgJ7m3c45kJ3keqvNkVO8TFNJGK+Y+OFFQcs8YZ82R+1pJssVkOfd9pRGtu/CXRRGIf/QK399vmeXe9VginnXnl0pow/R8q9A/ruQfr3VNg9/ZqVMisie7A9xbxl5wLtwEWr/dWLPyKNLENm77SnP9/akYvo9Oj5+fpl+nH0c1K0Pd5BHviaArD0tpZ9MImKgzH7T7a0YOfPIUA68zAMqV4z/Hj66KFQMaJmXpc1j1gRfOJCZeHlA9MvUbWgfGXq6TOEBFYUBpQ24ZU1UFQbRn/8Wi5wH4wwf2Z20sZ1z0QzcxA0eC+lHXhdOXu2pIDul9V3WcXQqp99eXZbCDA/Jerb3FOtPWL++yMlmMGDeLSFjZN8XNlxH2+yQyTsvkMFgfvbpR8k7bPQxZ0u1k+LLQPaH0e1Cvj5i/b2syIqsyIqsyIqsyIqsyIqsyBQZY0wsN40ZEeXGmFRafiYa12WEt9yY2vDy9bplTLC4SWQHkwQLioIFje8MKa8NuY1C9Cyb8e4XspNlM6VxPSWMWrfCm0cGABMAEwTjr2YOGfAFQ4ffIzbJ3djkwZB93EvIOVwXmZjRcxMsls3YcZSQE3HouhVjj40Z0NetnTmvF5ljXk8pgYQhwUianCGjcHl3SFFw2phRLlKWgY3Zssk3KUVft4yBFlJKGj/cGSYhjev3W/HBkNmp0a7y1q1gkQentSFF8fLud80YG0hq92pD9n3Jy1FtCHmvW/dFPkmYNGbYwIGQkd0GTtp62akCWkCwl02oIQn+aaYUNR5ggCBfejlmIb9mLeSNWWJClwqH9HLZEsQ9JWJVhDwKt8smF7GrtJyEkn5QBbp9Th5Ky2Ub12MpXShyuUkxiMtWchUyHqXAxZwVkNVhi1xudkoGlCK7iJxO3EEBIQSnCHoJeVtzcJSkborwJk8//Y2hyIqsyIqsyIqsyIqsyFWR9X/xVRiKrMgfZv8Dct4HcTxT9HYAAAAASUVORK5CYII=" alt="image-20210912123648941"></p><p><strong>控制台信息</strong></p><p><img src="/assets/yjkLUdgsXmOar2p.477de2a0.png" alt="image-20210912123718296"></p><p>如果我们只想要响应体内容，可以修改<code>then</code>回调</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> response<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string {&quot;name&quot;:&quot;Hello fetch&quot;}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果明确响应体内容为 json 字符串，可以按如下修改，将会返回一个 object 对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> response<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object {&quot;name&quot;:&quot;Hello fetch&quot;}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_18、跨域问题" tabindex="-1"><a class="header-anchor" href="#_18、跨域问题" aria-hidden="true">#</a> 18、跨域问题</h2><hr><h3 id="同源策略" tabindex="-1"><a class="header-anchor" href="#同源策略" aria-hidden="true">#</a> 同源策略</h3><p>同源策略（Same-Origin Policy）最早由 Netscape 公司提出，是浏览器的一种安全策略</p><p>同源：协议、域名、端口号必须完全相同，<strong>违背同源策略就是跨域</strong></p><p><strong>server.js 代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/home&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 响应一个页面</span>
    response<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&#39;/11-同源策略.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/data&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;用户数据&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;服务已经启动，9000 端口监听中...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>js 代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 这里因为是满足同源策略的，所以url可以简写</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/data&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 用户数据</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="如何解决跨域" tabindex="-1"><a class="header-anchor" href="#如何解决跨域" aria-hidden="true">#</a> 如何解决跨域</h3><h4 id="jsonp" tabindex="-1"><a class="header-anchor" href="#jsonp" aria-hidden="true">#</a> JSONP</h4><h5 id="_1-jsonp是什么" tabindex="-1"><a class="header-anchor" href="#_1-jsonp是什么" aria-hidden="true">#</a> 1）JSONP是什么</h5><p>JSONP （JSON with Padding），是一个非官方的跨域解决方案，纯粹凭借程序员的聪明才智开发出来，只支持 get 请求</p><h5 id="_2-jsonp怎么工作的" tabindex="-1"><a class="header-anchor" href="#_2-jsonp怎么工作的" aria-hidden="true">#</a> 2）JSONP怎么工作的？</h5><p>在网页有一些标签天生具有跨域能力，比如：<code>img</code> <code>link</code> <code>iframe</code> <code>script</code></p><p>比如我们之前引入过，并没有报错，可以使用</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>JSONP 就是利用 script 标签的跨域能力来发送请求的</strong></p><p>我们在 HTML 里加入以下内容</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;result&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        result<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> data<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./js/app.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>app.js 代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;JSONP&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">handle</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们使用<code>live-server</code>服务启动项目后，可以获取到<code>app.js</code>对应的 HTTP 地址</p><p><img src="/assets/2KH6OdvBVEDNQWF.ec41fa38.png" alt="image-20210912134809316"></p><p>我们替换下<code>app.js</code>的 src 地址</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://127.0.0.1:5500/12-JSONP/js/app.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>我们是不是可以将这个<code>script</code>脚本的 src 地址看成是服务端的方法地址？</p><p>不就是跟之前引入的<code>jQuery</code>和<code>axios</code>的 src 地址类似么，既然如此我们当然可以在服务端编写一个路由规则</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&#39;/server-jsonp&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;hello jsonp&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>控制台报错</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Uncaught SyntaxError: Unexpected identifier
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>但是查看下网络响应体信息，实际上是获取到的</p><p><img src="/assets/uNJzF5hYjDnErVd.50defc57.png" alt="image-20210912135457155"></p><p>因为<code>script</code>标签需要的是一个 JS 脚本代码，而现在获取到的却是一串字符，是无法进行解析的</p><p>所以我们需要修改服务端响应内容</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;JSONP&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// end 方法不会有特殊响应头</span>
<span class="token comment">// 为了方便拼接，用模板字符串</span>
response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">handle(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回结果是一个函数调用</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这次内容正常呈现，查看控制台没有报错信息，而且请求内容是我们编写的一串 JS 代码</p><p><img src="/assets/hp7fJWaH8YCrZzL.91c11b7a.png" alt="image-20210912135827864"></p><h5 id="_3-jsonp的使用" tabindex="-1"><a class="header-anchor" href="#_3-jsonp的使用" aria-hidden="true">#</a> 3）JSONP的使用</h5><p><strong>HTML 代码</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">//声明handle函数</span>
    <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;input&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        input<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">&quot;solid 1px #f00&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//修改p标签的提示文本</span>
        <span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;p&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        p<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> data<span class="token punctuation">.</span>msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;input&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    input<span class="token punctuation">.</span><span class="token function-variable function">onblur</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> username <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token punctuation">;</span>
        <span class="token comment">// 1、创建一个 script 标签</span>
        <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;script&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2、设置 src 属性</span>
        script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">&#39;http://127.0.0.1:8000/check-username&#39;</span><span class="token punctuation">;</span>
        <span class="token comment">// 3、将 script 插入文档中</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>服务端代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&#39;/check-username&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">exist</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">&#39;用户名已存在&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">handle(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>效果</strong></p><p><img src="/assets/mgGrMCcnRJTYqZ8.c78b94bb.gif" alt="原生 jsonp 实践"></p><h5 id="_4-jquery-发送-jsonp-请求" tabindex="-1"><a class="header-anchor" href="#_4-jquery-发送-jsonp-请求" aria-hidden="true">#</a> 4）jQuery 发送 JSONP 请求</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$.getJSON(url,[data],[fn])
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>url</strong>：发送请求地址</li><li><strong>data</strong>：待发送 key/value 参数</li><li><strong>callback</strong>：载入成功时回调函数</li></ul><p><strong>HTML 代码</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>点击发送请求<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        $<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token string">&#39;http://127.0.0.1:8000/server-jsonp-jquery?callback=?&#39;</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;#result&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>服务端代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&#39;/server-jsonp-jquery&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">exist</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">&#39;用户名已存在&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>此时并没有任何输出，但是请求参数中自动生成了一个<code>callback</code>的参数</p><p><img src="data:image/png;base64,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" alt="image-20210912143440266"></p><p>因为我们现在是通过<code>live-server</code>服务的5500端口访问的<code>nodemon</code>服务的8000端口，也就是说现在是跨域访问</p><p>所以需要返回一个 JS 脚本代码，但是我们就需要一个字符串作为返回结果啊，怎么办呢？</p><p>按照<code>jsonp</code>原生代码思路，我们是一定要返回一个 JS 脚本代码的</p><p>那么<code>callback</code>参数就排上用场了，我们需要改造下服务端代码</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 接收callback参数</span>
<span class="token keyword">var</span> cb <span class="token operator">=</span> request<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callback<span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cb<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>效果</strong></p><p><img src="/assets/Qvq3z9sAGgmtoNB.8d4beace.gif" alt="jQuery 发送 JSONP 请求"></p><p>我们可以看到响应体内容已经自动获取了<code>callback</code>参数和服务端返回结果</p><h4 id="cors" tabindex="-1"><a class="header-anchor" href="#cors" aria-hidden="true">#</a> CORS</h4><ul><li>官网地址：<a href="https://gitee.com/link?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FCORS" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h5 id="_1-cors是什么" tabindex="-1"><a class="header-anchor" href="#_1-cors是什么" aria-hidden="true">#</a> 1）CORS是什么？</h5><p>CORS（Cross-Origin Resource Sharing），跨域资源共享。CORS 是官方的跨域解决方案，它的特点是不需要在客户端做任何特殊的操作，完全在服务器中进行处理，支持 get 和 post 请求。跨域资源共享标准新增了一组 HTTP 首部字段，允许服务器声明哪些源站通过浏览器有权限访问哪些资源</p><h5 id="_2-cors怎么工作的" tabindex="-1"><a class="header-anchor" href="#_2-cors怎么工作的" aria-hidden="true">#</a> 2）CORS怎么工作的？</h5><p>CORS 是通过设置一个响应头来告诉浏览器，该请求允许跨域，浏览器收到该响应以后就会对响应放行</p><h5 id="_3-cors的使用" tabindex="-1"><a class="header-anchor" href="#_3-cors的使用" aria-hidden="true">#</a> 3）CORS的使用</h5><p><strong>HTML 代码</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>点击发送请求<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">const</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;button&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#result&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://127.0.0.1:8000/server-cors&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>response<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>服务端代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&#39;/server-cors&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Hello cors&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>效果</strong></p><p><img src="data:image/png;base64,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" alt="image-20210912150140527"></p><p><img src="/assets/M6hu7dmLtYJwGU4.d008add4.png" alt="image-20210912145615091"></p><p>我们要想进行跨域请求，必须在服务端返回结果时设置允许跨域的响应头</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 设置响应头，允许跨域</span>
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Origin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;*&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>除此之外，还有一些 HTTP 响应首部字段</p><h5 id="_5-http-响应首部字段" tabindex="-1"><a class="header-anchor" href="#_5-http-响应首部字段" aria-hidden="true">#</a> 5）HTTP 响应首部字段</h5><table><thead><tr><th>HTTP 响应首部字段</th><th>作用</th></tr></thead><tbody><tr><td><code>Access-Control-Allow-Origin</code></td><td>指定了允许访问该资源的外域 URI</td></tr><tr><td><code>Access-Control-Expose-Headers</code></td><td>让服务器把允许浏览器访问的头放入白名单</td></tr><tr><td><code>Access-Control-Max-Age</code></td><td>指定了 preflight 请求的结果能够被缓存多久</td></tr><tr><td><code>Access-Control-Allow-Credentials</code></td><td>是否允许浏览器读取 response 的内容</td></tr><tr><td><code>Access-Control-Allow-Methods</code></td><td>指明了实际请求所允许使用的 HTTP 方法</td></tr><tr><td><code>Access-Control-Allow-Headers</code></td><td>指明了实际请求中允许携带的首部字段</td></tr></tbody></table><p>我们一般这么使用，允许跨域、带有自定义头部信息、任意方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Headers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-A1low-Method&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/Ragnarokoo/LearningNotes/edit/master/src/web/ajax/三句话让 AJAX 为我欲罢不能.md" rel="noopener noreferrer" target="_blank" aria-label="在【Github】上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在【Github】上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><!----></div><!----></footer><nav class="page-nav"><a href="/web/ajax/fetch%E3%80%81ajax%E3%80%81axios%E7%9A%84%E5%8C%BA%E5%88%AB.html" class="nav-link prev" aria-label="fetch、ajax、axios的区别"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->fetch、ajax、axios的区别</div></a><a href="/web/ajax/Axios%E5%85%A5%E9%97%A8%E4%B8%8E%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90.html" class="nav-link next" aria-label="Axios入门与源码分析"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">Axios入门与源码分析<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.9b10ba0a.js" defer></script>
  </body>
</html>
