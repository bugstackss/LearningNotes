<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.53" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://Ragnarokoo.github.io/LearningNotes/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html"><meta property="og:site_name" content="ğŸ“šå…¨æ ˆå¼€å‘å­¦ä¹ æŒ‡å—"><meta property="og:title" content="è®¡ç®—å±æ€§ ä¾¦å¬å™¨"><meta property="og:description" content="1.è®¡ç®—å±æ€§ æœ‰æ—¶æˆ‘ä»¬éœ€è¦ä¾èµ–äºå…¶ä»–çŠ¶æ€(æ™®é€šproxyå“åº”å¼æ•°æ®)çš„çŠ¶æ€(computedå“åº”å¼æ•°æ®)ï¼š åœ¨ Vue ä¸­ï¼Œè¿™æ˜¯ç”¨ç»„ä»¶è®¡ç®—å±æ€§å¤„ç†çš„ï¼Œä»¥ç›´æ¥åˆ›å»ºè®¡ç®—å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ computed å‡½æ•°ï¼šå®ƒæ¥å— getter å‡½æ•°å¹¶ä¸º getter è¿”å›çš„å€¼è¿”å›ä¸€ä¸ªä¸å¯å˜çš„å“åº”å¼ ref å¯¹è±¡ã€‚ 1.1 computedå‡½æ•° ä¸Vue2.xä¸­comp..."><meta property="og:type" content="article"><meta property="og:updated_time" content="2023-05-31T09:16:41.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="Vue"><meta property="article:tag" content="javascript"><meta property="article:tag" content="æ¸è¿›å¼æ¡†æ¶"><meta property="article:modified_time" content="2023-05-31T09:16:41.000Z"><link rel="icon" href="/site_logo.svg"><title>è®¡ç®—å±æ€§ ä¾¦å¬å™¨ | ğŸ“šå…¨æ ˆå¼€å‘å­¦ä¹ æŒ‡å—</title><meta name="description" content="1.è®¡ç®—å±æ€§ æœ‰æ—¶æˆ‘ä»¬éœ€è¦ä¾èµ–äºå…¶ä»–çŠ¶æ€(æ™®é€šproxyå“åº”å¼æ•°æ®)çš„çŠ¶æ€(computedå“åº”å¼æ•°æ®)ï¼š åœ¨ Vue ä¸­ï¼Œè¿™æ˜¯ç”¨ç»„ä»¶è®¡ç®—å±æ€§å¤„ç†çš„ï¼Œä»¥ç›´æ¥åˆ›å»ºè®¡ç®—å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ computed å‡½æ•°ï¼šå®ƒæ¥å— getter å‡½æ•°å¹¶ä¸º getter è¿”å›çš„å€¼è¿”å›ä¸€ä¸ªä¸å¯å˜çš„å“åº”å¼ ref å¯¹è±¡ã€‚ 1.1 computedå‡½æ•° ä¸Vue2.xä¸­comp...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style.bc8b6d7c.css" as="style" /><link rel="stylesheet" href="/assets/style.bc8b6d7c.css" />
    <link rel="modulepreload" href="/assets/app.9b10ba0a.js"><link rel="modulepreload" href="/assets/04 ã€è®¡ç®—å±æ€§ ä¾¦å¬å™¨ã€‘.html.b7253c84.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/04 ã€è®¡ç®—å±æ€§ ä¾¦å¬å™¨ã€‘.html.5b9aed81.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/site_logo.svg" alt="ğŸ“šå…¨æ ˆå¼€å‘å­¦ä¹ æŒ‡å—"><!----><span class="site-name hide-in-pad">ğŸ“šå…¨æ ˆå¼€å‘å­¦ä¹ æŒ‡å—</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/quicknav/" class="nav-link" aria-label="å¿«é€Ÿå¯¼èˆª"><span class="icon iconfont icon-navigation"></span>å¿«é€Ÿå¯¼èˆª<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/" class="nav-link" aria-label="åšå®¢ä¸»é¡µ"><span class="icon iconfont icon-blog"></span>åšå®¢ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/notes/" class="nav-link" aria-label="Javaå­¦ä¹ æ•™ç¨‹"><span class="icon iconfont icon-java"></span>Javaå­¦ä¹ æ•™ç¨‹<!----></a></div><div class="nav-item hide-in-mobile"><a href="/web/" class="nav-link active" aria-label="webå­¦ä¹ æ•™ç¨‹"><span class="icon iconfont icon-note"></span>webå­¦ä¹ æ•™ç¨‹<!----></a></div><div class="nav-item hide-in-mobile"><a href="/springcloud/" class="nav-link" aria-label="SpringCloudå­¦ä¹ æ•™ç¨‹"><span class="icon iconfont icon-cache"></span>SpringCloudå­¦ä¹ æ•™ç¨‹<!----></a></div><div class="nav-item hide-in-mobile"><a href="/distributed/" class="nav-link" aria-label="åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„"><span class="icon iconfont icon-read"></span>åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="èµ„æºå®åº“"><span class="title"><span class="icon iconfont icon-advance"></span>èµ„æºå®åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/resources/books/" class="nav-link" aria-label="ä¹¦ç±èµ„æº"><span class="icon iconfont icon-animation"></span>ä¹¦ç±èµ„æº<!----></a></li><li class="dropdown-item"><a href="/resources/videos/" class="nav-link" aria-label="å½±éŸ³èµ„æº"><span class="icon iconfont icon-play"></span>å½±éŸ³èµ„æº<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/Ragnarokoo/LearningNotes" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢æœ¬ç«™" autocomplete="off" spellcheck="false" value><!----></form><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-html"></span><span class="title">HTML&amp;CSS</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-javascript"></span><span class="title">æ·±å…¥å­¦ä¹ JavaScriptç³»åˆ—</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-ajax"></span><span class="title">RESTAPI&amp;AJAX</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-structure"></span><span class="title">Promiseä»å…¥é—¨åˆ°ç²¾é€š</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-jQuery"></span><span class="title">jQueryä»å…¥é—¨åˆ°ç²¾é€š</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-css"></span><span class="title">CSS é¢„å¤„ç†è¯­è¨€</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-css"></span><span class="title">Tailwind CSS</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-vue"></span><span class="title">Vue æ¸è¿›å¼æ¡†æ¶</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-vue"></span><span class="title">ã€Vue2ã€‘å­¦ä¹ ä¸“æ </span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/web/vue/vue2/01%20%E3%80%90Vue%E7%AE%80%E4%BB%8B%20%E5%88%9D%E8%AF%86Vue%20%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95%E5%92%8C%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="Vueç®€ä»‹ åˆè¯†Vue æ¨¡æ¿è¯­æ³•å’Œæ•°æ®ç»‘å®š"><!---->Vueç®€ä»‹ åˆè¯†Vue æ¨¡æ¿è¯­æ³•å’Œæ•°æ®ç»‘å®š<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/02%20%E3%80%90el%E5%92%8Cdata%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%99%E6%B3%95%20MVVM%E6%A8%A1%E5%9E%8B%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="elå’Œdataçš„ä¸¤ç§å†™æ³• MVVMæ¨¡å‹"><!---->elå’Œdataçš„ä¸¤ç§å†™æ³• MVVMæ¨¡å‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/03%20%E3%80%90%E6%95%B0%E6%8D%AE%E4%BB%A3%E7%90%86%20%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="æ•°æ®ä»£ç† äº‹ä»¶å¤„ç†"><!---->æ•°æ®ä»£ç† äº‹ä»¶å¤„ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%B1%9E%E6%80%A7%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="è®¡ç®—å±æ€§ ä¾¦å¬å±æ€§"><!---->è®¡ç®—å±æ€§ ä¾¦å¬å±æ€§<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/05%20%E3%80%90%E7%BB%91%E5%AE%9A%E6%A0%B7%E5%BC%8F%20%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%20%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="ç»‘å®šæ ·å¼ æ¡ä»¶æ¸²æŸ“ åˆ—è¡¨æ¸²æŸ“"><!---->ç»‘å®šæ ·å¼ æ¡ä»¶æ¸²æŸ“ åˆ—è¡¨æ¸²æŸ“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/06%20%E3%80%90Vue%E6%95%B0%E6%8D%AE%E7%9B%91%E8%A7%86%20v-model%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="Vueæ•°æ®ç›‘è§† v-modelåŒå‘ç»‘å®š"><!---->Vueæ•°æ®ç›‘è§† v-modelåŒå‘ç»‘å®š<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/07%20%E3%80%90%E5%86%85%E7%BD%AE%E6%8C%87%E4%BB%A4%20%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="å†…ç½®æŒ‡ä»¤ è‡ªå®šä¹‰æŒ‡ä»¤"><!---->å†…ç½®æŒ‡ä»¤ è‡ªå®šä¹‰æŒ‡ä»¤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/08%20%E3%80%90%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%20%E7%BB%84%E4%BB%B6%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="ç”Ÿå‘½å‘¨æœŸ ç»„ä»¶"><!---->ç”Ÿå‘½å‘¨æœŸ ç»„ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/09%20%E3%80%90CLI%20%E5%88%9D%E5%A7%8B%E5%8C%96%E8%84%9A%E6%89%8B%E6%9E%B6%20Vue%E9%9B%B6%E7%A2%8E%E7%9A%84%E4%B8%80%E4%BA%9B%E7%9F%A5%E8%AF%86%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="CLI åˆå§‹åŒ–è„šæ‰‹æ¶ Vueé›¶ç¢çš„ä¸€äº›çŸ¥è¯†"><!---->CLI åˆå§‹åŒ–è„šæ‰‹æ¶ Vueé›¶ç¢çš„ä¸€äº›çŸ¥è¯†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/10%20%E3%80%90%E7%BB%84%E4%BB%B6%E7%BC%96%E7%A0%81%E6%B5%81%E7%A8%8B%20%E7%BB%84%E4%BB%B6%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%20%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="ç»„ä»¶ç¼–ç æµç¨‹ ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶ å…¨å±€äº‹ä»¶æ€»çº¿"><!---->ç»„ä»¶ç¼–ç æµç¨‹ ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶ å…¨å±€äº‹ä»¶æ€»çº¿<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/11%20%E3%80%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="ç»„ä»¶é€šä¿¡"><!---->ç»„ä»¶é€šä¿¡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/12%20%E3%80%90nextTick%20%E8%BF%87%E6%B8%A1%E4%B8%8E%E5%8A%A8%E7%94%BB%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="nextTick è¿‡æ¸¡ä¸åŠ¨ç”»"><!---->nextTick è¿‡æ¸¡ä¸åŠ¨ç”»<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/13%20%E3%80%90%E4%BB%A3%E7%90%86%E9%85%8D%E7%BD%AE%20%E6%8F%92%E6%A7%BD%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="ä»£ç†é…ç½® æ’æ§½"><!---->ä»£ç†é…ç½® æ’æ§½<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/14%20%E3%80%90Vuex%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="Vuex"><!---->Vuex<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/15%20%E3%80%90Vue-Router%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="Vue-Router"><!---->Vue-Router<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue2/16%20%E3%80%90%E6%89%93%E5%8C%85%20%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="æ‰“åŒ… å›¾ç‰‡æ‡’åŠ è½½"><!---->æ‰“åŒ… å›¾ç‰‡æ‡’åŠ è½½<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-vue"></span><span class="title">ã€Vue3ã€‘å­¦ä¹ ä¸“æ </span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/web/vue/vue3/01%20%E3%80%90%E5%88%9B%E5%BB%BAvue3%E9%A1%B9%E7%9B%AE%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="åˆ›å»ºvue3é¡¹ç›®"><!---->åˆ›å»ºvue3é¡¹ç›®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/02%20%E3%80%90setup%20reactive%20ref%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="setup reactive ref"><!---->setup reactive ref<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/03%20%E3%80%90%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86%20ref%E5%92%8Creactive%E6%80%BB%E7%BB%93%20setup%E6%B3%A8%E6%84%8F%E7%82%B9%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="å“åº”å¼åŸç† refå’Œreactiveæ€»ç»“ setupæ³¨æ„ç‚¹"><!---->å“åº”å¼åŸç† refå’Œreactiveæ€»ç»“ setupæ³¨æ„ç‚¹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="è®¡ç®—å±æ€§ ä¾¦å¬å™¨"><!---->è®¡ç®—å±æ€§ ä¾¦å¬å™¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_1-è®¡ç®—å±æ€§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.è®¡ç®—å±æ€§"><!---->1.è®¡ç®—å±æ€§<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_1-1-computedå‡½æ•°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 computedå‡½æ•°"><!---->1.1 computedå‡½æ•°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_1-2-å…¶å®ƒä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 å…¶å®ƒä½¿ç”¨"><!---->1.2 å…¶å®ƒä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_1-3-è®¡ç®—å±æ€§vsæ–¹æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3 è®¡ç®—å±æ€§vsæ–¹æ³•"><!---->1.3 è®¡ç®—å±æ€§vsæ–¹æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-ä¾¦å¬å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.ä¾¦å¬å™¨"><!---->2.ä¾¦å¬å™¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-1-åŸºæœ¬ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 åŸºæœ¬ä½¿ç”¨"><!---->2.1 åŸºæœ¬ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-2-watch-å‡½æ•°æ€»ç»“" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 watch å‡½æ•°æ€»ç»“"><!---->2.2 watch å‡½æ•°æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-3-watcheffectå‡½æ•°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 watchEffectå‡½æ•°"><!---->2.3 watchEffectå‡½æ•°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-4-å›è°ƒçš„è§¦å‘æ—¶æœº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4 å›è°ƒçš„è§¦å‘æ—¶æœº"><!---->2.4 å›è°ƒçš„è§¦å‘æ—¶æœº<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-5-åœæ­¢ä¾¦å¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.5 åœæ­¢ä¾¦å¬"><!---->2.5 åœæ­¢ä¾¦å¬<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-6-æ¸…é™¤å‰¯ä½œç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.6 æ¸…é™¤å‰¯ä½œç”¨"><!---->2.6 æ¸…é™¤å‰¯ä½œç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/06%20%E3%80%90%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%20%E6%A8%A1%E6%9D%BF%E5%BC%95%E7%94%A8%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="ç”Ÿå‘½å‘¨æœŸ æ¨¡æ¿å¼•ç”¨"><!---->ç”Ÿå‘½å‘¨æœŸ æ¨¡æ¿å¼•ç”¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/07%20%E3%80%90%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6%20%E7%BB%84%E4%BB%B6%E6%B3%A8%E5%86%8C%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="åŠ¨æ€ç»„ä»¶ ç»„ä»¶æ³¨å†Œ"><!---->åŠ¨æ€ç»„ä»¶ ç»„ä»¶æ³¨å†Œ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/08%20%E3%80%90Props%20%E7%BB%84%E4%BB%B6%E4%BA%8B%E4%BB%B6%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="Props ç»„ä»¶äº‹ä»¶"><!---->Props ç»„ä»¶äº‹ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/09%20%E3%80%90Attributes%E7%BB%A7%E6%89%BF%20provide%E4%B8%8Einject%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="Attributesç»§æ‰¿ provideä¸inject"><!---->Attributesç»§æ‰¿ provideä¸inject<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/10%20%E3%80%90%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6%20%E7%BB%84%E5%90%88%E5%BC%8F%E5%87%BD%E6%95%B0(hooks)%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="å¼‚æ­¥ç»„ä»¶ ç»„åˆå¼å‡½æ•°(hooks)"><!---->å¼‚æ­¥ç»„ä»¶ ç»„åˆå¼å‡½æ•°(hooks)<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/11%20%E3%80%90Teleport%20CSS%E5%8A%9F%E8%83%BD%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="Teleport CSSåŠŸèƒ½"><!---->Teleport CSSåŠŸèƒ½<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/12%20%E3%80%90%E5%85%B6%E5%AE%83%E7%BB%84%E5%90%88%E5%BC%8FAPI%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="å…¶å®ƒç»„åˆå¼API"><!---->å…¶å®ƒç»„åˆå¼API<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/13%20%E3%80%90script%20setup%20%E6%80%BB%E7%BB%93%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="script setup æ€»ç»“"><!---->script setup æ€»ç»“<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/14%20%E3%80%90TS%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E%20keepAlive%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="TSç±»å‹å£°æ˜ keepAlive"><!---->TSç±»å‹å£°æ˜ keepAlive<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/15%20%E3%80%90Pinia%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="Pinia"><!---->Pinia<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/16%20%E3%80%90Router%204%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="Router 4"><!---->Router 4<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/web/vue/vue3/17%20%E3%80%90vue3%E8%87%AA%E5%8A%A8%E5%AF%BC%E5%85%A5%E9%85%8D%E7%BD%AE%E3%80%91.html" class="nav-link sidebar-link sidebar-page" aria-label="vue3è‡ªåŠ¨å¯¼å…¥é…ç½®"><!---->vue3è‡ªåŠ¨å¯¼å…¥é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-react"></span><span class="title">Facebook React</span><!----></p><ul class="sidebar-links"></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-typescript"></span><span class="title">æ·±å…¥æµ…å‡ºtypescript</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-es6"></span><span class="title">ECMAScript6è¯­æ³•ç³–ç³»åˆ—</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-view"></span><span class="title">å‰ç«¯æ„å»ºå·¥å…·</span><!----></p><ul class="sidebar-links"></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-nodeJS"></span><span class="title">æ·±å…¥æµ…å‡ºNodeJsç³»åˆ—</span><!----></p><ul class="sidebar-links"></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->è®¡ç®—å±æ€§ ä¾¦å¬å™¨</h1><div class="page-info"><span class="category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li><span class="category category1 clickable" role="navigation">Vue3</span></li></ul><meta property="articleSection" content="Vue3"></span><span aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li><span class="tag tag2 clickable" role="navigation">Vue</span></li><li><span class="tag tag4 clickable" role="navigation">javascript</span></li><li><span class="tag tag5 clickable" role="navigation">æ¸è¿›å¼æ¡†æ¶</span></li></ul><meta property="keywords" content="Vue,javascript,æ¸è¿›å¼æ¡†æ¶"></span><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 18 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT18M"></span><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://github.com/Ragnarokoo/" target="_blank" rel="noopener noreferrer">Ragnarok</a></span><span property="author" content="Ragnarok"></span></span><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-05-31T09:16:41.000Z"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_1-è®¡ç®—å±æ€§" class="router-link-active router-link-exact-active toc-link level2">1.è®¡ç®—å±æ€§</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_1-1-computedå‡½æ•°" class="router-link-active router-link-exact-active toc-link level3">1.1 computedå‡½æ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_1-2-å…¶å®ƒä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level3">1.2 å…¶å®ƒä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_1-3-è®¡ç®—å±æ€§vsæ–¹æ³•" class="router-link-active router-link-exact-active toc-link level3">1.3 è®¡ç®—å±æ€§vsæ–¹æ³•</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-ä¾¦å¬å™¨" class="router-link-active router-link-exact-active toc-link level2">2.ä¾¦å¬å™¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-1-åŸºæœ¬ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level3">2.1 åŸºæœ¬ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-2-watch-å‡½æ•°æ€»ç»“" class="router-link-active router-link-exact-active toc-link level3">2.2 watch å‡½æ•°æ€»ç»“</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-3-watcheffectå‡½æ•°" class="router-link-active router-link-exact-active toc-link level3">2.3 watchEffectå‡½æ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-4-å›è°ƒçš„è§¦å‘æ—¶æœº" class="router-link-active router-link-exact-active toc-link level3">2.4 å›è°ƒçš„è§¦å‘æ—¶æœº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-5-åœæ­¢ä¾¦å¬" class="router-link-active router-link-exact-active toc-link level3">2.5 åœæ­¢ä¾¦å¬</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/web/vue/vue3/04%20%E3%80%90%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%20%E4%BE%A6%E5%90%AC%E5%99%A8%E3%80%91.html#_2-6-æ¸…é™¤å‰¯ä½œç”¨" class="router-link-active router-link-exact-active toc-link level3">2.6 æ¸…é™¤å‰¯ä½œç”¨</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="_04-ã€è®¡ç®—å±æ€§-ä¾¦å¬å™¨ã€‘" tabindex="-1"><a class="header-anchor" href="#_04-ã€è®¡ç®—å±æ€§-ä¾¦å¬å™¨ã€‘" aria-hidden="true">#</a> 04 ã€è®¡ç®—å±æ€§ ä¾¦å¬å™¨ã€‘</h1><h2 id="_1-è®¡ç®—å±æ€§" tabindex="-1"><a class="header-anchor" href="#_1-è®¡ç®—å±æ€§" aria-hidden="true">#</a> 1.è®¡ç®—å±æ€§</h2><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦ä¾èµ–äºå…¶ä»–çŠ¶æ€(æ™®é€šproxyå“åº”å¼æ•°æ®)çš„çŠ¶æ€(computedå“åº”å¼æ•°æ®)ï¼š åœ¨ Vue ä¸­ï¼Œè¿™æ˜¯ç”¨ç»„ä»¶è®¡ç®—å±æ€§å¤„ç†çš„ï¼Œä»¥ç›´æ¥åˆ›å»ºè®¡ç®—å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ computed å‡½æ•°ï¼šå®ƒæ¥å— getter å‡½æ•°å¹¶ä¸º getter è¿”å›çš„å€¼è¿”å›ä¸€ä¸ªä¸å¯å˜çš„å“åº”å¼ ref å¯¹è±¡ã€‚</p><h3 id="_1-1-computedå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_1-1-computedå‡½æ•°" aria-hidden="true">#</a> 1.1 computedå‡½æ•°</h3><blockquote><p>ä¸Vue2.xä¸­computedé…ç½®åŠŸèƒ½ä¸€è‡´</p><p>å¯ä»¥ç›´æ¥å»çœ‹3.7.3å®Œæ•´å†™æ³•</p></blockquote><p>æ¨¡æ¿ä¸­çš„è¡¨è¾¾å¼è™½ç„¶æ–¹ä¾¿ï¼Œä½†ä¹Ÿåªèƒ½ç”¨æ¥åšç®€å•çš„æ“ä½œã€‚å¦‚æœåœ¨æ¨¡æ¿ä¸­å†™å¤ªå¤šé€»è¾‘ï¼Œä¼šè®©æ¨¡æ¿å˜å¾—è‡ƒè‚¿ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªåŒ…å«åµŒå¥—æ•°ç»„çš„å¯¹è±¡ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> author <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;John Doe&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">books</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;Vue 2 - Advanced Guide&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;Vue 3 - Basic Guide&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;Vue 4 - The Mystery&#39;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æƒ³æ ¹æ® <code>author</code> æ˜¯å¦å·²æœ‰ä¸€äº›ä¹¦ç±æ¥å±•ç¤ºä¸åŒçš„ä¿¡æ¯ï¼š</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Has published books:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ author.books.length &gt; 0 ? &#39;Yes&#39; : &#39;No&#39; }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œçš„æ¨¡æ¿çœ‹èµ·æ¥æœ‰äº›å¤æ‚ã€‚æˆ‘ä»¬å¿…é¡»è®¤çœŸçœ‹å¥½ä¸€ä¼šå„¿æ‰èƒ½æ˜ç™½å®ƒçš„è®¡ç®—ä¾èµ–äº <code>author.books</code>ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœåœ¨æ¨¡æ¿ä¸­éœ€è¦ä¸æ­¢ä¸€æ¬¡è¿™æ ·çš„è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä¸æƒ³å°†è¿™æ ·çš„ä»£ç åœ¨æ¨¡æ¿é‡Œé‡å¤å¥½å¤šéã€‚</p><p>å› æ­¤æˆ‘ä»¬æ¨èä½¿ç”¨<strong>è®¡ç®—å±æ€§</strong>æ¥æè¿°ä¾èµ–å“åº”å¼çŠ¶æ€çš„å¤æ‚é€»è¾‘ã€‚è¿™æ˜¯é‡æ„åçš„ç¤ºä¾‹ï¼š</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">const</span> author <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;John Doe&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">books</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;Vue 2 - Advanced Guide&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;Vue 3 - Basic Guide&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;Vue 4 - The Mystery&#39;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ä¸€ä¸ªè®¡ç®—å±æ€§ ref</span>
<span class="token keyword">const</span> publishedBooksMessage <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> author<span class="token punctuation">.</span>books<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&#39;Yes&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;No&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Has published books:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>{{ publishedBooksMessage }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><a href="https://sfc.vuejs.org/#eyJBcHAudnVlIjoiPHNjcmlwdCBzZXR1cD5cbmltcG9ydCB7IHJlYWN0aXZlLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSdcblxuY29uc3QgYXV0aG9yID0gcmVhY3RpdmUoe1xuICBuYW1lOiAnSm9obiBEb2UnLFxuICBib29rczogW1xuICAgICdWdWUgMiAtIEFkdmFuY2VkIEd1aWRlJyxcbiAgICAnVnVlIDMgLSBCYXNpYyBHdWlkZScsXG4gICAgJ1Z1ZSA0IC0gVGhlIE15c3RlcnknXG4gIF1cbn0pXG5cbi8vIGEgY29tcHV0ZWQgcmVmXG5jb25zdCBwdWJsaXNoZWRCb29rc01lc3NhZ2UgPSBjb21wdXRlZCgoKSA9PiB7XG4gIHJldHVybiBhdXRob3IuYm9va3MubGVuZ3RoID4gMCA/ICdZZXMnIDogJ05vJ1xufSlcbjwvc2NyaXB0PlxuXG48dGVtcGxhdGU+XG4gIDxwPkhhcyBwdWJsaXNoZWQgYm9va3M6PC9wPlxuICA8c3Bhbj57eyBwdWJsaXNoZWRCb29rc01lc3NhZ2UgfX08L3NwYW4+XG48L3RlbXBsYXRlPiIsImltcG9ydC1tYXAuanNvbiI6IntcbiAgXCJpbXBvcnRzXCI6IHtcbiAgICBcInZ1ZVwiOiBcImh0dHBzOi8vc2ZjLnZ1ZWpzLm9yZy92dWUucnVudGltZS5lc20tYnJvd3Nlci5qc1wiXG4gIH1cbn0ifQ==" target="_blank" rel="noopener noreferrer">åœ¨æ¼”ç»ƒåœºä¸­å°è¯•ä¸€ä¸‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªè®¡ç®—å±æ€§ <code>publishedBooksMessage</code>ã€‚<code>computed()</code> æ–¹æ³•æœŸæœ›æ¥æ”¶ä¸€ä¸ª getter å‡½æ•°ï¼Œè¿”å›å€¼ä¸ºä¸€ä¸ª<strong>è®¡ç®—å±æ€§ ref</strong>ã€‚å’Œå…¶ä»–ä¸€èˆ¬çš„ ref ç±»ä¼¼ï¼Œä½ å¯ä»¥é€šè¿‡ <code>publishedBooksMessage.value</code> è®¿é—®è®¡ç®—ç»“æœã€‚è®¡ç®—å±æ€§ ref ä¹Ÿä¼šåœ¨æ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…ï¼Œå› æ­¤åœ¨æ¨¡æ¿è¡¨è¾¾å¼ä¸­å¼•ç”¨æ—¶æ— éœ€æ·»åŠ  <code>.value</code>ã€‚</p><p>Vue çš„è®¡ç®—å±æ€§ä¼šè‡ªåŠ¨è¿½è¸ªå“åº”å¼ä¾èµ–ã€‚å®ƒä¼šæ£€æµ‹åˆ° <code>publishedBooksMessage</code> ä¾èµ–äº <code>author.books</code>ï¼Œæ‰€ä»¥å½“ <code>author.books</code> æ”¹å˜æ—¶ï¼Œä»»ä½•ä¾èµ–äº <code>publishedBooksMessage</code> çš„ç»‘å®šéƒ½ä¼šåŒæ—¶æ›´æ–°ã€‚</p><p>ä¹Ÿå¯å‚è€ƒï¼š<a href="https://staging-cn.vuejs.org/guide/typescript/composition-api.html#typing-computed" target="_blank" rel="noopener noreferrer">ä¸ºè®¡ç®—å±æ€§æ ‡æ³¨ç±»å‹<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_1-2-å…¶å®ƒä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_1-2-å…¶å®ƒä½¿ç”¨" aria-hidden="true">#</a> 1.2 å…¶å®ƒä½¿ç”¨</h3><blockquote><ul><li>æ¥å—ä¸€ä¸ªå…·æœ‰ <code>get</code> å’Œ <code>set</code> å‡½æ•°çš„å¯¹è±¡ï¼Œç”¨æ¥åˆ›å»ºå¯å†™çš„ ref å¯¹è±¡ã€‚</li><li>è¯¥æ¡ˆä¾‹åŠŸèƒ½å¸¸ç”¨äºçˆ¶ç»„ä»¶åŒå‘ç»‘å®šï¼Œåœ¨å­ç»„ä»¶ props ä¸ computedç»“åˆä½¿ç”¨å¾ˆæ–¹ä¾¿ï¼</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> test2_count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
 
<span class="token keyword">let</span> test2 <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// test2.value = 3 åˆ™ä¼šè§¦å‘ set()</span>
  <span class="token comment">// set/geté‡Œéƒ½ä¸èƒ½æ“ä½œtest2.valueï¼Œå¦åˆ™ä¼šæŠ¥é”™</span>
 
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> test2_count<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">&#39;å¯å˜çš„å“åº”å¼refå¯¹è±¡&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">val</span><span class="token operator">:</span>any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    test2_count<span class="token punctuation">.</span>value <span class="token operator">=</span> val <span class="token operator">-</span> <span class="token number">11</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
test2<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// test2_count.value = 1 - 11</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><blockquote><p><strong>è°ƒè¯• Computed</strong></p><p>computed å¯æ¥å—ä¸€ä¸ªå¸¦æœ‰ onTrack å’Œ onTrigger é€‰é¡¹çš„å¯¹è±¡ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼š</p><ul><li>onTrack ä¼šåœ¨æŸä¸ªå“åº”å¼ property æˆ– ref ä½œä¸ºä¾èµ–è¢«è¿½è¸ªæ—¶è°ƒç”¨ã€‚</li><li>onTrigger ä¼šåœ¨ä¾¦å¬å›è°ƒè¢«æŸä¸ªä¾èµ–çš„ä¿®æ”¹è§¦å‘æ—¶è°ƒç”¨ã€‚</li></ul><p>æ‰€æœ‰å›è°ƒéƒ½ä¼šæ”¶åˆ°ä¸€ä¸ª debugger äº‹ä»¶å‚æ•°ï¼Œå…¶ä¸­åŒ…å«äº†ä¸€äº›ä¾èµ–ç›¸å…³çš„ä¿¡æ¯ã€‚æ¨èåœ¨è¿™äº›å›è°ƒå†…æ”¾ç½®ä¸€ä¸ª debugger è¯­å¥ä»¥è°ƒè¯•ä¾èµ–ã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">147</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> countComputed <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token string">&#39;è®¡ç®—å±æ€§&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token function">onTrack</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å½“ count.value ä½œä¸ºä¾èµ–è¢«è¿½è¸ªæ—¶è§¦å‘ã€‚ç”¨äººè¯å°†å°±æ˜¯è¢«è®¿é—®çš„æ—¶å€™è§¦å‘</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;onTrack&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onTrigger</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å½“ count.value è¢«ä¿®æ”¹æ—¶è§¦å‘</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;onTrigger&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„ï¼šonTrack å’Œ onTrigger ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹ç”Ÿæ•ˆ ï¼ï¼</strong></p></blockquote><h3 id="_1-3-è®¡ç®—å±æ€§vsæ–¹æ³•" tabindex="-1"><a class="header-anchor" href="#_1-3-è®¡ç®—å±æ€§vsæ–¹æ³•" aria-hidden="true">#</a> 1.3 è®¡ç®—å±æ€§vsæ–¹æ³•</h3><p>ä½ å¯èƒ½æ³¨æ„åˆ°æˆ‘ä»¬åœ¨è¡¨è¾¾å¼ä¸­åƒè¿™æ ·è°ƒç”¨ä¸€ä¸ªå‡½æ•°ä¹Ÿä¼šè·å¾—å’Œè®¡ç®—å±æ€§ç›¸åŒçš„ç»“æœï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">calculateBooksMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token comment">// ç»„ä»¶ä¸­</span>
<span class="token keyword">function</span> <span class="token function">calculateBooksMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> author<span class="token punctuation">.</span>books<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">&#39;Yes&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;No&#39;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‹¥æˆ‘ä»¬å°†åŒæ ·çš„å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯è®¡ç®—å±æ€§ï¼Œä¸¤ç§æ–¹å¼åœ¨ç»“æœä¸Šç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„ï¼Œç„¶è€Œï¼Œä¸åŒä¹‹å¤„åœ¨äº<strong>è®¡ç®—å±æ€§å€¼ä¼šåŸºäºå…¶å“åº”å¼ä¾èµ–è¢«ç¼“å­˜</strong>ã€‚ä¸€ä¸ªè®¡ç®—å±æ€§ä»…ä¼šåœ¨å…¶å“åº”å¼ä¾èµ–æ›´æ–°æ—¶æ‰é‡æ–°è®¡ç®—ã€‚è¿™æ„å‘³ç€åªè¦ <code>author.books</code> ä¸æ”¹å˜ï¼Œæ— è®ºå¤šå°‘æ¬¡è®¿é—® <code>publishedBooksMessage</code> éƒ½ä¼šç«‹å³è¿”å›å…ˆå‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸ç”¨é‡å¤æ‰§è¡Œ getter å‡½æ•°ã€‚</p><p>è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆä¸‹é¢çš„è®¡ç®—å±æ€§æ°¸è¿œä¸ä¼šæ›´æ–°ï¼Œå› ä¸º <code>Date.now()</code> å¹¶ä¸æ˜¯ä¸€ä¸ªå“åº”å¼ä¾èµ–ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ–¹æ³•è°ƒç”¨<strong>æ€»æ˜¯</strong>ä¼šåœ¨é‡æ¸²æŸ“å‘ç”Ÿæ—¶å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚</p><p>ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜å‘¢ï¼Ÿæƒ³è±¡ä¸€ä¸‹æˆ‘ä»¬æœ‰ä¸€ä¸ªéå¸¸è€—æ€§èƒ½çš„è®¡ç®—å±æ€§ <code>list</code>ï¼Œéœ€è¦å¾ªç¯ä¸€ä¸ªå·¨å¤§çš„æ•°ç»„å¹¶åšè®¸å¤šè®¡ç®—é€»è¾‘ï¼Œå¹¶ä¸”å¯èƒ½ä¹Ÿæœ‰å…¶ä»–è®¡ç®—å±æ€§ä¾èµ–äº <code>list</code>ã€‚æ²¡æœ‰ç¼“å­˜çš„è¯ï¼Œæˆ‘ä»¬ä¼šé‡å¤æ‰§è¡Œéå¸¸å¤šæ¬¡ <code>list</code> çš„è®¡ç®—å‡½æ•°ï¼Œç„¶è€Œè¿™å®é™…ä¸Šæ²¡æœ‰å¿…è¦ï¼å¦‚æœä½ ç¡®å®šä¸éœ€è¦ç¼“å­˜ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨æ–¹æ³•è°ƒç”¨ã€‚</p><p><strong>å®˜ç½‘çš„å»ºè®®</strong></p><ol><li><p><strong>è®¡ç®—å‡½æ•°ä¸åº”æœ‰å‰¯ä½œç”¨<a href="https://staging-cn.vuejs.org/guide/essentials/computed.html#getters-should-be-side-effect-free" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong> è®¡ç®—å±æ€§çš„è®¡ç®—å‡½æ•°åº”åªåšè®¡ç®—è€Œæ²¡æœ‰ä»»ä½•å…¶ä»–çš„å‰¯ä½œç”¨ï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œè¯·åŠ¡å¿…ç‰¢è®°ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œ<strong>ä¸è¦åœ¨è®¡ç®—å‡½æ•°ä¸­åšå¼‚æ­¥è¯·æ±‚æˆ–è€…æ›´æ”¹ DOM</strong>ï¼ä¸€ä¸ªè®¡ç®—å±æ€§çš„å£°æ˜ä¸­æè¿°çš„æ˜¯å¦‚ä½•æ ¹æ®å…¶ä»–å€¼æ´¾ç”Ÿä¸€ä¸ªå€¼ã€‚å› æ­¤è®¡ç®—å‡½æ•°çš„èŒè´£åº”è¯¥ä»…ä¸ºè®¡ç®—å’Œè¿”å›è¯¥å€¼ã€‚åœ¨ä¹‹åçš„æŒ‡å¼•ä¸­æˆ‘ä»¬ä¼šè®¨è®ºå¦‚ä½•ä½¿ç”¨<a href="https://staging-cn.vuejs.org/guide/essentials/watchers.html" target="_blank" rel="noopener noreferrer">ç›‘å¬å™¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>æ ¹æ®å…¶ä»–å“åº”å¼çŠ¶æ€çš„å˜æ›´æ¥åˆ›å»ºå‰¯ä½œç”¨ã€‚</p></li><li><p><strong>é¿å…ç›´æ¥ä¿®æ”¹è®¡ç®—å±æ€§å€¼<a href="https://staging-cn.vuejs.org/guide/essentials/computed.html#avoid-mutating-computed-value" target="_blank" rel="noopener noreferrer">#<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></strong> ä»è®¡ç®—å±æ€§è¿”å›çš„å€¼æ˜¯æ´¾ç”ŸçŠ¶æ€ã€‚å¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ä¸ªâ€œä¸´æ—¶å¿«ç…§â€ï¼Œæ¯å½“æºçŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¿«ç…§ã€‚æ›´æ”¹å¿«ç…§æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› æ­¤è®¡ç®—å±æ€§çš„è¿”å›å€¼åº”è¯¥è¢«è§†ä¸ºåªè¯»çš„ï¼Œå¹¶ä¸”æ°¸è¿œä¸åº”è¯¥è¢«æ›´æ”¹â€”â€”åº”è¯¥æ›´æ–°å®ƒæ‰€ä¾èµ–çš„æºçŠ¶æ€ä»¥è§¦å‘æ–°çš„è®¡ç®—ã€‚</p></li></ol><h2 id="_2-ä¾¦å¬å™¨" tabindex="-1"><a class="header-anchor" href="#_2-ä¾¦å¬å™¨" aria-hidden="true">#</a> 2.ä¾¦å¬å™¨</h2><h3 id="_2-1-åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-1-åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a> 2.1 åŸºæœ¬ä½¿ç”¨</h3><p>åœ¨ç»„åˆå¼ API ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <a href="https://staging-cn.vuejs.org/api/reactivity-core.html#watch" target="_blank" rel="noopener noreferrer"><code>watch</code> å‡½æ•°<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>åœ¨æ¯æ¬¡å“åº”å¼çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘å›è°ƒå‡½æ•°</p><blockquote><p>ä¸Vue2.xä¸­watché…ç½®åŠŸèƒ½ä¸€è‡´</p></blockquote><p><strong>è¯¦ç»†ä¿¡æ¯</strong></p><p><code>watch()</code> é»˜è®¤æ˜¯æ‡’ä¾¦å¬çš„ï¼Œå³ä»…åœ¨ä¾¦å¬æºå‘ç”Ÿå˜åŒ–æ—¶æ‰æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚</p><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¾¦å¬å™¨çš„<strong>æº</strong>ã€‚è¿™ä¸ªæ¥æºå¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªå€¼</li><li>ä¸€ä¸ª ref</li><li>ä¸€ä¸ªå“åº”å¼å¯¹è±¡</li><li>...æˆ–æ˜¯ç”±ä»¥ä¸Šç±»å‹çš„å€¼ç»„æˆçš„æ•°ç»„</li></ul><p>ç¬¬äºŒä¸ªå‚æ•°æ˜¯åœ¨å‘ç”Ÿå˜åŒ–æ—¶è¦è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°ï¼šæ–°å€¼ã€æ—§å€¼ï¼Œä»¥åŠä¸€ä¸ªç”¨äºæ³¨å†Œå‰¯ä½œç”¨æ¸…ç†çš„å›è°ƒå‡½æ•°ã€‚è¯¥å›è°ƒå‡½æ•°ä¼šåœ¨å‰¯ä½œç”¨ä¸‹ä¸€æ¬¡é‡æ–°æ‰§è¡Œå‰è°ƒç”¨ï¼Œå¯ä»¥ç”¨æ¥æ¸…é™¤æ— æ•ˆçš„å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ç­‰å¾…ä¸­çš„å¼‚æ­¥è¯·æ±‚ã€‚</p><p>å½“ä¾¦å¬å¤šä¸ªæ¥æºæ—¶ï¼Œå›è°ƒå‡½æ•°æ¥å—ä¸¤ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«å¯¹åº”æ¥æºæ•°ç»„ä¸­çš„æ–°å€¼å’Œæ—§å€¼ã€‚</p><p>ç¬¬ä¸‰ä¸ªå¯é€‰çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ”¯æŒä»¥ä¸‹è¿™äº›é€‰é¡¹ï¼š</p><ul><li><strong><code>immediate</code></strong>ï¼šåœ¨ä¾¦å¬å™¨åˆ›å»ºæ—¶ç«‹å³è§¦å‘å›è°ƒã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ—§å€¼æ˜¯ <code>undefined</code>ã€‚</li><li><strong><code>deep</code></strong>ï¼šå¦‚æœæºæ˜¯å¯¹è±¡ï¼Œå¼ºåˆ¶æ·±åº¦éå†ï¼Œä»¥ä¾¿åœ¨æ·±å±‚çº§å˜æ›´æ—¶è§¦å‘å›è°ƒã€‚å‚è€ƒ<a href="https://staging-cn.vuejs.org/guide/essentials/watchers.html#deep-watchers" target="_blank" rel="noopener noreferrer">æ·±å±‚ä¾¦å¬å™¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä¸€èŠ‚ã€‚</li><li><strong><code>flush</code></strong>ï¼šè°ƒæ•´å›è°ƒå‡½æ•°çš„åˆ·æ–°æ—¶æœºã€‚å‚è€ƒ<a href="https://staging-cn.vuejs.org/guide/essentials/watchers.html#callback-flush-timing" target="_blank" rel="noopener noreferrer">å›è°ƒçš„åˆ·æ–°æ—¶æœº<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä¸€èŠ‚ã€‚</li><li><strong><code>onTrack / onTrigger</code></strong>ï¼šè°ƒè¯•ä¾¦å¬å™¨çš„ä¾èµ–ã€‚å‚è€ƒ<a href="https://staging-cn.vuejs.org/guide/extras/reactivity-in-depth.html#watcher-debugging" target="_blank" rel="noopener noreferrer">è°ƒè¯•ä¾¦å¬å™¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä¸€èŠ‚ã€‚</li></ul><blockquote><p><strong>ç¼“å†²å›è°ƒ</strong>ï¼šç¼“å†²å›è°ƒä¸ä»…å¯ä»¥æé«˜æ€§èƒ½ï¼Œè¿˜æœ‰åŠ©äºä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚åœ¨æ‰§è¡Œæ•°æ®æ›´æ–°çš„ä»£ç å®Œæˆä¹‹å‰ï¼Œä¾¦å¬å™¨ä¸ä¼šè¢«è§¦å‘ã€‚ç®€å•æ¥è¯´ï¼ŒåŒæ­¥ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¿®å®Œæ“ä½œæ‰§è¡Œå®Œæ¯•åæ‰ä¼šè§¦å‘å›è°ƒã€‚æ³¨æ„æ˜¯åŒæ­¥ï¼æ‰€ä»¥å¼‚æ­¥æ“ä½œçš„æ—¶å€™ï¼Œè¦æ³¨æ„å¤šæ¬¡è§¦å‘watchçš„é—®é¢˜ã€‚ï¼ˆæ‰€æœ‰åŒæ­¥æ“ä½œä¸º1æ¬¡ï¼Œå¼‚æ­¥æ“ä½œæœ‰å‡ æ¬¡å°±è§¦å‘å¤šå°‘æ¬¡ç›‘å¬ï¼ï¼ï¼‰</p></blockquote><p><code>watch</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸åŒå½¢å¼çš„â€œæ•°æ®æºâ€ï¼šå®ƒå¯ä»¥æ˜¯ä¸€ä¸ª ref (åŒ…æ‹¬è®¡ç®—å±æ€§)ã€ä¸€ä¸ªå“åº”å¼å¯¹è±¡ã€ä¸€ä¸ª getter å‡½æ•°ã€æˆ–å¤šä¸ªæ•°æ®æºç»„æˆçš„æ•°ç»„</p><p><strong>åŠŸèƒ½1ï¼šåœæ­¢ä¾¦å¬</strong></p><p>æ­¤å¤„ç›‘å¬çš„refå¯¹è±¡ï¼Œä¼ å…¥çš„æ˜¯refå¯¹è±¡åˆ™ä¼šè‡ªåŠ¨è§£åŒ… .valueï¼ˆåŸºäºæºç çš„è§£é‡Šï¼‰</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>ts<span class="token punctuation">&#39;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> watch<span class="token punctuation">,</span>ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">//! å…³äº watch() è¿”å›çš„ StopHandle å‡½æ•°ï¼Œè°ƒç”¨stop()å°†ä¼šåœæ­¢ä¾¦å¬ã€‚</span>
<span class="token keyword">let</span> stop <span class="token operator">=</span> <span class="token function">watch</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span>InvalidateCbRegistrator</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;watch : count-ï¼š&#39;</span> <span class="token operator">+</span> newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3333</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// stop() åœæ­¢ä¾¦å¬</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åŠŸèƒ½2ï¼šç›‘å¬ reactive() çš„å¯¹è±¡ï¼š</strong></p><p>ç›´æ¥ç›‘å¬reactiveå£°æ˜çš„proxyå¯¹è±¡ï¼Œæœ€ç»ˆvueä¼šé»˜è®¤èµ‹å€¼ä¸ºtrueï¼Œæ‰€ä»¥è‡ªå·±ä¼ ä»€ä¹ˆéƒ½æ²¡ç”¨ã€‚ï¼ˆåŸºäºæºç çš„è§£é‡Šï¼‰</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&#39;ts&#39;</span> setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> watch<span class="token punctuation">,</span>reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> proxy1 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>proxy1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;proxy1--&#39;</span><span class="token punctuation">,</span>newValue <span class="token punctuation">,</span> oldValue <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token string">&#39;å¹²å•¥å‹’ï¼Œå¯¹æˆ‘åšå•¥æˆ‘éƒ½ä¸ä»&#39;</span> <span class="token comment">//! åŸºäºä¸Šè¿°è§£é‡Šï¼Œæ­¤å¤„ä¼ ä»€ä¹ˆéƒ½æ˜¯æ— æ•ˆçš„ï¼Œæœ€ç»ˆä¼šè¢«é»˜è®¤è¦†ç›–ä¸ºtrue</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åŠŸèƒ½3ï¼šç›‘å¬åµŒå¥—å¯¹è±¡çš„æŸä¸ªå±æ€§ (ä¼ å…¥å‡½æ•°)</strong></p><p><em>å•ç‹¬ç›‘å¬åµŒå¥—çš„æŸä¸ªå±æ€§</em> åˆ™éœ€è¦ä¼ å…¥å‡½æ•°çš„è¿”å›å€¼</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&#39;ts&#39;</span> setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> watch<span class="token punctuation">,</span>reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token comment">// reactive  reféƒ½è¡Œï¼Œçœ‹äº† refs ç¯‡ç« ä½ ä¹ŸçŸ¥é“å…¶åŸç†</span>
<span class="token keyword">let</span> proxy1 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">t1</span><span class="token operator">:</span><span class="token string">&#39;åµŒå¥—æ•°æ®&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>proxy1<span class="token punctuation">.</span>t1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åŠŸèƒ½4ï¼šç›‘å¬å¤šä¸ªæºçš„å½¢å¼ (ä¼ å…¥æ•°ç»„)ã€‚</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&#39;ts&#39;</span> setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> watch<span class="token punctuation">,</span>reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> data1 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">t1</span><span class="token operator">:</span><span class="token string">&#39;t1åµŒå¥—æ•°æ®&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token keyword">let</span> data2 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">t2</span><span class="token operator">:</span><span class="token string">&#39;t2åµŒå¥—æ•°æ®&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>data1<span class="token punctuation">,</span>data2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œä½ ä¸èƒ½ç›´æ¥ä¾¦å¬å“åº”å¼å¯¹è±¡çš„å±æ€§å€¼ï¼Œä¾‹å¦‚:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// é”™è¯¯ï¼Œå› ä¸º watch() å¾—åˆ°çš„å‚æ•°æ˜¯ä¸€ä¸ª number</span>
<span class="token function">watch</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">count is: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œéœ€è¦ç”¨ä¸€ä¸ªè¿”å›è¯¥å±æ€§çš„ getter å‡½æ•°ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// æä¾›ä¸€ä¸ª getter å‡½æ•°</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> obj<span class="token punctuation">.</span>count<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">count is: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åŠŸèƒ½5ï¼šdeepçš„ä½¿ç”¨ï¼š</strong></p><p>ç›´æ¥ç»™ <code>watch()</code> ä¼ å…¥ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¼šéšå¼åœ°åˆ›å»ºä¸€ä¸ªæ·±å±‚ä¾¦å¬å™¨â€”â€”è¯¥å›è°ƒå‡½æ•°åœ¨æ‰€æœ‰åµŒå¥—çš„å˜æ›´æ—¶éƒ½ä¼šè¢«è§¦å‘ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">watch</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// åœ¨åµŒå¥—çš„å±æ€§å˜æ›´æ—¶è§¦å‘</span>
  <span class="token comment">// æ³¨æ„ï¼š`newValue` æ­¤å¤„å’Œ `oldValue` æ˜¯ç›¸ç­‰çš„</span>
  <span class="token comment">// å› ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

obj<span class="token punctuation">.</span>count<span class="token operator">++</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸€ä¸ªè¿”å›å“åº”å¼å¯¹è±¡çš„ getter å‡½æ•°ï¼Œåªæœ‰åœ¨è¿”å›ä¸åŒçš„å¯¹è±¡æ—¶ï¼Œæ‰ä¼šè§¦å‘å›è°ƒï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>someObject<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä»…å½“ state.someObject è¢«æ›¿æ¢æ—¶è§¦å‘</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ ä¹Ÿå¯ä»¥ç»™ä¸Šé¢è¿™ä¸ªä¾‹å­æ˜¾å¼åœ°åŠ ä¸Š <code>deep</code> é€‰é¡¹ï¼Œå¼ºåˆ¶è½¬æˆæ·±å±‚ä¾¦å¬å™¨ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>someObject<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ³¨æ„ï¼š`newValue` æ­¤å¤„å’Œ `oldValue` æ˜¯ç›¸ç­‰çš„</span>
    <span class="token comment">// *é™¤é* state.someObject è¢«æ•´ä¸ªæ›¿æ¢äº†</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><strong>è°¨æ…ä½¿ç”¨</strong></p><p>æ·±åº¦ä¾¦å¬éœ€è¦éå†è¢«ä¾¦å¬å¯¹è±¡ä¸­çš„æ‰€æœ‰åµŒå¥—çš„å±æ€§ï¼Œå½“ç”¨äºå¤§å‹æ•°æ®ç»“æ„æ—¶ï¼Œå¼€é”€å¾ˆå¤§ã€‚å› æ­¤è¯·åªåœ¨å¿…è¦æ—¶æ‰ä½¿ç”¨å®ƒï¼Œå¹¶ä¸”è¦ç•™æ„æ€§èƒ½ã€‚</p></blockquote><p><strong>åŠŸèƒ½6ï¼šç¬¬ä¸‰ä¸ªå‚æ•°çš„3ç§å½¢å¼ï¼š</strong></p><ol><li>pre æ¨¡å¼ä¸‹ï¼ŒæŒ‡å®šçš„å›è°ƒåœ¨æ¨¡æ¿æ¸²æŸ“å‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥ç«‹é©¬è·å–å¯¹åº”çš„å†…å®¹ï¼Œå°†ä¸ä¼šæ˜¯æœ€æ–°çš„ï¼ï¼</li><li>post æ¨¡å¼ä¸‹ï¼Œå°†å›è°ƒæ¨è¿Ÿåˆ°æ¨¡æ¿æ¸²æŸ“ä¹‹åçš„ï¼Œè¿™æ—¶å€™ç”¨$refè·å–å¯¹åº”å†…å®¹åˆ™ä¼šæ˜¯æœ€æ–°çš„ï¼Œç­‰äº pre æ¨¡å¼ä¸‹ç”¨ nextTick()</li><li>sync å°±ä¸å¤šè¯´äº†ï¼Œå›è°ƒæ”¹ä¸ºåŒæ­¥è°ƒç”¨ï¼Œå³å–æ¶ˆ &lt;ç¼“å†²å›è°ƒ&gt; è¿™ä¸ªåŠŸèƒ½</li><li>&#39;pre&#39; å’Œ &#39;post&#39; å›è°ƒä½¿ç”¨é˜Ÿåˆ—è¿›è¡Œç¼“å†²ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ&lt;åŒæ­¥&gt;å¤šæ¬¡ä¿®æ”¹åï¼Œåªè§¦å‘æœ€åä¸€æ¬¡ç›‘å¬å›è°ƒçš„åŸå› ã€‚</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&#39;ts&#39;</span> setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> watch<span class="token punctuation">,</span>reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> data1 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">t1</span><span class="token operator">:</span><span class="token string">&#39;t1åµŒå¥—æ•°æ®&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>data1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;data1--&#39;</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">flush</span><span class="token operator">:</span><span class="token string">&#39;post&#39;</span> <span class="token comment">// &#39;pre&#39; | &#39;post&#39; | &#39;sync&#39;  // é»˜è®¤å€¼æ˜¯&#39;pre&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åŠŸèƒ½6ï¼šcallbackçš„ç¬¬ä¸‰ä¸ªå‚æ•° onInvalidate &gt; æ³¨å†Œå¤±æ•ˆå›è°ƒ</strong> å…³äºè¿™ä¸ªçš„è§£é‡Šï¼Œè¯·ç§»æ­¥watchEffect()æ–‡ç« ï¼Œå†æ¥çœ‹è¿™ç¬¬å…­ç‚¹ï¼Œè¿™æ ·ç†è§£èµ·æ¥æœ€ä½³ï¼</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&#39;ts&#39;</span> setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> watch<span class="token punctuation">,</span>reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> data1 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">t1</span><span class="token operator">:</span><span class="token string">&#39;t1åµŒå¥—æ•°æ®&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> stop <span class="token operator">=</span> <span class="token function">watch</span><span class="token punctuation">(</span>data1<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span> oldValue<span class="token punctuation">,</span>onInvalidate</span> <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">onInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æ‰§è¡Œäº†&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
data1<span class="token punctuation">.</span>t1 <span class="token operator">=</span> <span class="token number">1</span>
<span class="token function">settimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> data1<span class="token punctuation">.</span>t1 <span class="token operator">=</span> <span class="token number">321</span><span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3333</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// stop() åœæ­¢ä¾¦å¬</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥æ³¨å†Œå›è°ƒçš„è§¦å‘æœºåˆ¶ï¼š</p><ul><li>å‰¯ä½œç”¨å³å°†é‡æ–°æ‰§è¡Œæ—¶ï¼ˆç¬¬ä¸€æ¬¡ä¸æ‰§è¡Œï¼‰</li><li>ä¾¦å¬å™¨è¢«åœæ­¢ (å¦‚æœåœ¨ setup() æˆ–ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸­ä½¿ç”¨äº† watchEffectï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ä¼šè‡ªåŠ¨åœæ­¢ä¾¦å¬ã€‚)</li></ul><p>ä¸ watchEffect å…±äº«çš„è¡Œä¸º</p><p>watch ä¸ watchEffectå…±äº«åœæ­¢ä¾¦å¬ï¼Œæ¸…é™¤å‰¯ä½œç”¨ (ç›¸åº”åœ° onInvalidate ä¼šä½œä¸ºå›è°ƒçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥)ã€å‰¯ä½œç”¨åˆ·æ–°æ—¶æœºå’Œä¾¦å¬å™¨è°ƒè¯•è¡Œä¸ºã€‚</p><p><strong>ç‰¹æ€§7ï¼š</strong></p><p>ç»„ä»¶åˆ›å»ºæ—¶çš„ç”Ÿå‘½å‘¨æœŸé‡ŒåŒæ­¥æ‰§è¡Œçš„ä¾¦å¬ä¼šè¢«æ”¶é›†ï¼Œç»„ä»¶é”€æ¯æ—¶ä¼šè‡ªåŠ¨é”€æ¯ä¾¦å¬å™¨ã€‚ ç»„ä»¶åˆ›å»ºå®Œåçš„å†åˆ›å»ºçš„ä¾¦å¬å™¨ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨é”€æ¯ï¼Œ</p><h3 id="_2-2-watch-å‡½æ•°æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#_2-2-watch-å‡½æ•°æ€»ç»“" aria-hidden="true">#</a> 2.2 watch å‡½æ•°æ€»ç»“</h3><ul><li><p>ä¸¤ä¸ªå°â€œå‘â€ï¼š</p><ul><li>ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®æ—¶ï¼šoldValueæ— æ³•æ­£ç¡®è·å–ã€é»˜è®¤å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§†ï¼ˆdeepé…ç½®å¤±æ•ˆï¼‰ã€‚</li><li>ç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­æŸä¸ªå±æ€§æ—¶ï¼šdeepé…ç½®æœ‰æ•ˆã€‚</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//æƒ…å†µä¸€ï¼šç›‘è§†refå®šä¹‰çš„å“åº”å¼æ•°æ®</span>
<span class="token function">watch</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;sumå˜åŒ–äº†&#39;</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//æƒ…å†µäºŒï¼šç›‘è§†å¤šä¸ªrefå®šä¹‰çš„å“åº”å¼æ•°æ®</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>sum<span class="token punctuation">,</span>msg<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;sumæˆ–msgå˜åŒ–äº†&#39;</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 

<span class="token comment">/* æƒ…å†µä¸‰ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®
   è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™æ— æ³•æ­£ç¡®è·å¾—oldValueï¼ï¼
   è‹¥watchç›‘è§†çš„æ˜¯reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ï¼Œåˆ™å¼ºåˆ¶å¼€å¯äº†æ·±åº¦ç›‘è§† 
*/</span>
<span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;personå˜åŒ–äº†&#39;</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//æ­¤å¤„çš„deepé…ç½®ä¸å†å¥æ•ˆ</span>

<span class="token comment">//æƒ…å†µå››ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸä¸ªå±æ€§</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>person<span class="token punctuation">.</span>job<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;personçš„jobå˜åŒ–äº†&#39;</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 

<span class="token comment">//æƒ…å†µäº”ï¼šç›‘è§†reactiveå®šä¹‰çš„å“åº”å¼æ•°æ®ä¸­çš„æŸäº›å±æ€§</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>person<span class="token punctuation">.</span>job<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>person<span class="token punctuation">.</span>name<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;personçš„jobå˜åŒ–äº†&#39;</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">immediate</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//ç‰¹æ®Šæƒ…å†µ</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>person<span class="token punctuation">.</span>job<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">newValue<span class="token punctuation">,</span>oldValue</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;personçš„jobå˜åŒ–äº†&#39;</span><span class="token punctuation">,</span>newValue<span class="token punctuation">,</span>oldValue<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">deep</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//æ­¤å¤„ç”±äºç›‘è§†çš„æ˜¯reactiveç´ å®šä¹‰çš„å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œæ‰€ä»¥deepé…ç½®æœ‰æ•ˆ</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><blockquote><p>å¦‚æœèƒ½ä½¿ç”¨computedå®ç°çš„å°±ä¸ç”¨watch</p></blockquote><h3 id="_2-3-watcheffectå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#_2-3-watcheffectå‡½æ•°" aria-hidden="true">#</a> 2.3 watchEffectå‡½æ•°</h3><p><strong>ä¸ºäº†æ ¹æ®å“åº”å¼çŠ¶æ€<em>è‡ªåŠ¨åº”ç”¨</em> å’Œ <em>é‡æ–°åº”ç”¨</em> å‰¯ä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ watchEffect å‡½æ•°ã€‚å®ƒç«‹å³æ‰§è¡Œä¼ å…¥çš„ä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨å…¶ä¾èµ–å˜æ›´æ—¶é‡æ–°è¿è¡Œè¯¥å‡½æ•°ã€‚</strong><strong>ä¼ å…¥çš„å‡½æ•°å°±æ˜¯ä¸€ä¸ª effectå‡½æ•° ï¼Œå®ƒä¼šæ ¹æ®ä¾¦å¬çš„å“åº”å¼æ•°æ®çš„å˜åŒ–æ‰§è¡Œè¯¥å‡½æ•°ã€‚</strong></p><ul><li><p>watchçš„å¥—è·¯æ˜¯ï¼šæ—¢è¦æŒ‡æ˜ç›‘è§†çš„å±æ€§ï¼Œä¹Ÿè¦æŒ‡æ˜ç›‘è§†çš„å›è°ƒã€‚</p></li><li><p>watchEffectçš„å¥—è·¯æ˜¯ï¼šä¸ç”¨æŒ‡æ˜ç›‘è§†å“ªä¸ªå±æ€§ï¼Œç›‘è§†çš„å›è°ƒä¸­ç”¨åˆ°å“ªä¸ªå±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªä¸ªå±æ€§ï¼Œå¹¶ä¸”åˆå§‹å°±ä¼šæ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°ã€‚</p></li><li><p>watchEffectæœ‰ç‚¹åƒcomputedï¼š</p><ul><li>ä½†computedæ³¨é‡çš„è®¡ç®—å‡ºæ¥çš„å€¼ï¼ˆå›è°ƒå‡½æ•°çš„è¿”å›å€¼ï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦å†™è¿”å›å€¼ã€‚</li><li>è€ŒwatchEffectæ›´æ³¨é‡çš„æ˜¯è¿‡ç¨‹ï¼ˆå›è°ƒå‡½æ•°çš„å‡½æ•°ä½“ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å†™è¿”å›å€¼ã€‚</li></ul></li><li><p>ç«‹å³æ‰§è¡Œä¼ å…¥çš„ä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨å…¶ä¾èµ–å˜æ›´æ—¶é‡æ–°è¿è¡Œè¯¥å‡½æ•°ã€‚</p></li></ul><p>æ³¨æ„ï¼Œå“åº”å¼æ•°æ®å¿…é¡»è¦è§¦å‘getæ‰èƒ½åŠ«æŒå¯¹åº”çš„å†…å®¹ä¸ºè¯¥å‰¯ä½œç”¨å‡½æ•°çš„ä¾èµ–ã€‚</p><ul><li>watchEffect æ¥æ”¶2ä¸ªå‚æ•° ï¼Œå¹¶ä¸”æœ‰è¿”å›ä¸€ä¸ª StopHandle å‡½æ•°ç”¨æ¥åœæ­¢ä¾¦å¬ã€‚ <ul><li>1ã€ç¬¬ä¸€ä¸ªå‚æ•°ï¼šï¼ˆå¿…ä¼ ï¼‰ effect å‡½æ•°ï¼Œæ”¶é›†ä¾èµ–ï¼Œå¹¶ä¸”ç»„ä»¶åˆå§‹åŒ–æ—¶ç«‹å³æ‰§è¡Œä¸€æ¬¡; å¹¶ä¸” effect å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ª onInvalidate å‡½æ•°å‚æ•°ï¼Œè¯¥å‚æ•°æ‰§è¡Œå¹¶ä¼ å…¥ä¸€ä¸ª callback ï¼Œæ¯æ¬¡ç›‘å¬å›è°ƒæ‰§è¡Œå‰éƒ½ä¼šæ‰§è¡Œè¯¥ callbackã€‚</li><li>2ã€ç¬¬äºŒä¸ªå‚æ•°å¯¹è±¡ï¼ˆéå¿…ä¼ ï¼‰ï¼š flush ã€ onTrack ã€ onTrigger; flush è·Ÿ watch() $watch() watch:{} çš„flush å®Œå…¨ä¸€è‡´ã€‚åŒç†ä¹Ÿå…·å¤‡ &lt;ç¼“å†²å›è°ƒ&gt; onTrack ã€ onTrigger çœ‹ä»£ç å†™çš„æ³¨é‡Šè®²è§£ï¼</li></ul></li></ul><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>ts<span class="token punctuation">&#39;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> watchEffect<span class="token punctuation">,</span>ref<span class="token punctuation">,</span>computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> Cc <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token literal-property property">inObj</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">d1</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token keyword">const</span> stop <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">onInvalidate</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//! ç«‹å³æ‰§è¡Œä¼ å…¥çš„å›è°ƒå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼è¿½è¸ªå…¶æ‰€æœ‰ä¾èµ–ï¼Œå¹¶åœ¨ä¾èµ–å˜æ›´æ—¶é‡æ–°è¿è¡Œè¯¥å›è°ƒå‡½æ•°ã€‚</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Cc<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ³¨æ„ï¼Œå¦‚æœä¾èµ–æ˜¯ ref å’Œ computed å¯¹è±¡ï¼Œå¿…é¡»è¦.valueï¼Œå¦åˆ™å¹¶ä¸ä¼šè§†ä¸ºä¾èµ–</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åŒç†ï¼Œreactiveæ•°æ®ä¹Ÿåªä¼šä¾¦å¬è§¦å‘äº†getçš„property(å±æ€§)</span>
 
 
  <span class="token comment">//! æ³¨æ„é¦–æ¬¡æ‰§è¡Œå¹¶ä¸ä¼šæ‰§è¡ŒonInvalidate ï¼Œç¬¬äºŒæ¬¡å¼€å§‹æ‰ä¼šï¼</span>
  <span class="token function">onInvalidate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//! åœ¨å›è°ƒè§¦å‘å‰ä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶ä¸”stop()åœæ­¢ä¾¦å¬çš„æ—¶å€™ä¹Ÿä¼šè§¦å‘ä¸€æ¬¡ï¼</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;watchEffectçš„onInvalidate&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
 
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
  <span class="token literal-property property">flush</span><span class="token operator">:</span><span class="token string">&#39;pre&#39;</span><span class="token punctuation">,</span> <span class="token comment">// flush?: &#39;pre&#39; | &#39;post&#39; | &#39;sync&#39; // é»˜è®¤ï¼š&#39;pre&#39;</span>
  
  <span class="token comment">//! è·Ÿè¸ªä¹‹å‰ä¼šè§¦å‘è¯¥å‡½æ•°ï¼Œæ”¶é›†äº†å¤šå°‘ä¸ªä¾èµ–å°±è§¦å‘å¤šå°‘æ¬¡ï¼è¿”å›å¯¹åº”ä¾èµ–ä¿¡æ¯</span>
  <span class="token function">onTrack</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span><span class="token string">&#39;onTrackè§¦å‘&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
 
  <span class="token comment">//! è·Ÿä»–åå­—ä¸€æ ·ä¾èµ–æ›´æ”¹å°±è§¦å‘æ‰§è¡Œï¼Œè€Œä¸”æ˜¯åŒæ­¥çš„ï¼æ²¡æœ‰æ‰€è°“çš„ç¼“å†²å›è°ƒ</span>
  <span class="token function">onTrigger</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span><span class="token string">&#39;onTriggerè§¦å‘&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
 
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// åœæ­¢ä¾¦å¬ åˆ™è°ƒç”¨è¯¥è¿”å›å€¼å³å¯ </span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æç¤º</p><p><code>watchEffect</code> ä»…ä¼šåœ¨å…¶<strong>åŒæ­¥</strong>æ‰§è¡ŒæœŸé—´ï¼Œæ‰è¿½è¸ªä¾èµ–ã€‚åœ¨ä½¿ç”¨å¼‚æ­¥å›è°ƒæ—¶ï¼Œåªæœ‰åœ¨ç¬¬ä¸€ä¸ª <code>await</code> æ­£å¸¸å·¥ä½œå‰è®¿é—®åˆ°çš„å±æ€§æ‰ä¼šè¢«è¿½è¸ªã€‚</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå›è°ƒä¼šç«‹å³æ‰§è¡Œã€‚åœ¨æ‰§è¡ŒæœŸé—´ï¼Œå®ƒä¼šè‡ªåŠ¨è¿½è¸ª <code>url.value</code> ä½œä¸ºä¾èµ–ï¼ˆå’Œè®¡ç®—å±æ€§çš„è¡Œä¸ºç±»ä¼¼ï¼‰ã€‚æ¯å½“ <code>url.value</code> å˜åŒ–æ—¶ï¼Œå›è°ƒä¼šå†æ¬¡æ‰§è¡Œã€‚</p><p>å…³äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘è§‰å¾—<code>fetch</code>å‡½æ•°åº”è¯¥æ¯”<code>await</code>å…ˆæ‰§è¡Œï¼Œè¿™æ ·æ‰èƒ½æ»¡è¶³åœ¨ç¬¬ä¸€ä¸ª <code>await</code> æ­£å¸¸å·¥ä½œå‰è®¿é—®åˆ°çš„å±æ€§æ‰ä¼šè¢«è¿½è¸ªè¿™å¥è¯ã€‚</p></blockquote><h3 id="_2-4-å›è°ƒçš„è§¦å‘æ—¶æœº" tabindex="-1"><a class="header-anchor" href="#_2-4-å›è°ƒçš„è§¦å‘æ—¶æœº" aria-hidden="true">#</a> 2.4 å›è°ƒçš„è§¦å‘æ—¶æœº</h3><p>å½“ä½ æ›´æ”¹äº†å“åº”å¼çŠ¶æ€ï¼Œå®ƒå¯èƒ½ä¼šåŒæ—¶è§¦å‘ Vue ç»„ä»¶æ›´æ–°å’Œä¾¦å¬å™¨å›è°ƒã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·åˆ›å»ºçš„ä¾¦å¬å™¨å›è°ƒï¼Œéƒ½ä¼šåœ¨ Vue ç»„ä»¶æ›´æ–°<strong>ä¹‹å‰</strong>è¢«è°ƒç”¨ã€‚è¿™æ„å‘³ç€ä½ åœ¨ä¾¦å¬å™¨å›è°ƒä¸­è®¿é—®çš„ DOM å°†æ˜¯è¢« Vue æ›´æ–°ä¹‹å‰çš„çŠ¶æ€ã€‚</p><p><strong>å‰¯ä½œç”¨åˆ·æ–°æ—¶æœº flush ä¸€èˆ¬ä½¿ç”¨post</strong></p><table><thead><tr><th style="text-align:left;"></th><th style="text-align:left;">pre</th><th style="text-align:left;">sync</th><th style="text-align:left;">post</th></tr></thead><tbody><tr><td style="text-align:left;">æ›´æ–°æ—¶æœº</td><td style="text-align:left;">ç»„ä»¶<strong>æ›´æ–°å‰</strong>æ‰§è¡Œ</td><td style="text-align:left;">å¼ºåˆ¶æ•ˆæœå§‹ç»ˆåŒæ­¥è§¦å‘</td><td style="text-align:left;">ç»„ä»¶<strong>æ›´æ–°å</strong>æ‰§è¡Œ</td></tr></tbody></table><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">flush</span><span class="token operator">:</span><span class="token string">&#39;pre&#39;</span> <span class="token comment">// &#39;pre&#39; | &#39;post&#39; | &#39;sync&#39;  // é»˜è®¤å€¼æ˜¯&#39;pre&#39;</span>
      <span class="token comment">// pre æ¨¡å¼ä¸‹ï¼ŒæŒ‡å®šçš„å›è°ƒåœ¨æ¨¡æ¿æ¸²æŸ“å‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥ç«‹é©¬è·å–å¯¹åº”çš„å†…å®¹ï¼Œå°†ä¸ä¼šæ˜¯æœ€æ–°çš„ï¼ï¼</span>
      <span class="token comment">// post æ¨¡å¼ä¸‹ï¼Œå°†å›è°ƒæ¨è¿Ÿåˆ°æ¨¡æ¿æ¸²æŸ“ä¹‹åçš„ï¼Œè¿™æ—¶å€™ç”¨$refè·å–å¯¹åº”å†…å®¹åˆ™ä¼šæ˜¯æœ€æ–°çš„ï¼Œç­‰äº pre æ¨¡å¼ä¸‹ç”¨ nextTice()</span>
      <span class="token comment">// sync å°±ä¸å¤šè¯´äº†ï¼Œå›è°ƒæ”¹ä¸ºåŒæ­¥è°ƒç”¨ï¼Œå³å–æ¶ˆ &lt;ç¼“å†²å›è°ƒ&gt; è¿™ä¸ªåŠŸèƒ½</span>
      <span class="token comment">// &#39;pre&#39; å’Œ &#39;post&#39; å›è°ƒä½¿ç”¨é˜Ÿåˆ—è¿›è¡Œç¼“å†²ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ&lt;åŒæ­¥&gt;å¤šæ¬¡ä¿®æ”¹åï¼Œåªè§¦å‘æœ€åä¸€æ¬¡ç›‘å¬å›è°ƒçš„åŸå› ã€‚</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœæƒ³åœ¨ä¾¦å¬å™¨å›è°ƒä¸­èƒ½è®¿é—®è¢« Vue æ›´æ–°<strong>ä¹‹å</strong>çš„DOMï¼Œä½ éœ€è¦æŒ‡æ˜ <code>flush: &#39;post&#39;</code> é€‰é¡¹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">watch</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">flush</span><span class="token operator">:</span> <span class="token string">&#39;post&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">flush</span><span class="token operator">:</span> <span class="token string">&#39;post&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åç½®åˆ·æ–°çš„ <code>watchEffect()</code> æœ‰ä¸ªæ›´æ–¹ä¾¿çš„åˆ«å <code>watchPostEffect()</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> watchPostEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token function">watchPostEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* åœ¨ Vue æ›´æ–°åæ‰§è¡Œ */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p><code>watchPostEffect</code> v3.2+</p><p><code>watchEffect</code> çš„åˆ«åï¼Œå›ºå®š <code>flush: &#39;post&#39;</code> é€‰é¡¹ã€‚</p><p><code>watchSyncEffect</code> v3.2+</p><p><code>watchEffect</code> çš„åˆ«åï¼Œå›ºå®š <code>flush: &#39;sync&#39;</code> é€‰é¡¹ã€‚</p><p>watchSyncEffect ä¸ºä¾‹ï¼Œç®€å•è®²å°±æ˜¯é™¤äº† flush å‚æ•°å›ºå®šä¸º &#39;sync&#39; ï¼Œå…¶ä»–æ‰€æœ‰åŠŸèƒ½è·Ÿ watchEffect ä¸€æ ·ã€‚</p></blockquote><p><strong>onTrigger å¯ä»¥å¸®åŠ©æˆ‘ä»¬è°ƒè¯• watchEffect</strong></p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> watchEffect<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> message2 <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
 <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span>oninvalidate<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//console.log(&#39;message&#39;, message.value);</span>
    <span class="token function">oninvalidate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
 
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;message2&#39;</span><span class="token punctuation">,</span> message2<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    flush<span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">//! è·Ÿä»–åå­—ä¸€æ ·ä¾èµ–æ›´æ”¹å°±è§¦å‘æ‰§è¡Œï¼Œè€Œä¸”æ˜¯åŒæ­¥çš„ï¼æ²¡æœ‰æ‰€è°“çš„ç¼“å†²å›è°ƒ</span>
   <span class="token function">onTrigger</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">,</span><span class="token string">&#39;onTriggerè§¦å‘&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-5-åœæ­¢ä¾¦å¬" tabindex="-1"><a class="header-anchor" href="#_2-5-åœæ­¢ä¾¦å¬" aria-hidden="true">#</a> 2.5 åœæ­¢ä¾¦å¬</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// è¿”å›å€¼æ˜¯ä¸€ä¸ªç”¨æ¥åœæ­¢è¯¥å‰¯ä½œç”¨çš„å‡½æ•°ã€‚</span>

<span class="token keyword">const</span> stop <span class="token operator">=</span> <span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
 
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// åœæ­¢ä¾¦å¬ åˆ™è°ƒç”¨è¯¥è¿”å›å€¼å³å¯ </span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-6-æ¸…é™¤å‰¯ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_2-6-æ¸…é™¤å‰¯ä½œç”¨" aria-hidden="true">#</a> 2.6 æ¸…é™¤å‰¯ä½œç”¨</h3><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä½ ç»†å¿ƒçš„è¯ä¼šæ³¨æ„åˆ°å‰¯ä½œç”¨å‡½æ•°æœ‰ <code>onInvalidate</code> è¿™ä¹ˆä¸ªå‡½æ•°å‚æ•°ï¼</p><p>æœ‰æ—¶å‰¯ä½œç”¨å‡½æ•°å†…ä¼šæ‰§è¡Œä¸€äº›å¼‚æ­¥çš„å‡½æ•°ï¼Œè¿™äº›å¼‚æ­¥å“åº”éœ€è¦åœ¨å…¶å¤±æ•ˆæ—¶æ¸…é™¤ (å³å®Œæˆä¹‹å‰çŠ¶æ€å·²æ”¹å˜äº†) ã€‚æ‰€ä»¥ä¾¦å¬å‰¯ä½œç”¨ä¼ å…¥çš„å‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ª onInvalidate å‡½æ•°ä½œå…¥å‚ï¼Œç”¨æ¥æ³¨å†Œæ¸…ç†å¤±æ•ˆæ—¶çš„å›è°ƒã€‚å½“ä»¥ä¸‹æƒ…å†µå‘ç”Ÿæ—¶ï¼Œè¿™ä¸ªå¤±æ•ˆå›è°ƒä¼šè¢«è§¦å‘ï¼š</p><ul><li>å‰¯ä½œç”¨å³å°†é‡æ–°æ‰§è¡Œæ—¶</li><li>ä¾¦å¬å™¨è¢«åœæ­¢ (å¦‚æœåœ¨ setup() æˆ–ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸­ä½¿ç”¨äº† watchEffectï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ä¼šè‡ªåŠ¨åœæ­¢ä¾¦å¬ã€‚)</li></ul><blockquote><p>æˆ‘ä»¬ä¹‹æ‰€ä»¥æ˜¯é€šè¿‡ä¼ å…¥ä¸€ä¸ªå‡½æ•°å»æ³¨å†ŒæŸä¸ªåŠŸèƒ½çš„å¤±æ•ˆå›è°ƒï¼Œè€Œä¸æ˜¯ä»å›è°ƒè¿”å›å®ƒï¼Œæ˜¯å› ä¸ºè¿”å›å€¼å¯¹äºå¼‚æ­¥é”™è¯¯å¤„ç†å¾ˆé‡è¦ã€‚</p><hr><p>åœ¨æ‰§è¡Œæ•°æ®è¯·æ±‚æ—¶ï¼Œå‰¯ä½œç”¨å‡½æ•°å¾€å¾€æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼š å½“idçš„å€¼å˜åŒ–å¿«ï¼Œé¢‘ç¹httpè¯·æ±‚æ—¶ï¼Œè‹¥å‰é¢çš„è¯·æ±‚æœªå®Œæˆï¼Œåˆ™ä¼šé€ æˆé‡å¤è¯·æ±‚ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å‰¯ä½œç”¨å‡½æ•°çš„onCleanupå‚æ•°ï¼Œå–æ¶ˆä¹‹å‰çš„httpè¯·æ±‚ã€‚</p><p>(onCleanupæ˜¯vue3æœ€æ–°ç‰ˆè‹±æ–‡å®˜ç½‘çš„åå­—å®šä¹‰</p></blockquote></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/Ragnarokoo/LearningNotes/edit/master/src/web/vue/vue3/04 ã€è®¡ç®—å±æ€§ ä¾¦å¬å™¨ã€‘.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ã€Githubã€‘ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ã€Githubã€‘ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><!----></footer><nav class="page-nav"><a href="/web/vue/vue3/03%20%E3%80%90%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86%20ref%E5%92%8Creactive%E6%80%BB%E7%BB%93%20setup%E6%B3%A8%E6%84%8F%E7%82%B9%E3%80%91.html" class="nav-link prev" aria-label="å“åº”å¼åŸç† refå’Œreactiveæ€»ç»“ setupæ³¨æ„ç‚¹"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->å“åº”å¼åŸç† refå’Œreactiveæ€»ç»“ setupæ³¨æ„ç‚¹</div></a><a href="/web/vue/vue3/06%20%E3%80%90%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%20%E6%A8%A1%E6%9D%BF%E5%BC%95%E7%94%A8%E3%80%91.html" class="nav-link next" aria-label="ç”Ÿå‘½å‘¨æœŸ æ¨¡æ¿å¼•ç”¨"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">ç”Ÿå‘½å‘¨æœŸ æ¨¡æ¿å¼•ç”¨<!----></div></a></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.9b10ba0a.js" defer></script>
  </body>
</html>
