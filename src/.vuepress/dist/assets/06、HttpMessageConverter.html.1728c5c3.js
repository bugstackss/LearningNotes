import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as s,c as a,a as t}from"./app.9b10ba0a.js";const p="/assets/XeaB1EYMn7RKkZi.a87da687.gif",e="/assets/bJGORgZUBh2HYt9.806f516f.gif",o="/assets/LoBuUjEzbFAqH8n.c16217fe.gif",c="/assets/Z2wPU1jkVCEgicK.b5797399.png",l="/assets/g6ZGYk5H42EUsCz.e4dc197a.gif",u="/assets/2w6PCHSpkXMKFlJ.391e5f42.gif",i="/assets/2w6PCHSpkXMKFlJ.391e5f42.gif",r="/assets/N7wOZpi4IhgAt1l.94e95336.gif",k="/assets/sUvlI9QcatMVdJf.58602479.gif",d="data:image/png;base64,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",m="/assets/fGLcVTKmu6ZkPYn.3100641f.png",v="/assets/osh6P2AWMjmlYz9.5eb41fe9.png",g={},q=t(`<h1 id="_06、httpmessageconverter" tabindex="-1"><a class="header-anchor" href="#_06、httpmessageconverter" aria-hidden="true">#</a> 06、HttpMessageConverter</h1><ul><li><code>HttpMessageConverter</code>：报文信息转换器，将请求报文转换为 Java 对象，或将 Java 对象转换为响应报文</li><li><code>HttpMessageConverter</code>：提供了两个注解和两个类型：<code>@RequestBody</code>、<code>@ResponseBody</code>、<code>RequestEntity</code>、<code>ResponseEntity</code></li></ul><h2 id="_1、-requestbody" tabindex="-1"><a class="header-anchor" href="#_1、-requestbody" aria-hidden="true">#</a> 1、@RequestBody</h2><p><code>@RequestBody</code>可以获取请求体，需要在控制器方法设置一个形参，使用<code>@RequestBody</code>进行标识，当前请求的请求体就会为当前注解所标识的形参赋值</p><p>后台测试代码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/httpController&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testRequestBody&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testRequestBody</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">String</span> requestBody<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;requestBody: &quot;</span> <span class="token operator">+</span> requestBody<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前台测试代码</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{httpController/testRequestBody}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
    密码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>测试@RequestBody<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试结果</p><p><img src="https://s2.loli.net/2022/03/28/sCMNOrQwX71qJBG.gif" alt="动画  (1)"></p><p>后台日志信息</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>requestBody: username=admin&amp;password=123456
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2、requestentity" tabindex="-1"><a class="header-anchor" href="#_2、requestentity" aria-hidden="true">#</a> 2、RequestEntity</h2><p><code>RequestEntity</code>：封装请求报文的一种类型，需要在控制器方法的形参中设置该类型的形参，当前请求的请求报文就会赋值给该形参</p><p>可以通过<code>getHeaders()</code>获取请求头信息，通过<code>getBody()</code>获取请求体信息</p><p>后台测试代码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testRequestEntity&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testRequestEntity</span><span class="token punctuation">(</span><span class="token class-name">RequestEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> requestEntity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;requestHeader: &quot;</span> <span class="token operator">+</span> requestEntity<span class="token punctuation">.</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;requestBody: &quot;</span> <span class="token operator">+</span> requestEntity<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前台测试代码</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{httpController/testRequestEntity}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
    密码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>测试RequestEntity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试结果</p><p><img src="https://s2.loli.net/2022/03/28/lrgPL3TActadbQY.gif" alt="动画  (2)"></p><p>后台日志信息</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>requestHeader<span class="token operator">:</span> <span class="token punctuation">[</span>host<span class="token operator">:</span><span class="token string">&quot;localhost:8080&quot;</span><span class="token punctuation">,</span> connection<span class="token operator">:</span><span class="token string">&quot;keep-alive&quot;</span><span class="token punctuation">,</span> content<span class="token operator">-</span>length<span class="token operator">:</span><span class="token string">&quot;30&quot;</span><span class="token punctuation">,</span> cache<span class="token operator">-</span>control<span class="token operator">:</span><span class="token string">&quot;max-age=0&quot;</span><span class="token punctuation">,</span> sec<span class="token operator">-</span>ch<span class="token operator">-</span>ua<span class="token operator">:</span><span class="token string">&quot;&quot;</span> <span class="token class-name">Not</span> <span class="token class-name">A</span><span class="token punctuation">;</span><span class="token class-name">Brand</span><span class="token string">&quot;;v=&quot;</span><span class="token number">99</span><span class="token string">&quot;, &quot;</span><span class="token class-name">Chromium</span><span class="token string">&quot;;v=&quot;</span><span class="token number">99</span><span class="token string">&quot;, &quot;</span><span class="token class-name">Google</span> <span class="token class-name">Chrome</span><span class="token string">&quot;;v=&quot;</span><span class="token number">99</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> sec<span class="token operator">-</span>ch<span class="token operator">-</span>ua<span class="token operator">-</span>mobile<span class="token operator">:</span><span class="token string">&quot;?0&quot;</span><span class="token punctuation">,</span> sec<span class="token operator">-</span>ch<span class="token operator">-</span>ua<span class="token operator">-</span>platform<span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token class-name">Windows</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> upgrade<span class="token operator">-</span>insecure<span class="token operator">-</span>requests<span class="token operator">:</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> origin<span class="token operator">:</span><span class="token string">&quot;http://localhost:8080&quot;</span><span class="token punctuation">,</span> user<span class="token operator">-</span>agent<span class="token operator">:</span><span class="token string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36&quot;</span><span class="token punctuation">,</span> accept<span class="token operator">:</span><span class="token string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9&quot;</span><span class="token punctuation">,</span> sec<span class="token operator">-</span>fetch<span class="token operator">-</span>site<span class="token operator">:</span><span class="token string">&quot;same-origin&quot;</span><span class="token punctuation">,</span> sec<span class="token operator">-</span>fetch<span class="token operator">-</span>mode<span class="token operator">:</span><span class="token string">&quot;navigate&quot;</span><span class="token punctuation">,</span> sec<span class="token operator">-</span>fetch<span class="token operator">-</span>user<span class="token operator">:</span><span class="token string">&quot;?1&quot;</span><span class="token punctuation">,</span> sec<span class="token operator">-</span>fetch<span class="token operator">-</span>dest<span class="token operator">:</span><span class="token string">&quot;document&quot;</span><span class="token punctuation">,</span> referer<span class="token operator">:</span><span class="token string">&quot;http://localhost:8080/SpringMVC/&quot;</span><span class="token punctuation">,</span> accept<span class="token operator">-</span>encoding<span class="token operator">:</span><span class="token string">&quot;gzip, deflate, br&quot;</span><span class="token punctuation">,</span> accept<span class="token operator">-</span>language<span class="token operator">:</span><span class="token string">&quot;zh-CN,zh;q=0.9&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Content</span><span class="token operator">-</span><span class="token class-name">Type</span><span class="token operator">:</span><span class="token string">&quot;application/x-www-form-urlencoded;charset=UTF-8&quot;</span><span class="token punctuation">]</span>
requestBody<span class="token operator">:</span> username<span class="token operator">=</span>admin<span class="token operator">&amp;</span>password<span class="token operator">=</span><span class="token number">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3、-responsebody" tabindex="-1"><a class="header-anchor" href="#_3、-responsebody" aria-hidden="true">#</a> 3、@ResponseBody</h2><p><code>@ResponseBody</code>用于标识一个控制器方法，可以将该方法的返回值直接作为响应报文的响应体响应到浏览器</p><h3 id="_3-1、通过-httpservletresponse-响应浏览器数据" tabindex="-1"><a class="header-anchor" href="#_3-1、通过-httpservletresponse-响应浏览器数据" aria-hidden="true">#</a> 3.1、通过 HttpServletResponse 响应浏览器数据</h3><p>后台测试代码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testResponseByServletAPI&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testResponseByServletAPI</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;hello, response&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前台测试代码</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/httpController/testResponseByServletAPI}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>通过 HttpServletResponse 响应浏览器数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>测试结果</p><p><img src="`+p+`" alt="动画  (3)"></p><h3 id="_3-2、通过-responsebody-响应浏览器数据" tabindex="-1"><a class="header-anchor" href="#_3-2、通过-responsebody-响应浏览器数据" aria-hidden="true">#</a> 3.2、通过 @ResponseBody 响应浏览器数据</h3><p>后台测试代码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testResponseBody&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testResponseBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前台测试代码</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/httpController/testResponseBody}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>通过 @ResponseBody 响应浏览器数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>测试结果</p><p><img src="`+e+`" alt="动画  (4)"></p><h3 id="_3-3、通过-responsebody-响应-user" tabindex="-1"><a class="header-anchor" href="#_3-3、通过-responsebody-响应-user" aria-hidden="true">#</a> 3.3、通过 @ResponseBody 响应 User</h3><p>后台测试代码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testResponseUser&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">testResponseUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前台测试代码</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/httpController/testResponseUser}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>通过 @ResponseBody 响应 User<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>测试结果</p><p><img src="`+o+'" alt="动画  (5)"></p><p>我这里报了<code>406 - 不可接收</code>的错误</p><blockquote><p><strong>存疑点</strong>：课程中报的是<code>500 - No converter found for return value of type: class xxx</code>，不知道是什么原因，此处存疑</p></blockquote><p><img src="'+c+`" alt="image-20220328213941797"></p><blockquote><p><strong>Q</strong>：那么如何解决这个问题？</p><p><strong>A</strong>：不要响应 Java 对象，而是转换成 Json 对象</p></blockquote><h3 id="_3-4、springmvc-处理-json" tabindex="-1"><a class="header-anchor" href="#_3-4、springmvc-处理-json" aria-hidden="true">#</a> 3.4、SpringMVC 处理 JSON</h3><p>处理方式：引入<code>jackson</code>依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-databind<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.13.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里不修改任何代码，直接重新部署项目，再来测试下</p><p><img src="`+l+`" alt="动画  (6)"></p><p>这里需要强调的是，并不是只引入<code>jackson</code>依赖就够了。实际上，<code>@ResponseBody</code>处理<code>json</code>的步骤如下</p><ul><li>1）引入<code>jackson</code>依赖</li><li>2）开启 MVC 注解驱动 <ul><li>此时在<code>HandlerAdaptor</code>中会自动装配一个消息转换器<code>MappingJackson2HttpMessageConverter</code>，可以将响应到浏览器的 Java 对象转换<code>json</code>格式的字符串</li></ul></li><li>3）使用<code>@ResponseBody</code>注解标识控制器方法</li><li>4）将 Java 对象作为控制器方法的返回值返回 <ul><li>这里会自动转换为<code>json</code>类型的<mark>字符串</mark></li></ul></li></ul><p>上述步骤缺一不可，少一步都实现不了效果</p><blockquote><p><strong>回顾</strong>：我们之前章节中就说过 MVC 注解驱动的功能很多，在 <em>04-SpringMVC 视图</em> 中处理了视图控制器问题，在 <em>05-RESTful 案例</em> 中处理静态资源问题，而在本章节中处理了 Java 对象转换为 JSON 对象的问题。这里再总结一下 MVC 注解驱动的作用：</p><p>1、解决视图控制器<code>view-controller</code>造成其他请求失效的问题</p><p>2、解决默认 Servlet 处理器<code>default-servlet-handler</code>造成<code>DispatcherServlet</code>失效的问题</p><p>3、解决 Java 对象转换为 Json 对象的问题</p><p><strong>扩展</strong>：Json 对象和 Json 数组</p><p>1、Json 对象用<code>{}</code>包裹，如<code>{&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123456&quot;}</code></p><p>2、Json 数组用<code>[]</code>包裹，如<code>[&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123456&quot;]</code></p><p>3、Json 对象和 Json 数组可以相互嵌套，即</p><ul><li>Json 对象中可以包含 Json 对象和 Json 数组，如<code>[&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123456&quot;, &quot;ext&quot; : {&quot;age&quot;: 18, &quot;gender&quot;: &quot;1&quot;}]</code>、<code>[&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123456&quot;, &quot;ext&quot; : [&quot;age&quot;: 18, &quot;gender&quot;: &quot;1&quot;]]</code></li><li>Json 数组中也可以包含 Json 对象和 Json 数组，如<code>{&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123456&quot;, &quot;ext&quot; : {&quot;age&quot;: 18, &quot;gender&quot;: &quot;1&quot;}}</code>、<code>{&quot;username&quot;:&quot;admin&quot;,&quot;password&quot;:&quot;123456&quot;, &quot;ext&quot; : [&quot;age&quot;: 18, &quot;gender&quot;: &quot;1&quot;]}</code></li></ul></blockquote><h3 id="_3-5、springmvc-处理-ajax" tabindex="-1"><a class="header-anchor" href="#_3-5、springmvc-处理-ajax" aria-hidden="true">#</a> 3.5、SpringMVC 处理 AJAX</h3><p>后台测试代码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testAxios&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testAxios</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前台测试代码</p><p>httpmessageconverter.html</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testAxios<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/httpController/testAxios}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>SpringMVC 操作 AJAX<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/static/js/vue.js}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/static/js/axios.min.js}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/static/js/httpmessageconverter.js}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>httpmessageconverter.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> vue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">testAxios</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">testAxios</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">testAxios</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> url<span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&quot;123456&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试效果</p><p><img src="`+u+`" alt="动画  (7)"></p><h3 id="_3-6、-restcontroller-注解" tabindex="-1"><a class="header-anchor" href="#_3-6、-restcontroller-注解" aria-hidden="true">#</a> 3.6、@RestController 注解</h3><p><code>@RestController</code>注解是 SpringMVC 提供的一个复合注解，标识在控制器的类上，就相当于为类添加了<code>@Controller</code>注解，并且为其中的每个方法添加了<code>@ResponseBody</code>注解</p><p>这里简单修改下后台代码，将<code>@Controller</code>注解替换为<code>@RestController</code>注解，并去除控制器方法上的<code>@ResponseBody</code>注解</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/httpController&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testAxios&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testAxios</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> user<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;,&quot;</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试效果</p><p><img src="`+i+`" alt="动画  (8)"></p><p>可以发现，虽然控制器方法上没有加<code>@ResponseBody</code>注解，但是效果是一样的，依然可以将控制器方法的返回值作为响应报文的响应体返回给浏览器</p><h2 id="_4、responseentity" tabindex="-1"><a class="header-anchor" href="#_4、responseentity" aria-hidden="true">#</a> 4、ResponseEntity</h2><p><code>ResponseEntity</code>用于控制器方法的返回值类型，该控制器方法的返回值就是响应到浏览器的响应报文</p><h3 id="_4-1、文件下载" tabindex="-1"><a class="header-anchor" href="#_4-1、文件下载" aria-hidden="true">#</a> 4.1、文件下载</h3><p>后台测试代码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/fileUploadDownloadController&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FileUploadDownloadController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testDownload&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">ResponseEntity</span><span class="token operator">&lt;</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token function">testDownload</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ServletContext</span> context <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 文件位置和名称</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/static/img/&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> fileName <span class="token operator">=</span> <span class="token string">&quot;1.png&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// 响应体</span>
        <span class="token class-name">String</span> realPath <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span>path <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token function">readFile</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 响应头</span>
        <span class="token class-name">MultiValueMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> headers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        headers<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Disposition&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;attachment;filename=&quot;</span> <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 响应状态码</span>
        <span class="token class-name">HttpStatus</span> status <span class="token operator">=</span> <span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">OK</span><span class="token punctuation">;</span>
        <span class="token comment">// 响应实体</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> headers<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 读取文件流
     *
     * <span class="token keyword">@param</span> <span class="token parameter">realPath</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token class-name">String</span> realPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token keyword">int</span> initSize <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>initSize<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">BufferedInputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span>realPath<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            bytes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>bis<span class="token punctuation">.</span><span class="token function">available</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            bis<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> bytes<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前台测试代码</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/fileUploadDownloadController/testDownload}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试下载文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>测试效果</p><p><img src="`+r+`" alt="动画  (8)"></p><blockquote><p><strong>记低级失误</strong>：</p><p>1、将</p><p>@Controller @RequestMapping(&quot;/fileUploadDownloadController&quot;)</p><p>写成了</p><p>@Controller(&quot;/fileUploadDownloadController&quot;)</p><p>导致了请求直接报<code>404</code>找不到对应资源，需要格外注意！！！</p><p>2、读取文件代码缺少<code> bis.read(bytes);</code>导致字节数组只做了初始化而没有赋值，导致下载文件出现“损坏”的问题，需要格外注意！！！</p></blockquote><h3 id="_4-2、文件上传" tabindex="-1"><a class="header-anchor" href="#_4-2、文件上传" aria-hidden="true">#</a> 4.2、文件上传</h3><p>文件上传要求<code>form</code>表单的请求方式必须为<code>post</code>，并且添加属性<code>enctype=&quot;multipart/form-data&quot;</code></p><p>SpringMVC 将上传的文件封装到<code>MultipartFile</code>对象中，通过此对象可以获取文件相关信息</p><h4 id="_1-添加依赖" tabindex="-1"><a class="header-anchor" href="#_1-添加依赖" aria-hidden="true">#</a> 1）添加依赖</h4><p><code>commons-fileupload</code>的 jar 包是上传功能必不可少的</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-配置文件上传解析器" tabindex="-1"><a class="header-anchor" href="#_2-配置文件上传解析器" aria-hidden="true">#</a> 2）配置文件上传解析器</h4><p>SpringMVC 配置文件中添加<code>CommonsMultipartResolver</code>的依赖注入</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--配置文件上传解析器，将上传文件自动封装为MutilpartFile对象--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipartResolver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.web.multipart.commons.CommonsMultipartResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-后台代码" tabindex="-1"><a class="header-anchor" href="#_3-后台代码" aria-hidden="true">#</a> 3）后台代码</h4><p>使用<code>MultipartFile</code>对象接收上传文件</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testUpload&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testUpload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> photo<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 目标目录</span>
    <span class="token class-name">String</span> photoPath <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;photo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>photoPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        file<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 目标文件名</span>
    <span class="token class-name">String</span> fileName <span class="token operator">=</span> photo<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 上传文件到服务器</span>
    photo<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>photoPath <span class="token operator">+</span> <span class="token class-name">File</span><span class="token punctuation">.</span>separator <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-前台代码" tabindex="-1"><a class="header-anchor" href="#_4-前台代码" aria-hidden="true">#</a> 4）前台代码</h4><p>要求请求方式必须为<code>post</code>，并且<code>enctype</code>属性值必须为<code>multipart/form-data</code></p><blockquote><p><strong>Q</strong>：enctype 是什么？</p><p><strong>A</strong>：enctype 即<code>encode type</code>，表示编码类型，它规定了在发送到服务器之前应该如何对表单数据进行编码</p><p>默认地，form 表单数据编码默认值为<code>application/x-www-form-urlencoded</code>。除此之外，<code>enctype</code>还可以设置为<code>text/plain</code></p><p>这三种类型总结一下就是：</p><ul><li><code>application/x-www-form-urlencoded</code>：默认值，URL 编码</li><li><code>multipart/form-data</code>：文件类型</li><li><code>text/plain</code>：纯文本格式类型</li></ul></blockquote><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/fileUploadDownloadController/testUpload}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    头像：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>photo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>上传<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试结果</p><p><img src="`+k+'" alt="动画  (9)"></p><p>查看文件是否上传成功</p><p><img src="'+d+`" alt="image-20220330224959389"></p><h4 id="_5-处理同名问题" tabindex="-1"><a class="header-anchor" href="#_5-处理同名问题" aria-hidden="true">#</a> 5）处理同名问题</h4><p>如果多次上传同名文件，会发现原文件会被同名新文件替换（覆盖）掉，如何解决这个问题呢？</p><p>其实，处理同名问题有多种方式，这里采用<code>UUID</code>生成随机序列来实现，只需要做简单的修改即可</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testUpload&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testUpload</span><span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> photo<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token comment">// 目标目录</span>
    <span class="token class-name">String</span> photoPath <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">&quot;photo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>photoPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>file<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        file<span class="token punctuation">.</span><span class="token function">mkdir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 目标文件名</span>
    <span class="token class-name">String</span> srcName <span class="token operator">=</span> photo<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> suffixName <span class="token operator">=</span> srcName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>srcName<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> prefixName <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> destName <span class="token operator">=</span> prefixName <span class="token operator">+</span> suffixName<span class="token punctuation">;</span>
    <span class="token comment">// 上传文件到服务器</span>
    photo<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>photoPath <span class="token operator">+</span> <span class="token class-name">File</span><span class="token punctuation">.</span>separator <span class="token operator">+</span> destName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>再次测试</p><p><img src="`+m+'" alt="image-20220330230259507"></p><p>可以看到，最新上传的文件名为一串随机序列，这样就避免同名文件上传出现覆盖的问题了</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>本节知识点</p><p>HttpMessageConverter 请求报文转换器</p><ul><li>请求报文转为 JAVA 对象：@RequestBody、RequestEntity</li><li>JAVA 对象转为请求报文：@ResponseBody、ResponseEntity</li></ul><p>另外</p><ul><li><code>jackson-databind</code>：处理<code>json</code></li><li><code>commons-fileupload</code>：上传必备</li></ul><p>附上导图，仅供参考</p><p><img src="'+v+'" alt="06-HttpMessageConverter"></p>',121),b=[q];function h(y,f){return s(),a("div",null,b)}const C=n(g,[["render",h],["__file","06、HttpMessageConverter.html.vue"]]);export{C as default};
