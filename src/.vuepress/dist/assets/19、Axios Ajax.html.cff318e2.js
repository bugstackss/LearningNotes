import{_ as p}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as e,c as o,d as n,e as s,b as c,a,r as u}from"./app.9b10ba0a.js";const i="/assets/8a9e594351e14fd4a47ab3651be535ce.07aa8158.png",l="/assets/97f6da51e3f64bcd8b916eaffb0df4c4.9a70f53c.png",r="/assets/b75bf999f06b416da5d0df88ea1ca508.328202a1.png",k="/assets/aff29a94c3524de1ad876461c2bd5aa9.7d009818.png",d="/assets/2fe69aad3de143f498b44715bb417d12.afbecc3f.png",v="/assets/906feb90c5004eef8f98ddea67a63213.9ae43760.png",m="/assets/208bf1c287b34cd9aa32b3b867f70c4f.c45bf5c3.png",b="/assets/def5b09f877c4c8f808cc882e0423dd0.9a52abb3.png",g="/assets/cedcf86db9514db9a22c2e52704c92d1.3ef1708a.png",h="/assets/1529f266fd004b5581b9e636f8285a5b.c3395155.png",q="/assets/470d8f6991fc45aea0bd92da22ece8e8.bc8b74a1.png",f="/assets/a428832db18f4d69b8d6bd09e78a1144.36e9d814.png",y="/assets/fe6c11c7bf584f36902aba935818bd6b.7a6f3c88.png",x="/assets/a428832db18f4d69b8d6bd09e78a1144.36e9d814.png",_={},S=a('<h1 id="_19、axios-ajax" tabindex="-1"><a class="header-anchor" href="#_19、axios-ajax" aria-hidden="true">#</a> 19、Axios Ajax</h1><h2 id="一、ajax概述" tabindex="-1"><a class="header-anchor" href="#一、ajax概述" aria-hidden="true">#</a> 一、Ajax概述</h2><h3 id="_1、服务器端渲染" tabindex="-1"><a class="header-anchor" href="#_1、服务器端渲染" aria-hidden="true">#</a> 1、服务器端渲染</h3><p><img src="'+i+'" alt="image.png"></p><h3 id="_2、ajax渲染-局部更新" tabindex="-1"><a class="header-anchor" href="#_2、ajax渲染-局部更新" aria-hidden="true">#</a> 2、Ajax渲染（局部更新）</h3><p><img src="'+l+'" alt="image.png"></p><h3 id="_3、前后端分离" tabindex="-1"><a class="header-anchor" href="#_3、前后端分离" aria-hidden="true">#</a> 3、前后端分离</h3><p>彻底舍弃服务器端渲染，数据全部通过Ajax方式以JSON格式来传递。</p><h3 id="_4、同步与异步" tabindex="-1"><a class="header-anchor" href="#_4、同步与异步" aria-hidden="true">#</a> 4、同步与异步</h3><p>Ajax本身就是Asynchronous JavaScript And XML的缩写，直译为：异步的JavaScript和XML。在实际应用中Ajax指的是：<strong>不刷新浏览器窗口</strong>，<strong>不做页面跳转</strong>，<strong>局部更新页面内容</strong>的技术。</p><p>**『同步』<strong>和</strong>『异步』**是一对相对的概念，那么什么是同步，什么是异步呢？</p><h4 id="_1同步" tabindex="-1"><a class="header-anchor" href="#_1同步" aria-hidden="true">#</a> ①同步</h4><p>多个操作<strong>按顺序执行</strong>，前面的操作没有完成，后面的操作就必须<strong>等待</strong>。所以同步操作通常是<strong>串行</strong>的。</p><p><img src="'+r+'" alt="image.png"></p><h4 id="_2异步" tabindex="-1"><a class="header-anchor" href="#_2异步" aria-hidden="true">#</a> ②异步</h4><p>多个操作相继开始<strong>并发执行</strong>，即使开始的先后顺序不同，但是由于它们各自是<strong>在自己独立的进程或线程中</strong>完成，所以<strong>互不干扰</strong>，**谁也*<em>不用等*<em>谁</em></em>。</p><p><img src="'+k+'" alt="image.png"></p><h3 id="_5、axios简介" tabindex="-1"><a class="header-anchor" href="#_5、axios简介" aria-hidden="true">#</a> 5、Axios简介</h3><p>使用原生的JavaScript程序执行Ajax极其繁琐，所以一定要使用框架来完成。而Axios就是目前最流行的前端Ajax框架。</p>',19),j={href:"http://www.axios-js.com/",target:"_blank",rel:"noopener noreferrer"},w=a('<p><img src="'+d+`" alt="image.png"></p><p>使用Axios和使用Vue一样，导入对应的*.js文件即可。官方提供的script标签引入方式为：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/axios/dist/axios.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>我们可以把这个axios.min.js文件下载下来保存到本地来使用。</p><h2 id="二、-axios基本用法" tabindex="-1"><a class="header-anchor" href="#二、-axios基本用法" aria-hidden="true">#</a> 二、 Axios基本用法</h2><h3 id="_0、在前端页面引入开发环境" tabindex="-1"><a class="header-anchor" href="#_0、在前端页面引入开发环境" aria-hidden="true">#</a> 0、在前端页面引入开发环境</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/demo/static/vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/demo/static/axios.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1、发送普通请求参数" tabindex="-1"><a class="header-anchor" href="#_1、发送普通请求参数" aria-hidden="true">#</a> 1、发送普通请求参数</h3><h3 id="_1前端代码" tabindex="-1"><a class="header-anchor" href="#_1前端代码" aria-hidden="true">#</a> ①前端代码</h3><p>HTML标签：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">&quot;commonParam&quot;</span><span class="token operator">&gt;</span>普通请求参数<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Vue+axios代码：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;el&quot;</span><span class="token operator">:</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;methods&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token string-property property">&quot;commonParam&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;/demo/AjaxServlet?method=commonParam&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;params&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;userName&quot;</span><span class="token operator">:</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;userPwd&quot;</span><span class="token operator">:</span><span class="token string">&quot;123456&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果：所有请求参数都被放到URL地址后面了，哪怕我们现在用的是POST请求方式。</p><p><img src="`+v+`" alt="image.png"></p><h4 id="_2后端代码" tabindex="-1"><a class="header-anchor" href="#_2后端代码" aria-hidden="true">#</a> ②后端代码</h4><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AjaxServlet</span> <span class="token keyword">extends</span> <span class="token class-name">ModelBaseServlet</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">commonParam</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        <span class="token class-name">String</span> userName <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> userPwd <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;userPwd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;userName = &quot;</span> <span class="token operator">+</span> userName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;userPwd = &quot;</span> <span class="token operator">+</span> userPwd<span class="token punctuation">)</span><span class="token punctuation">;</span>

        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;服务器端返回普通文本字符串作为响应&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>P.S.：由于我们不需要Thymeleaf了，所以ModelBaseServlet可以跳过ViewBaseServlet直接继承HttpServlet。</p></blockquote><p><img src="`+m+'" alt="image.png"></p><h4 id="_3axios程序接收到的响应对象结构" tabindex="-1"><a class="header-anchor" href="#_3axios程序接收到的响应对象结构" aria-hidden="true">#</a> ③axios程序接收到的响应对象结构</h4><p><img src="'+b+`" alt="image.png"></p><table><thead><tr><th>属性名</th><th>作用</th></tr></thead><tbody><tr><td>config</td><td>调用axios(config对象)方法时传入的JSON对象</td></tr><tr><td>data</td><td>服务器端返回的响应体数据</td></tr><tr><td>headers</td><td>响应消息头</td></tr><tr><td>request</td><td>原生JavaScript执行Ajax操作时使用的XMLHttpRequest</td></tr><tr><td>status</td><td>响应状态码</td></tr><tr><td>statusText</td><td>响应状态码的说明文本</td></tr></tbody></table><h4 id="_4服务器端处理请求失败后" tabindex="-1"><a class="header-anchor" href="#_4服务器端处理请求失败后" aria-hidden="true">#</a> ④服务器端处理请求失败后</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token comment">// catch()服务器端处理请求出错后，会调用</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// error就是出错时服务器端返回的响应数据</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 在服务器端处理请求失败后，获取axios封装的JSON格式的响应数据对象</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在服务器端处理请求失败后，获取响应状态码</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 在服务器端处理请求失败后，获取响应状态说明文本</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 在服务器端处理请求失败后，获取响应体数据</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在给catch()函数传入的回调函数中，error对象封装了服务器端处理请求失败后相应的错误信息。其中，axios封装的响应数据对象，是error对象的response属性。response属性对象的结构如下图所示：</p><p><img src="`+g+'" alt="image.png"></p><p>可以看到，response对象的结构还是和then()函数传入的回调函数中的response是一样的：</p><p><img src="'+h+`" alt="image.png"></p><blockquote><p>回调函数：开发人员声明，但是调用时交给系统来调用。像单击响应函数、then()、catch()里面传入的都是回调函数。回调函数是相对于普通函数来说的，普通函数就是开发人员自己声明，自己调用：</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;result=&quot;</span><span class="token operator">+</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、发送请求体json" tabindex="-1"><a class="header-anchor" href="#_2、发送请求体json" aria-hidden="true">#</a> 2、发送请求体JSON</h3><h4 id="_1前端代码-1" tabindex="-1"><a class="header-anchor" href="#_1前端代码-1" aria-hidden="true">#</a> ①前端代码</h4><p>HTML代码：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>requestBodyJSON<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>请求体JSON<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Vue+axios代码：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>……
<span class="token string-property property">&quot;methods&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;requestBodyJSON&quot;</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;/demo/AjaxServlet?method=requestBodyJSON&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token string-property property">&quot;stuId&quot;</span><span class="token operator">:</span> <span class="token number">55</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;stuName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;subjectList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        <span class="token string-property property">&quot;subjectName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span>
                        <span class="token string-property property">&quot;subjectScore&quot;</span><span class="token operator">:</span> <span class="token number">50.55</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        <span class="token string-property property">&quot;subjectName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;php&quot;</span><span class="token punctuation">,</span>
                        <span class="token string-property property">&quot;subjectScore&quot;</span><span class="token operator">:</span> <span class="token number">30.26</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;teacherMap&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;one&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token string-property property">&quot;teacherName&quot;</span><span class="token operator">:</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
                        <span class="token string-property property">&quot;tearcherAge&quot;</span><span class="token operator">:</span><span class="token number">23</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;two&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token string-property property">&quot;teacherName&quot;</span><span class="token operator">:</span><span class="token string">&quot;jerry&quot;</span><span class="token punctuation">,</span>
                        <span class="token string-property property">&quot;tearcherAge&quot;</span><span class="token operator">:</span><span class="token number">31</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string-property property">&quot;school&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token string-property property">&quot;schoolId&quot;</span><span class="token operator">:</span> <span class="token number">23</span><span class="token punctuation">,</span>
                    <span class="token string-property property">&quot;schoolName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;atguigu&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
……
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果：</p><p><img src="`+q+'" alt="image.png"></p><blockquote><p>P.S.：Chrome浏览器中将『请求负载』显示为英文：『Request Payload』。</p></blockquote><h4 id="_2后端代码-1" tabindex="-1"><a class="header-anchor" href="#_2后端代码-1" aria-hidden="true">#</a> ②后端代码</h4><h5 id="_1-加入gson包" tabindex="-1"><a class="header-anchor" href="#_1-加入gson包" aria-hidden="true">#</a> [1]加入Gson包</h5><p>Gson是Google研发的一款非常优秀的<strong>JSON数据解析和生成工具</strong>，它可以帮助我们将数据在JSON字符串和Java对象之间互相转换。</p><p><img src="'+f+`" alt="image.png"></p><h5 id="_2-servlet代码" tabindex="-1"><a class="header-anchor" href="#_2-servlet代码" aria-hidden="true">#</a> [2]Servlet代码</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">requestBodyJSON</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.由于请求体数据有可能很大，所以Servlet标准在设计API的时候要求我们通过输入流来读取</span>
    <span class="token class-name">BufferedReader</span> reader <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.创建StringBuilder对象来累加存储从请求体中读取到的每一行</span>
    <span class="token class-name">StringBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.声明临时变量</span>
    <span class="token class-name">String</span> bufferStr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token comment">// 4.循环读取</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>bufferStr <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>bufferStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 5.关闭流</span>
    reader<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 6.累加的结果就是整个请求体</span>
    <span class="token class-name">String</span> requestBody <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 7.创建Gson对象用于解析JSON字符串</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 8.将JSON字符串还原为Java对象</span>
    <span class="token class-name">Student</span> student <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>requestBody<span class="token punctuation">,</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;student = &quot;</span> <span class="token operator">+</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;requestBody = &quot;</span> <span class="token operator">+</span> requestBody<span class="token punctuation">)</span><span class="token punctuation">;</span>

    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;服务器端返回普通文本字符串作为响应&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>P.S.：看着很麻烦是吧？别担心，将来我们有了<strong>SpringMVC</strong>之后，一个**@RequestBody**注解就能够搞定，非常方便！</p></blockquote><h3 id="_3、服务器端返回json数据" tabindex="-1"><a class="header-anchor" href="#_3、服务器端返回json数据" aria-hidden="true">#</a> 3、服务器端返回JSON数据</h3><h4 id="_1前端代码-2" tabindex="-1"><a class="header-anchor" href="#_1前端代码-2" aria-hidden="true">#</a> ①前端代码</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;method&quot;</span><span class="token operator">:</span><span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;url&quot;</span><span class="token operator">:</span><span class="token string">&quot;/demo/AjaxServlet?method=responseBodyJSON&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>then()中获取到的response在控制台打印效果如下：我们需要通过data属性获取响应体数据</p><p><img src="`+y+'" alt="image.png"></p><h4 id="_2后端代码-2" tabindex="-1"><a class="header-anchor" href="#_2后端代码-2" aria-hidden="true">#</a> ②后端代码</h4><h5 id="_1-加入gson包-1" tabindex="-1"><a class="header-anchor" href="#_1-加入gson包-1" aria-hidden="true">#</a> [1]加入Gson包</h5><p>仍然需要Gson支持，不用多说</p><p><img src="'+x+`" alt="image.png"></p><h5 id="_2-servlet代码-1" tabindex="-1"><a class="header-anchor" href="#_2-servlet代码-1" aria-hidden="true">#</a> [2]Servlet代码</h5><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">responseBodyJSON</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

    <span class="token comment">// 1.准备数据对象</span>
    <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setStuId</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setStuName</span><span class="token punctuation">(</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setSchool</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">School</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">&quot;atguigu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    student<span class="token punctuation">.</span><span class="token function">setSubjectList</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token number">95.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token string">&quot;php&quot;</span><span class="token punctuation">,</span> <span class="token number">93.3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Teacher</span><span class="token punctuation">&gt;</span></span> teacherMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    teacherMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;t1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;lili&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    teacherMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;t2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;mary&quot;</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    teacherMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;t3&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Teacher</span><span class="token punctuation">(</span><span class="token string">&quot;katty&quot;</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    student<span class="token punctuation">.</span><span class="token function">setTeacherMap</span><span class="token punctuation">(</span>teacherMap<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.创建Gson对象</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 3.将Java对象转换为JSON对象</span>
    <span class="token class-name">String</span> json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 4.设置响应体的内容类型</span>
    response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,57);function N(A,J){const t=u("ExternalLinkIcon");return e(),o("div",null,[S,n("blockquote",null,[n("p",null,[s("Axios官网："),n("a",j,[s("http://www.axios-js.com/"),c(t)])])]),w])}const T=p(_,[["render",N],["__file","19、Axios Ajax.html.vue"]]);export{T as default};
