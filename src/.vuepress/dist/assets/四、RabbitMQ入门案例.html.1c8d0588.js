import{_ as n}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as s,c as a,a as t}from"./app.9b10ba0a.js";const p="data:image/webp;base64,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",e="/assets/image.5zalz3u39nk0.c56216b9.webp",c="/assets/image.x5zo4wuta74.f9f4fde5.webp",o="/assets/image.3iwquz975vw0.023de764.webp",l="/assets/1658588553672.629xpapm6wg0.2c996a46.webp",i="/assets/image.3fh698ujarc0.0cef3cdd.webp",u="/assets/image.13a9691kkkyo.85d3e51c.webp",k="/assets/image.701dj3uqk400.bb02c25b.webp",d={},r=t('<h2 id="_01、hello-rabbitmq" tabindex="-1"><a class="header-anchor" href="#_01、hello-rabbitmq" aria-hidden="true">#</a> 01、Hello RabbitMQ</h2><p>用 Java 编写两个程序。发送单个消息的生产者和接收消息并打印出来的消费者</p><p>在下图中，“ P” 是我们的生产者，“ C” 是我们的消费者。中间的框是一个队列 RabbitMQ 代表使用者保留的消息缓冲区</p><p><img src="'+p+'" alt="image"></p><blockquote><p>注意</p><p>Java 进行连接的时候，需要 Linux 开放 5672 端口，否则会连接超时</p><p>访问 Web 界面的端口是 15672，连接服务器的端口是 5672</p></blockquote><p>步骤图：</p><p><img src="'+e+`" alt="image"></p><h3 id="添加依赖" tabindex="-1"><a class="header-anchor" href="#添加依赖" aria-hidden="true">#</a> 添加依赖</h3><p>先创建好 Maven 工程，pom.xml 添入依赖：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--rabbitmq 依赖客户端--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.rabbitmq<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>amqp-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.8.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--操作文件流的一个依赖--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--指定 jdk 编译版本--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-compiler-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>source</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>source</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>target</span><span class="token punctuation">&gt;</span></span>8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>target</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>版本根据需求选择</p><h3 id="消息生产者" tabindex="-1"><a class="header-anchor" href="#消息生产者" aria-hidden="true">#</a> 消息生产者</h3><p>创建一个类作为生产者，最终生产消息到 RabbitMQ 的队列里</p><p>步骤：</p><ol><li>创建 RabbitMQ 连接工厂</li><li>进行 RabbitMQ 工厂配置信息</li><li>创建 RabbitMQ 连接</li><li>创建 RabbitMQ 信道</li><li>生成一个队列</li><li>发送一个消息到交换机，交换机发送到队列。&quot;&quot; 代表默认交换机</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Producer</span> <span class="token punctuation">{</span>

    <span class="token comment">// 队列名称</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">QUEUE_NAME</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 发消息</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建一个连接工厂</span>
        <span class="token class-name">ConnectionFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 工厂IP 连接rabbitmq的队列</span>
        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">&quot;172.16.102.100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 用户名</span>
        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 密码</span>
        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建连接</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取信道</span>
        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token doc-comment comment">/**
         * 生成一个队列：
         *  1.队列名称
         *  2.队列里面的消息是否进行持久化（磁盘），默认情况消息存储在内存中
         *  3.该队列是否只提供一个消费者进行消费，是否进行消息共享，true可以多个消费者消费，false：只能一个消费者进行消费
         *  4.是否自动删除，最后一个消费者端开连接以后，该队列是否自动删除，true表示自动删除
         *  5.其他参数
         */</span>
        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token constant">QUEUE_NAME</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 发消息</span>
        <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token string">&quot;hello,world&quot;</span><span class="token punctuation">;</span>

        <span class="token doc-comment comment">/**
         * 发送一个消息
         *  1.发送到哪个交换机
         *  2.路由的key值是哪个，本次是队列的名称
         *  3.其他参数信息
         *  4.发送消息的消息体
         */</span>
        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token constant">QUEUE_NAME</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;消息发送完毕&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>结果</li></ul><p><img src="`+c+`" alt="image"></p><p>消息队列名字和步骤 2 的信息根据自己的需求进行配置</p><p><strong>方法解释</strong></p><p>声明队列：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span>队列名<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">,</span> 持久化<span class="token operator">/</span><span class="token keyword">boolean</span><span class="token punctuation">,</span> 共享消费<span class="token operator">/</span><span class="token keyword">boolean</span><span class="token punctuation">,</span> 自动删除<span class="token operator">/</span><span class="token keyword">boolean</span><span class="token punctuation">,</span> 配置参数<span class="token operator">/</span><span class="token class-name">Map</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>配置参数现在是 null，后面死信队列延迟队列等会用到，如：</p><p>队列的优先级</p><p>队列里的消息如果没有被消费，何去何从？（死信队列）</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 设置队列的最大优先级 最大可以设置到 255 官网推荐 1-10 如果设置太高比较吃内存和 CPU</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x-max-priority&quot;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 声明当前队列绑定的死信交换机</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x-dead-letter-exchange&quot;</span><span class="token punctuation">,</span> <span class="token constant">Y_DEAD_LETTER_EXCHANGE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 声明当前队列的死信路由 key</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;x-dead-letter-routing-key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;YD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token constant">QUEUE_NAME</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>发布消息：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span>交换机名<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">,</span> 队列名<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">,</span> 配置参数<span class="token operator">/</span><span class="token class-name">Map</span><span class="token punctuation">,</span> 消息<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>配置参数现在是 null，后面死信队列、延迟队列等会用到，如：</p><p>发布的消息优先级</p><p>发布的消息标识符 id</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 给消息赋予 优先级 ID 属性</span>
<span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">priority</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">messageId</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token constant">QUEUE_NAME</span><span class="token punctuation">,</span> properties<span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="消息消费者" tabindex="-1"><a class="header-anchor" href="#消息消费者" aria-hidden="true">#</a> 消息消费者</h3><p>创建一个类作为消费者，消费 RabbitMQ 队列的消息</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token punctuation">{</span>

    <span class="token comment">// 队列的名称</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">QUEUE_NAME</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 接收消息</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建连接工厂</span>
        <span class="token class-name">ConnectionFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">&quot;172.16.102.100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 声明 接收消息</span>
        <span class="token class-name">DeliverCallback</span> deliverCallback <span class="token operator">=</span> <span class="token punctuation">(</span>consumerTag<span class="token punctuation">,</span> message<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// 取消消息时的回调</span>
        <span class="token class-name">CancelCallback</span> cancelCallback <span class="token operator">=</span> consumerTag <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;消息消费被中断&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token doc-comment comment">/**
         * 消费者消费消息
         *  1.消费哪个队列
         *  2.消费成功之后是否要自动应答，true代表的是自动应答，false代表的是手动应答
         *  3.消费者未成功消费的回调
         *  4.消费者取消消费的回调
         */</span>
        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token constant">QUEUE_NAME</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> deliverCallback<span class="token punctuation">,</span> cancelCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>结果</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token constant">SLF4J</span><span class="token operator">:</span> <span class="token class-name">Failed</span> <span class="token keyword">to</span> <span class="token namespace">load</span> <span class="token keyword">class</span> <span class="token string">&quot;org.slf4j.impl.StaticLoggerBinder&quot;</span><span class="token punctuation">.</span>
<span class="token constant">SLF4J</span><span class="token operator">:</span> <span class="token class-name">Defaulting</span> <span class="token keyword">to</span> <span class="token namespace">no</span><span class="token operator">-</span>operation <span class="token punctuation">(</span><span class="token constant">NOP</span><span class="token punctuation">)</span> logger implementation
<span class="token constant">SLF4J</span><span class="token operator">:</span> <span class="token class-name">See</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span>org<span class="token operator">/</span>codes<span class="token punctuation">.</span>html#<span class="token class-name">StaticLoggerBinder</span> <span class="token keyword">for</span> further <span class="token class-name"><span class="token namespace">details<span class="token punctuation">.</span></span>
Hello</span><span class="token punctuation">,</span>world
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>值得一提的是，<code>basicConsume</code> 的参数中，第三个和第四个参数都是接口，所以需要实现该接口的方法</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span>队列名字<span class="token operator">/</span><span class="token class-name">String</span><span class="token punctuation">,</span> 是否自动签收<span class="token operator">/</span><span class="token keyword">boolean</span><span class="token punctuation">,</span> 消费时的回调<span class="token operator">/</span>接口类<span class="token punctuation">,</span> 无法消费的回调<span class="token operator">/</span>接口类<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_02、work-queues" tabindex="-1"><a class="header-anchor" href="#_02、work-queues" aria-hidden="true">#</a> 02、Work Queues</h2><p>Work Queues 是工作队列（又称任务队列）的主要思想是避免立即执行资源密集型任务，而不得不等待它完成。相反我们安排任务在之后执行。我们把任务封装为消息并将其发送到队列。在后台运行的工作进程将弹出任务并最终执行作业。当有多个工作线程时，这些工作线程将一起处理这些任务。</p><h3 id="轮询消费" tabindex="-1"><a class="header-anchor" href="#轮询消费" aria-hidden="true">#</a> 轮询消费</h3><p>轮询消费消息指的是轮流消费消息，即每个工作队列都会获取一个消息进行消费，并且获取的次数按照顺序依次往下轮流。</p><p>案例中生产者叫做 Task，一个消费者就是一个工作队列，启动两个工作队列消费消息，这个两个工作队列会以轮询的方式消费消息。</p><p><img src="`+o+`" alt="image"></p><h3 id="轮询案例" tabindex="-1"><a class="header-anchor" href="#轮询案例" aria-hidden="true">#</a> 轮询案例</h3><ul><li>首先把 RabbitMQ 的配置参数封装为一个工具类：<code>RabbitMqUtils</code></li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/** 
 * 此类为连接工厂创建信道的工具类
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RabbitMqUtils</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Channel</span> <span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">{</span>

        <span class="token comment">//创建一个连接工厂</span>
        <span class="token class-name">ConnectionFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//工厂IP 连接RabbitMQ对列</span>
        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">&quot;172.16.102.100&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//用户名</span>
        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//密码</span>
        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//创建连接</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取信道</span>
        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> channel<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>创建两个工作队列，并且启动</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Worker01</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 队列名称
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">QUEUE_NAME</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 接收消息</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> <span class="token class-name">RabbitMqUtils</span><span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 消息的接收</span>
        <span class="token class-name">DeliverCallback</span> deliverCallback <span class="token operator">=</span> <span class="token punctuation">(</span>consumerTag<span class="token punctuation">,</span> message<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;接收到的消息：&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// 消息接收被取消时回调</span>
        <span class="token class-name">CancelCallback</span> cancelCallback <span class="token operator">=</span> <span class="token punctuation">(</span>consumerTag<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>consumerTag <span class="token operator">+</span> <span class="token string">&quot;消息取消消费者的回调逻辑！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;c2等待接收消息......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token constant">QUEUE_NAME</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span> deliverCallback<span class="token punctuation">,</span> cancelCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建好一个工作队列，只需要以多线程方式启动两次该 main 函数即可，以 first、second 区别消息队列。</p><p>要开启多线程功能，首先启动该消息队列，然后如图开启多线程：</p><p><img src="`+l+'" alt="1658588553672"></p><p>两个工作队列都启动后</p><p><img src="'+i+`" alt="image"></p><ul><li>创建一个生产者，发送消息进程</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Task01</span> <span class="token punctuation">{</span>
    <span class="token comment">// 队列名称</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">QUEUE_NAME</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>

    <span class="token comment">// 发送大量的消息</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> <span class="token class-name">RabbitMqUtils</span><span class="token punctuation">.</span><span class="token function">getChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 队列的声明</span>
        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token constant">QUEUE_NAME</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 从控制台接收消息</span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>scanner<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> message <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token constant">QUEUE_NAME</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;发送消息完成：&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>结果演示</li></ul><p>通过程序执行发现生产者总共发送 4 个消息，消费者 first 和消费者 second 分别分得两个消息，并且是按照有序的一个接收一次消息</p><p><img src="`+u+'" alt="image"></p><h2 id="_03、web页面添加队列" tabindex="-1"><a class="header-anchor" href="#_03、web页面添加队列" aria-hidden="true">#</a> 03、Web页面添加队列</h2><p>进入自己的 RabbitMQ Web 页面，点击 Queues 菜单</p><p><img src="'+k+'" alt="image"></p><ol><li>点击 <code>Queues</code> 菜单</li><li>点击 <code>Add a new queue</code>，弹出下拉菜单</li><li>下方的很多参数可以进行选择（旁边有 ？的参数），如优先级（<code>Lazy mode</code>）、绑定死信队列（<code>Dead letter exchange/routing key</code>）</li><li>执行步骤 3 后，在 <code>Arguments</code> 的第一个文本框弹出对应的参数，类似于 Map 的 key</li><li>第二个文本框填写参数，类似于 Map 的 value</li><li>第三个是下拉菜单，选择 value 类型</li><li>点击 <code>Add queue</code>，添加队列</li></ol><blockquote><p>旁边有 ？的参数，就是 <code>channel.queueDeclare(队列名/String, 持久化/boolean, 共享消费/boolean, 自动删除/boolean, 配置参数/Map);</code> 或者 <code>channel.basicPublish(交换机名/String, 队列名/String, 配置参数/Map, 消息/String);</code> 的参数：配置参数/Map 的 key</p></blockquote>',65),m=[r];function v(b,g){return s(),a("div",null,m)}const y=n(d,[["render",v],["__file","四、RabbitMQ入门案例.html.vue"]]);export{y as default};
