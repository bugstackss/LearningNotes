import{_ as e}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as a,c as s,a as n}from"./app.9b10ba0a.js";const o="/assets/image-20230416204906112.215539b1.png",i="/assets/image-20230416204955771.086a139f.png",t="/assets/image-20230416205038933.97443fed.png",r={},p=n(`<h2 id="_01、本地模式安装" tabindex="-1"><a class="header-anchor" href="#_01、本地模式安装" aria-hidden="true">#</a> 01、本地模式安装</h2><h3 id="_1-安装前准备" tabindex="-1"><a class="header-anchor" href="#_1-安装前准备" aria-hidden="true">#</a> <strong>1）</strong> <em><strong>*安装前准备*</strong></em></h3><p>（1） 安装 JDK</p><p>（2） 拷贝 apache-zookeeper-3.5.7-bin.tar.gz 安装包到 Linux 系统下</p><p>（3）解压到指定目录</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> apache-zookeeper-3.5.7- bin.tar.gz <span class="token parameter variable">-C</span> /opt/module/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>（4）修改名称</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mv</span>	apache-zookeeper-3.5.7 zookeeper-3.5.7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-配置修改" tabindex="-1"><a class="header-anchor" href="#_2-配置修改" aria-hidden="true">#</a> <strong>2）</strong> <em><strong>*配置修改*</strong></em></h3><p>（1）将/opt/module/zookeeper-3.5.7/conf 这个路径下的 zoo_sample.cfg 修改为 zoo.cfg</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mv</span> zoo_sample.cfg zoo.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>（2） 打开zoo.cfg 文件，修改 dataDir 路径：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> zoo.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>修改如下内容：</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">dataDir</span><span class="token punctuation">=</span><span class="token value attr-value">/opt/module/zookeeper-3.5.7/zkData</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>（3） 在/opt/module/zookeeper-3.5.7/这个目录上创建 zkData 文件夹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> zkData
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-操作-zookeeper" tabindex="-1"><a class="header-anchor" href="#_3-操作-zookeeper" aria-hidden="true">#</a> <strong>3）</strong> <em><strong>*操作*</strong></em> <em><strong>*Zookeeper*</strong></em></h3><p>（1）启动zookeeper</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost zookeeper-3.5.7<span class="token punctuation">]</span><span class="token comment"># ./bin/zkServer.sh start</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>（2）查看进程是否启动</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost zookeeper-3.5.7<span class="token punctuation">]</span><span class="token comment"># jps</span>
<span class="token number">8395</span> Jps
<span class="token number">8364</span> QuorumPeerMain
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（3）查看状态</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost zookeeper-3.5.7<span class="token punctuation">]</span><span class="token comment"># ./bin/zkServer.sh status</span>
ZooKeeper JMX enabled by default
Using config: /opt/zookeeper/zookeeper-3.5.7/bin/<span class="token punctuation">..</span>/conf/zoo.cfg
Client port found: <span class="token number">2181</span>. Client address: localhost.
Mode: standalone
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>（4）启动客户端</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost zookeeper-3.5.7<span class="token punctuation">]</span><span class="token comment"># ./bin/zkCli.sh</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>（5）退出客户端</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">]</span> quit
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>（6）停止Zookeeper</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost zookeeper-3.5.7<span class="token punctuation">]</span><span class="token comment"># ./bin/zkServer.sh stop</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_02、配置参数解读" tabindex="-1"><a class="header-anchor" href="#_02、配置参数解读" aria-hidden="true">#</a> 02、配置参数解读</h2><p>Zookeeper中的配置文件zoo.cfg中参数含义解读如下：</p><p><strong>1）tickTime = 2000：通信心跳时间，Zookeeper服务器与客户端心跳时间，单位毫秒</strong></p><p><img src="`+o+'" alt="image-20230416204906112"></p><p><strong>2）initLimit = 10：LF初始通信时限</strong></p><p><img src="'+i+'" alt="image-20230416204955771"></p><p>Leader和Follower<code>初始连接</code>时能容忍的最多心跳数（tickTime的数量）</p><p><strong>3）syncLimit = 5：LF同步通信时限</strong></p><p><img src="'+t+'" alt="image-20230416205038933"></p><p>Leader和Follower之间通信时间如果超过syncLimit * tickTime，Leader认为Follwer死掉，从服务器列表中删除Follwer。</p><p><strong>4） dataDir：保存Zookeeper中的数据</strong></p><p>注意：默认的tmp目录，容易被Linux系统定期删除，所以一般不用默认的tmp目录。</p><p><strong>5）clientPort = 2181：客户端连接端口，通常不做修改。</strong></p>',43),l=[p];function d(c,u){return a(),s("div",null,l)}const g=e(r,[["render",d],["__file","二、Zookeeper本地安装.html.vue"]]);export{g as default};
