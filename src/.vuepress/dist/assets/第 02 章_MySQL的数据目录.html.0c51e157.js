import{_ as s}from"./_plugin-vue_export-helper.cdc0426e.js";import{o as n,c as a,a as e}from"./app.9b10ba0a.js";const l="/assets/image-20230309002554771.010b5913.png",r="/assets/image-20230309002616921.12c860a1.png",p={},m=e(`<h1 id="第-02-章-mysql的数据目录" tabindex="-1"><a class="header-anchor" href="#第-02-章-mysql的数据目录" aria-hidden="true">#</a> 第 02 章_MySQL的数据目录</h1><h2 id="_1-mysql-8-的主要目录结构" tabindex="-1"><a class="header-anchor" href="#_1-mysql-8-的主要目录结构" aria-hidden="true">#</a> 1. MySQL 8 的主要目录结构</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@atguigu01 ~<span class="token punctuation">]</span><span class="token comment"># find / -name mysql</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装好MySQL 8 之后，我们查看如下的目录结构：</p><h3 id="_1-1-数据库文件的存放路径" tabindex="-1"><a class="header-anchor" href="#_1-1-数据库文件的存放路径" aria-hidden="true">#</a> 1. 1 数据库文件的存放路径</h3><p><strong>MySQL数据库文件的存放路径：/var/lib/mysql/</strong></p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>mysql&gt; show variables like &#39;datadir&#39;;
+---------------+-----------------+
| Variable_name | Value |
+---------------+-----------------+
| datadir | /var/lib/mysql/ |
+---------------+-----------------+
1 row in set (0.04 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从结果中可以看出，在我的计算机上MySQL的数据目录就是<code>/var/lib/mysql/</code>。</p><h3 id="_1-2-相关命令目录" tabindex="-1"><a class="header-anchor" href="#_1-2-相关命令目录" aria-hidden="true">#</a> 1. 2 相关命令目录</h3><p><strong>相关命令目录：/usr/bin（mysqladmin、mysqlbinlog、mysqldump等命令）和/usr/sbin。</strong></p><p><img src="`+l+'" alt="image-20230309002554771"></p><h3 id="_1-3-配置文件目录" tabindex="-1"><a class="header-anchor" href="#_1-3-配置文件目录" aria-hidden="true">#</a> 1. 3 配置文件目录</h3><p><strong>配置文件目录：/usr/share/mysql-8.0（命令及配置文件），/etc/mysql（如my.cnf）</strong></p><p><img src="'+r+`" alt="image-20230309002616921"></p><h2 id="_2-数据库和文件系统的关系" tabindex="-1"><a class="header-anchor" href="#_2-数据库和文件系统的关系" aria-hidden="true">#</a> 2. 数据库和文件系统的关系</h2><h3 id="_2-1-查看默认数据库" tabindex="-1"><a class="header-anchor" href="#_2-1-查看默认数据库" aria-hidden="true">#</a> 2. 1 查看默认数据库</h3><p>查看一下在我的计算机上当前有哪些数据库：</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>mysql&gt; SHOW DATABASES;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>可以看到有 4 个数据库是属于MySQL自带的系统数据库。</p><ul><li><p><code>mysql</code></p><p>MySQL 系统自带的核心数据库，它存储了MySQL的用户账户和权限信息，一些存储过程、事件的定义信息，一些运行过程中产生的日志信息，一些帮助信息以及时区信息等。</p></li><li><p><code>information_schema</code></p><p>MySQL 系统自带的数据库，这个数据库保存着MySQL服务器<code>维护的所有其他数据库的信息</code>，比如有哪些表、哪些视图、哪些触发器、哪些列、哪些索引。这些信息并不是真实的用户数据，而是一些描述性信息，有时候也称之为<code>元数据</code>。在系统数据库<code>information_schema</code>中提供了一些以<code>innodb_sys</code>开头的表，用于表示内部系统表。</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>mysql&gt; USE information_schema;
Database changed

mysql&gt; SHOW TABLES LIKE &#39;innodb_sys%&#39;;
+--------------------------------------------+
| Tables_in_information_schema (innodb_sys%) |
+--------------------------------------------+
| INNODB_SYS_DATAFILES |
| INNODB_SYS_VIRTUAL |
| INNODB_SYS_INDEXES |
| INNODB_SYS_TABLES |
| INNODB_SYS_FIELDS |
| INNODB_SYS_TABLESPACES |
| INNODB_SYS_FOREIGN_COLS |
| INNODB_SYS_COLUMNS |
| INNODB_SYS_FOREIGN |
| INNODB_SYS_TABLESTATS |
+--------------------------------------------+
10 rows in set (0.00 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>performance_schema</code></p><p>MySQL 系统自带的数据库，这个数据库里主要保存MySQL服务器运行过程中的一些状态信息，可以用来<code>监控 MySQL 服务的各类性能指标</code>。包括统计最近执行了哪些语句，在执行过程的每个阶段都花费了多长时间，内存的使用情况等信息。</p></li><li><p><code>sys</code></p><p>MySQL 系统自带的数据库，这个数据库主要是通过<code>视图</code>的形式把<code>information_schema</code>和<code>performance_schema</code>结合起来，帮助系统管理员和开发人员监控 MySQL 的技术性能。</p></li></ul><h3 id="_2-2-数据库在文件系统中的表示" tabindex="-1"><a class="header-anchor" href="#_2-2-数据库在文件系统中的表示" aria-hidden="true">#</a> 2. 2 数据库在文件系统中的表示</h3><p>看一下我的计算机上的数据目录下的内容：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@atguigu01 mysql<span class="token punctuation">]</span><span class="token comment"># cd /var/lib/mysql</span>
<span class="token punctuation">[</span>root@atguigu01 mysql<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">189980</span>
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">56</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 auto.cnf
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">179</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">820</span> <span class="token number">7</span> 月  <span class="token number">28</span> 01 :00 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">179</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">14</span> :08 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">582</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">16</span> :47 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">179</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">16</span> :51 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">179</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">16</span> :56 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">179</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">17</span> :37 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">24555</span> <span class="token number">7</span> 月  <span class="token number">30</span> 00 :28 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">179</span> <span class="token number">8</span> 月 <span class="token number">1</span> <span class="token number">11</span> :57 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">156</span> <span class="token number">8</span> 月 <span class="token number">1</span> <span class="token number">23</span> :21 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">156</span> <span class="token number">8</span> 月 <span class="token number">2</span> 09 :25 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">1469</span> <span class="token number">8</span> 月 <span class="token number">4</span> 01 :40 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">156</span> <span class="token number">8</span> 月 <span class="token number">6</span> 00 :24 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">179</span> <span class="token number">8</span> 月 <span class="token number">6</span> 08 :43 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">156</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :56 binlog.
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">240</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :56 binlog.index
-rw-------. <span class="token number">1</span> mysql mysql <span class="token number">1676</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 ca-key.pem
-rw-r--r--. <span class="token number">1</span> mysql mysql <span class="token number">1112</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 ca.pem
-rw-r--r--. <span class="token number">1</span> mysql mysql <span class="token number">1112</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 client-cert.pem
-rw-------. <span class="token number">1</span> mysql mysql <span class="token number">1676</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 client-key.pem
drwxr-x---. <span class="token number">2</span> mysql mysql <span class="token number">4096</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">16</span> :34 dbtest
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">196608</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :58 <span class="token comment">#ib_16384_0.dblwr</span>
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">8585216</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 <span class="token comment">#ib_16384_1.dblwr</span>
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">3486</span> <span class="token number">8</span> 月 <span class="token number">6</span> 08 :43 ib_buffer_pool
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">12582912</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :56 ibdata
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">50331648</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :58 ib_logfile
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">50331648</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 ib_logfile
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">12582912</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :56 ibtmp
drwxr-x---. <span class="token number">2</span> mysql mysql <span class="token number">4096</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :56 <span class="token comment">#innodb_temp</span>
drwxr-x---. <span class="token number">2</span> mysql mysql <span class="token number">4096</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 mysql
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">26214400</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :56 mysql.ibd
srwxrwxrwx. <span class="token number">1</span> mysql mysql <span class="token number">0</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :56 mysql.sock
-rw-------. <span class="token number">1</span> mysql mysql <span class="token number">5</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :56 mysql.sock.lock
drwxr-x---. <span class="token number">2</span> mysql mysql <span class="token number">4096</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 performance_schema
-rw-------. <span class="token number">1</span> mysql mysql <span class="token number">1680</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 private_key.pem
-rw-r--r--. <span class="token number">1</span> mysql mysql <span class="token number">452</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 public_key.pem
-rw-r--r--. <span class="token number">1</span> mysql mysql <span class="token number">1112</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 server-cert.pem
-rw-------. <span class="token number">1</span> mysql mysql <span class="token number">1680</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 server-key.pem
drwxr-x---. <span class="token number">2</span> mysql mysql <span class="token number">4096</span> <span class="token number">7</span> 月  <span class="token number">28</span> 00 :27 sys
drwxr-x---. <span class="token number">2</span> mysql mysql <span class="token number">4096</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">23</span> :10 temp
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">16777216</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :58 undo_001
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">16777216</span> <span class="token number">8</span> 月 <span class="token number">6</span> <span class="token number">10</span> :58 undo_002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个数据目录下的文件和子目录比较多，除了<code>information_schema</code>这个系统数据库外，其他的数据库在<code>数据目录</code>下都有对应的子目录。</p><p>以我的<code>temp</code>数据库为例，在MySQL 5. 7 中打开：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@atguigu02 mysql<span class="token punctuation">]</span><span class="token comment"># cd ./temp</span>
<span class="token punctuation">[</span>root@atguigu02 temp<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">1144</span>
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">8658</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 countries.frm
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">114688</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 countries.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">61</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 db.opt
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">8716</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 departments.frm
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">147456</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 departments.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">3017</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 emp_details_view.frm
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">8982</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 employees.frm
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">180224</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 employees.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">8660</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 job_grades.frm
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">98304</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 job_grades.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">8736</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 job_history.frm
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">147456</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 job_history.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">8688</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 jobs.frm
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">114688</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 jobs.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">8790</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 locations.frm
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">131072</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 locations.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">8614</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 regions.frm
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">114688</span> <span class="token number">8</span> 月  <span class="token number">18</span> <span class="token number">11</span> :32 regions.ibd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在MySQL 8. 0 中打开：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@atguigu01 mysql<span class="token punctuation">]</span><span class="token comment"># cd ./temp</span>
<span class="token punctuation">[</span>root@atguigu01 temp<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">1080</span>
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">131072</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">23</span> :10 countries.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">163840</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">23</span> :10 departments.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">196608</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">23</span> :10 employees.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">114688</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">23</span> :10 job_grades.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">163840</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">23</span> :10 job_history.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">131072</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">23</span> :10 jobs.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">147456</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">23</span> :10 locations.ibd
-rw-r-----. <span class="token number">1</span> mysql mysql <span class="token number">131072</span> <span class="token number">7</span> 月  <span class="token number">29</span> <span class="token number">23</span> :10 regions.ibd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-表在文件系统中的表示" tabindex="-1"><a class="header-anchor" href="#_2-3-表在文件系统中的表示" aria-hidden="true">#</a> 2. 3 表在文件系统中的表示</h3><h4 id="_2-3-1-innodb存储引擎模式" tabindex="-1"><a class="header-anchor" href="#_2-3-1-innodb存储引擎模式" aria-hidden="true">#</a> 2. 3. 1 InnoDB存储引擎模式</h4><p><strong>1.表结构</strong></p><p>为了保存表结构，<code>InnoDB</code>在<code>数据目录</code>下对应的数据库子目录下创建了一个专门用于<code>描述表结构的文件</code>，文件名是这样：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>表名.frm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>比方说我们在atguigu数据库下创建一个名为test的表：</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>mysql&gt; USE atguigu;
Database changed

mysql&gt; CREATE TABLE test (
-&gt; c1 INT
-&gt; );
Query OK, 0 rows affected (0.03 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>那在数据库<code>atguigu</code>对应的子目录下就会创建一个名为<code>test.frm</code>的用于描述表结构的文件。.frm文件的格式在不同的平台上都是相同的。这个后缀名为.frm是以<code>二进制格式</code>存储的，我们直接打开是乱码的。</p><p><strong>2.表中数据和索引</strong></p><p><strong>① 系统表空间（system tablespace）</strong></p><p>默认情况下，InnoDB会在数据目录下创建一个名为<code>ibdata1</code>、大小为<code>12M</code>的文件，这个文件就是对应的<code>系统表空间</code>在文件系统上的表示。怎么才 12 M？注意这个文件是<code>自扩展文件</code>，当不够用的时候它会自己增加文件大小。</p><p>当然，如果你想让系统表空间对应文件系统上多个实际文件，或者仅仅觉得原来的<code>ibdata1</code>这个文件名难听，那可以在MySQL启动时配置对应的文件路径以及它们的大小，比如我们这样修改一下my.cnf 配置文件：</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>[server]
innodb_data_file_path=data1:512M;data2:512M:autoextend
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>② 独立表空间(file-per-table tablespace)</strong></p><p>在MySQL5.6.6以及之后的版本中，InnoDB并不会默认的把各个表的数据存储到系统表空间中，而是为<code>每一个表建立一个独立表空间</code>，也就是说我们创建了多少个表，就有多少个<code>独立表空间</code>。使用独立表空间来存储表数据的话，会在该表所属数据库对应的子目录下创建一个表示该独立表空间的文件，文件名和表名相同，只不过添加了一个<code>.ibd</code>的扩展名而已，所以完整的文件名称长这样：</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>表名.ibd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>比如：我们使用了<code>独立表空间</code>去存储<code>atguigu</code>数据库下的<code>test</code>表的话，那么在该表所在数据库对应的<code>atguigu</code>目录下会为<code>test</code>表创建这两个文件：</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>test.frm
test.ibd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>其中<code>test.ibd</code>文件就用来存储<code>test</code>表中的数据和索引。</p><p><strong>③ 系统表空间与独立表空间的设置</strong></p><p>我们可以自己指定使用<code>系统表空间</code>还是<code>独立表空间</code>来存储数据，这个功能由启动参数<code>innodb_file_per_table</code>控制，比如说我们想刻意将表数据都存储到<code>系统表空间</code>时，可以在启动</p><p>MySQL服务器的时候这样配置：</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>[server]
innodb_file_per_table=0 # 0：代表使用系统表空间； 1 ：代表使用独立表空间
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>默认情况：</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>mysql&gt; show variables like &#39;innodb_file_per_table&#39;;
+-----------------------+-------+
| Variable_name | Value |
+-----------------------+-------+
| innodb_file_per_table | ON |
+-----------------------+-------+
1 row in set (0.01 sec)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>④ 其他类型的表空间</strong></p><p>随着MySQL的发展，除了上述两种老牌表空间之外，现在还新提出了一些不同类型的表空间，比如通用表空间（general tablespace）、临时表空间（temporary tablespace）等。</p><h4 id="_2-3-2-myisam存储引擎模式" tabindex="-1"><a class="header-anchor" href="#_2-3-2-myisam存储引擎模式" aria-hidden="true">#</a> 2. 3. 2 MyISAM存储引擎模式</h4><ol><li><strong>表结构</strong></li></ol><p>在存储表结构方面，<code>MyISAM</code>和<code>InnoDB</code>一样，也是在<code>数据目录</code>下对应的数据库子目录下创建了一个专门用于描述表结构的文件：</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>表名.frm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li><strong>表中数据和索引</strong></li></ol><p>在MyISAM中的索引全部都是<code>二级索引</code>，该存储引擎的<code>数据和索引是分开存放的</code>。所以在文件系统中也是使用不同的文件来存储数据文件和索引文件，同时表数据都存放在对应的数据库子目录下。假如<code>test</code>表使用<code>MyISAM</code>存储引擎的话，那么在它所在数据库对应的<code>atguigu</code>目录下会为<code>test</code>表创建这三个文件：</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>test.frm 存储表结构
test.MYD 存储数据 (MYData)
test.MYI 存储索引 (MYIndex)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>举例：创建一个<code>MyISAM</code> 表，使用<code>ENGINE</code> 选项显式指定引擎。因为<code>InnoDB</code>是默认引擎。</p><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>CREATE TABLE \`student_myisam\` (
\`id\` bigint NOT NULL AUTO_INCREMENT,
\`name\` varchar( 64 ) DEFAULT NULL,
\`age\` int DEFAULT NULL,
\`sex\` varchar( 2 ) DEFAULT NULL,
PRIMARY KEY (\`id\`)
)ENGINE=MYISAM AUTO_INCREMENT= 0 DEFAULT CHARSET=utf8mb3;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-小结" tabindex="-1"><a class="header-anchor" href="#_2-4-小结" aria-hidden="true">#</a> 2. 4 小结</h3><p>举例：<code>数据库a</code>，<code>表b</code>。</p><p>1 、如果表b采用<code>InnoDB</code>，data\\a中会产生 1 个或者 2 个文件：</p><ul><li><code>b.frm</code> ：描述表结构文件，字段长度等</li><li>如果采用<code>系统表空间</code>模式的，数据信息和索引信息都存储在<code>ibdata1</code>中</li><li>如果采用<code>独立表空间</code>存储模式，data\\a中还会产生<code>b.ibd</code>文件（存储数据信息和索引信息）</li></ul><p>此外：</p><p><strong>① MySQL5.7 中会在data/a的目录下生成<code>db.opt</code>文件用于保存数据库的相关配置。比如：字符集、比较规则。而MySQL8.0不再提供db.opt文件。</strong></p><p><strong>② MySQL8.0中不再单独提供b.frm，而是合并在b.ibd文件中。</strong></p><p>2 、如果表b采用<code>MyISAM</code>，data\\a中会产生 3 个文件：</p><ul><li><p>MySQL5.7 中：<code>b.frm</code>：描述表结构文件，字段长度等。</p><p>MySQL8.0 中 <code>b.xxx.sdi</code>：描述表结构文件，字段长度等</p></li><li><p><code>b.MYD</code>(MYData)：数据信息文件，存储数据信息(如果采用独立表存储模式)</p></li><li><p><code>b.MYI</code>(MYIndex)：存放索引信息文件</p></li></ul>`,73),c=[m];function i(d,o){return n(),a("div",null,c)}const b=s(p,[["render",i],["__file","第 02 章_MySQL的数据目录.html.vue"]]);export{b as default};
