<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.53" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://Ragnarokoo.github.io/LearningNotes/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html"><meta property="og:site_name" content="ğŸ“šå…¨æ ˆå¼€å‘å­¦ä¹ æŒ‡å—"><meta property="og:title" content="åä¸€ã€RabbitMQé›†ç¾¤"><meta property="og:description" content="01ã€clustering ä½¿ç”¨é›†ç¾¤çš„åŸå›  æœ€å¼€å§‹æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å®‰è£…åŠè¿è¡ŒRabbitMQæœåŠ¡ï¼Œä¸è¿‡è¿™äº›æ˜¯å•æœºç‰ˆçš„ï¼Œæ— æ³•æ»¡è¶³ç›®å‰çœŸå®åº”ç”¨çš„è¦æ±‚ã€‚å¦‚æœRabbitMQæœåŠ¡å™¨é‡åˆ°å†…å­˜å´©æºƒã€æœºå™¨æ‰ç”µæˆ–è€…ä¸»æ¿æ•…éšœç­‰æƒ…å†µï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå•å°RabbitMQæœåŠ¡å™¨å¯ä»¥æ»¡è¶³æ¯ç§’1000æ¡æ¶ˆæ¯çš„ååé‡ï¼Œé‚£ä¹ˆå¦‚æœåº”ç”¨éœ€è¦RabbitMQæœåŠ¡æ»¡è¶³æ¯ç§’10ä¸‡æ¡æ¶ˆæ¯çš„ååé‡å‘¢ï¼Ÿè´­..."><meta property="og:type" content="article"><meta property="og:image" content="https://Ragnarokoo.github.io/LearningNotes/"><meta property="og:updated_time" content="2023-05-31T09:16:41.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="åä¸€ã€RabbitMQé›†ç¾¤"><meta property="article:tag" content="rabbitmq"><meta property="article:tag" content="æ¶ˆæ¯ä¸­é—´ä»¶"><meta property="article:tag" content="MQ"><meta property="article:modified_time" content="2023-05-31T09:16:41.000Z"><link rel="icon" href="/site_logo.svg"><title>åä¸€ã€RabbitMQé›†ç¾¤ | ğŸ“šå…¨æ ˆå¼€å‘å­¦ä¹ æŒ‡å—</title><meta name="description" content="01ã€clustering ä½¿ç”¨é›†ç¾¤çš„åŸå›  æœ€å¼€å§‹æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å®‰è£…åŠè¿è¡ŒRabbitMQæœåŠ¡ï¼Œä¸è¿‡è¿™äº›æ˜¯å•æœºç‰ˆçš„ï¼Œæ— æ³•æ»¡è¶³ç›®å‰çœŸå®åº”ç”¨çš„è¦æ±‚ã€‚å¦‚æœRabbitMQæœåŠ¡å™¨é‡åˆ°å†…å­˜å´©æºƒã€æœºå™¨æ‰ç”µæˆ–è€…ä¸»æ¿æ•…éšœç­‰æƒ…å†µï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå•å°RabbitMQæœåŠ¡å™¨å¯ä»¥æ»¡è¶³æ¯ç§’1000æ¡æ¶ˆæ¯çš„ååé‡ï¼Œé‚£ä¹ˆå¦‚æœåº”ç”¨éœ€è¦RabbitMQæœåŠ¡æ»¡è¶³æ¯ç§’10ä¸‡æ¡æ¶ˆæ¯çš„ååé‡å‘¢ï¼Ÿè´­...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style.bc8b6d7c.css" as="style" /><link rel="stylesheet" href="/assets/style.bc8b6d7c.css" />
    <link rel="modulepreload" href="/assets/app.9b10ba0a.js"><link rel="modulepreload" href="/assets/åä¸€ã€RabbitMQé›†ç¾¤.html.39378341.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/åä¸€ã€RabbitMQé›†ç¾¤.html.0c918d9a.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/site_logo.svg" alt="ğŸ“šå…¨æ ˆå¼€å‘å­¦ä¹ æŒ‡å—"><!----><span class="site-name hide-in-pad">ğŸ“šå…¨æ ˆå¼€å‘å­¦ä¹ æŒ‡å—</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/quicknav/" class="nav-link" aria-label="å¿«é€Ÿå¯¼èˆª"><span class="icon iconfont icon-navigation"></span>å¿«é€Ÿå¯¼èˆª<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/" class="nav-link" aria-label="åšå®¢ä¸»é¡µ"><span class="icon iconfont icon-blog"></span>åšå®¢ä¸»é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/notes/" class="nav-link active" aria-label="Javaå­¦ä¹ æ•™ç¨‹"><span class="icon iconfont icon-java"></span>Javaå­¦ä¹ æ•™ç¨‹<!----></a></div><div class="nav-item hide-in-mobile"><a href="/web/" class="nav-link" aria-label="webå­¦ä¹ æ•™ç¨‹"><span class="icon iconfont icon-note"></span>webå­¦ä¹ æ•™ç¨‹<!----></a></div><div class="nav-item hide-in-mobile"><a href="/springcloud/" class="nav-link" aria-label="SpringCloudå­¦ä¹ æ•™ç¨‹"><span class="icon iconfont icon-cache"></span>SpringCloudå­¦ä¹ æ•™ç¨‹<!----></a></div><div class="nav-item hide-in-mobile"><a href="/distributed/" class="nav-link" aria-label="åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„"><span class="icon iconfont icon-read"></span>åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="èµ„æºå®åº“"><span class="title"><span class="icon iconfont icon-advance"></span>èµ„æºå®åº“</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/resources/books/" class="nav-link" aria-label="ä¹¦ç±èµ„æº"><span class="icon iconfont icon-animation"></span>ä¹¦ç±èµ„æº<!----></a></li><li class="dropdown-item"><a href="/resources/videos/" class="nav-link" aria-label="å½±éŸ³èµ„æº"><span class="icon iconfont icon-play"></span>å½±éŸ³èµ„æº<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/Ragnarokoo/LearningNotes" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢æœ¬ç«™" autocomplete="off" spellcheck="false" value><!----></form><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-java"></span><span class="title">Java Languageä¸“æ </span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-IO"></span><span class="title">Javaç½‘ç»œç¼–ç¨‹NIO</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-community"></span><span class="title">JDBCæ•°æ®åº“è¿æ¥æŠ€æœ¯</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-categoryselected"></span><span class="title">JavaWeb</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-array"></span><span class="title">SSM Framework</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-geometry"></span><span class="title">SpringData</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-type"></span><span class="title">SpringBoot</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-module"></span><span class="title">mybatisplus</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-operate"></span><span class="title">æ„å»ºå·¥å…·&amp;äº‘åŸç”ŸDevops</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-mysql"></span><span class="title">æ•°æ®åº“ä»¥åŠè°ƒä¼˜ç­–ç•¥</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-quote"></span><span class="title">æ¶ˆæ¯ä¸­é—´ä»¶</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-blog"></span><span class="title">RabbitMQ</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/notes/mq/rabbitmq/%E4%B8%80%E3%80%81MQ%E7%9A%84%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5.html" class="nav-link sidebar-link sidebar-page" aria-label="ä¸€ã€MQçš„ç›¸å…³æ¦‚å¿µ"><!---->ä¸€ã€MQçš„ç›¸å…³æ¦‚å¿µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/mq/rabbitmq/%E4%BA%8C%E3%80%81RabbitMQ%E4%BB%8B%E7%BB%8D.html" class="nav-link sidebar-link sidebar-page" aria-label="äºŒã€RabbitMQä»‹ç»"><!---->äºŒã€RabbitMQä»‹ç»<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/mq/rabbitmq/%E4%B8%89%E3%80%81RabbitMQ%E5%AE%89%E8%A3%85.html" class="nav-link sidebar-link sidebar-page" aria-label="ä¸‰ã€RabbitMQå®‰è£…"><!---->ä¸‰ã€RabbitMQå®‰è£…<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/mq/rabbitmq/%E5%9B%9B%E3%80%81RabbitMQ%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="å››ã€RabbitMQå…¥é—¨æ¡ˆä¾‹"><!---->å››ã€RabbitMQå…¥é—¨æ¡ˆä¾‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/mq/rabbitmq/%E4%BA%94%E3%80%81RabbitMQ%E6%B6%88%E6%81%AF%E5%BA%94%E7%AD%94%E4%B8%8E%E5%8F%91%E5%B8%83.html" class="nav-link sidebar-link sidebar-page" aria-label="äº”ã€RabbitMQæ¶ˆæ¯åº”ç­”ä¸å‘å¸ƒ"><!---->äº”ã€RabbitMQæ¶ˆæ¯åº”ç­”ä¸å‘å¸ƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/mq/rabbitmq/%E5%85%AD%E3%80%81RabbitMQ%E4%BA%A4%E6%8D%A2%E6%9C%BA.html" class="nav-link sidebar-link sidebar-page" aria-label="å…­ã€RabbitMQäº¤æ¢æœº"><!---->å…­ã€RabbitMQäº¤æ¢æœº<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/mq/rabbitmq/%E4%B8%83%E3%80%81RabbitMQ%E6%AD%BB%E4%BF%A1%E9%98%9F%E5%88%97.html" class="nav-link sidebar-link sidebar-page" aria-label="ä¸ƒã€RabbitMQæ­»ä¿¡é˜Ÿåˆ—"><!---->ä¸ƒã€RabbitMQæ­»ä¿¡é˜Ÿåˆ—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/mq/rabbitmq/%E5%85%AB%E3%80%81RabbitMQ%E5%BB%B6%E8%BF%9F%E9%98%9F%E5%88%97.html" class="nav-link sidebar-link sidebar-page" aria-label="å…«ã€RabbitMQå»¶è¿Ÿé˜Ÿåˆ—"><!---->å…«ã€RabbitMQå»¶è¿Ÿé˜Ÿåˆ—<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/mq/rabbitmq/%E4%B9%9D%E3%80%81RabbitMQ%E5%8F%91%E5%B8%83%E7%A1%AE%E8%AE%A4%E6%A8%A1%E5%BC%8F.html" class="nav-link sidebar-link sidebar-page" aria-label="ä¹ã€RabbitMQå‘å¸ƒç¡®è®¤æ¨¡å¼"><!---->ä¹ã€RabbitMQå‘å¸ƒç¡®è®¤æ¨¡å¼<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/mq/rabbitmq/%E5%8D%81%E3%80%81RabbitMQ%E5%85%B6%E4%BB%96%E7%9F%A5%E8%AF%86%E7%82%B9.html" class="nav-link sidebar-link sidebar-page" aria-label="åã€RabbitMQå…¶ä»–çŸ¥è¯†ç‚¹"><!---->åã€RabbitMQå…¶ä»–çŸ¥è¯†ç‚¹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="åä¸€ã€RabbitMQé›†ç¾¤"><!---->åä¸€ã€RabbitMQé›†ç¾¤<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_01ã€clustering" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="01ã€clustering"><!---->01ã€clustering<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#ä½¿ç”¨é›†ç¾¤çš„åŸå› " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨é›†ç¾¤çš„åŸå› "><!---->ä½¿ç”¨é›†ç¾¤çš„åŸå› <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­å»ºæ­¥éª¤"><!---->æ­å»ºæ­¥éª¤<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_02ã€é•œåƒé˜Ÿåˆ—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="02ã€é•œåƒé˜Ÿåˆ—"><!---->02ã€é•œåƒé˜Ÿåˆ—<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#ä½¿ç”¨é•œåƒçš„åŸå› " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨é•œåƒçš„åŸå› "><!---->ä½¿ç”¨é•œåƒçš„åŸå› <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­å»ºæ­¥éª¤"><!---->æ­å»ºæ­¥éª¤<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_03ã€haproxy-keepaliveå®ç°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="03ã€Haproxy+Keepaliveå®ç°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡"><!---->03ã€Haproxy+Keepaliveå®ç°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ•´ä½“æ¶æ„å›¾" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ•´ä½“æ¶æ„å›¾"><!---->æ•´ä½“æ¶æ„å›¾<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#haproxyå®ç°è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Haproxyå®ç°è´Ÿè½½å‡è¡¡"><!---->Haproxyå®ç°è´Ÿè½½å‡è¡¡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­å»ºæ­¥éª¤"><!---->æ­å»ºæ­¥éª¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#keepalivedå®ç°åŒæœº-ä¸»å¤‡-çƒ­å¤‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Keepalivedå®ç°åŒæœº(ä¸»å¤‡)çƒ­å¤‡"><!---->Keepalivedå®ç°åŒæœº(ä¸»å¤‡)çƒ­å¤‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-3" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­å»ºæ­¥éª¤"><!---->æ­å»ºæ­¥éª¤<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_04ã€federation-exchange" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="04ã€Federation Exchange"><!---->04ã€Federation Exchange<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#ä½¿ç”¨å®ƒçš„åŸå› " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨å®ƒçš„åŸå› "><!---->ä½¿ç”¨å®ƒçš„åŸå› <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-4" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­å»ºæ­¥éª¤"><!---->æ­å»ºæ­¥éª¤<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_05ã€federation-queue" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="05ã€Federation Queue"><!---->05ã€Federation Queue<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#ä½¿ç”¨å®ƒçš„åŸå› -1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨å®ƒçš„åŸå› "><!---->ä½¿ç”¨å®ƒçš„åŸå› <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-5" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­å»ºæ­¥éª¤"><!---->æ­å»ºæ­¥éª¤<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_06ã€shovel" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="06ã€Shovel"><!---->06ã€Shovel<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#ä½¿ç”¨å®ƒçš„åŸå› -2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨å®ƒçš„åŸå› "><!---->ä½¿ç”¨å®ƒçš„åŸå› <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-6" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­å»ºæ­¥éª¤"><!---->æ­å»ºæ­¥éª¤<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-tool"></span><span class="title">è½¯ä»¶ä»¥åŠç¯å¢ƒé…ç½®</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-ability"></span><span class="title">Linuxæ“ä½œç³»ç»Ÿ</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-rank"></span><span class="title">JUCé«˜å¹¶å‘ç¼–ç¨‹</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-mount"></span><span class="title">æ·±å…¥äº†è§£Javaè™šæ‹Ÿæœº</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-view"></span><span class="title">GOF23ç§è®¾è®¡æ¨¡å¼</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-tag"></span><span class="title">æŠ€æœ¯è¦ç‚¹ä¸šåŠ¡ç¯‡</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->åä¸€ã€RabbitMQé›†ç¾¤</h1><div class="page-info"><span class="category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li><span class="category category5 clickable" role="navigation">rabbitmq</span></li></ul><meta property="articleSection" content="rabbitmq"></span><span aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li><span class="tag tag5 clickable" role="navigation">rabbitmq</span></li><li><span class="tag tag6 clickable" role="navigation">æ¶ˆæ¯ä¸­é—´ä»¶</span></li><li><span class="tag tag7 clickable" role="navigation">MQ</span></li></ul><meta property="keywords" content="rabbitmq,æ¶ˆæ¯ä¸­é—´ä»¶,MQ"></span><span class="reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 8 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT8M"></span><span class="author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://github.com/Ragnarokoo/" target="_blank" rel="noopener noreferrer">Ragnarok</a></span><span property="author" content="Ragnarok"></span></span><span class="date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-05-31T09:16:41.000Z"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_01ã€clustering" class="router-link-active router-link-exact-active toc-link level2">01ã€clustering</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#ä½¿ç”¨é›†ç¾¤çš„åŸå› " class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨é›†ç¾¤çš„åŸå› </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤" class="router-link-active router-link-exact-active toc-link level3">æ­å»ºæ­¥éª¤</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_02ã€é•œåƒé˜Ÿåˆ—" class="router-link-active router-link-exact-active toc-link level2">02ã€é•œåƒé˜Ÿåˆ—</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#ä½¿ç”¨é•œåƒçš„åŸå› " class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨é•œåƒçš„åŸå› </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-1" class="router-link-active router-link-exact-active toc-link level3">æ­å»ºæ­¥éª¤</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_03ã€haproxy-keepaliveå®ç°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active toc-link level2">03ã€Haproxy+Keepaliveå®ç°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ•´ä½“æ¶æ„å›¾" class="router-link-active router-link-exact-active toc-link level3">æ•´ä½“æ¶æ„å›¾</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#haproxyå®ç°è´Ÿè½½å‡è¡¡" class="router-link-active router-link-exact-active toc-link level3">Haproxyå®ç°è´Ÿè½½å‡è¡¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-2" class="router-link-active router-link-exact-active toc-link level3">æ­å»ºæ­¥éª¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#keepalivedå®ç°åŒæœº-ä¸»å¤‡-çƒ­å¤‡" class="router-link-active router-link-exact-active toc-link level3">Keepalivedå®ç°åŒæœº(ä¸»å¤‡)çƒ­å¤‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-3" class="router-link-active router-link-exact-active toc-link level3">æ­å»ºæ­¥éª¤</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_04ã€federation-exchange" class="router-link-active router-link-exact-active toc-link level2">04ã€Federation Exchange</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#ä½¿ç”¨å®ƒçš„åŸå› " class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨å®ƒçš„åŸå› </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-4" class="router-link-active router-link-exact-active toc-link level3">æ­å»ºæ­¥éª¤</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_05ã€federation-queue" class="router-link-active router-link-exact-active toc-link level2">05ã€Federation Queue</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#ä½¿ç”¨å®ƒçš„åŸå› -1" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨å®ƒçš„åŸå› </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-5" class="router-link-active router-link-exact-active toc-link level3">æ­å»ºæ­¥éª¤</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#_06ã€shovel" class="router-link-active router-link-exact-active toc-link level2">06ã€Shovel</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#ä½¿ç”¨å®ƒçš„åŸå› -2" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨å®ƒçš„åŸå› </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/mq/rabbitmq/%E5%8D%81%E4%B8%80%E3%80%81RabbitMQ%E9%9B%86%E7%BE%A4.html#æ­å»ºæ­¥éª¤-6" class="router-link-active router-link-exact-active toc-link level3">æ­å»ºæ­¥éª¤</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h2 id="_01ã€clustering" tabindex="-1"><a class="header-anchor" href="#_01ã€clustering" aria-hidden="true">#</a> 01ã€clustering</h2><h3 id="ä½¿ç”¨é›†ç¾¤çš„åŸå› " tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨é›†ç¾¤çš„åŸå› " aria-hidden="true">#</a> ä½¿ç”¨é›†ç¾¤çš„åŸå› </h3><p>æœ€å¼€å§‹æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å®‰è£…åŠè¿è¡ŒRabbitMQæœåŠ¡ï¼Œä¸è¿‡è¿™äº›æ˜¯å•æœºç‰ˆçš„ï¼Œæ— æ³•æ»¡è¶³ç›®å‰çœŸå®åº”ç”¨çš„è¦æ±‚ã€‚å¦‚æœRabbitMQæœåŠ¡å™¨é‡åˆ°å†…å­˜å´©æºƒã€æœºå™¨æ‰ç”µæˆ–è€…ä¸»æ¿æ•…éšœç­‰æƒ…å†µï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿå•å°RabbitMQæœåŠ¡å™¨å¯ä»¥æ»¡è¶³æ¯ç§’1000æ¡æ¶ˆæ¯çš„ååé‡ï¼Œé‚£ä¹ˆå¦‚æœåº”ç”¨éœ€è¦RabbitMQæœåŠ¡æ»¡è¶³æ¯ç§’10ä¸‡æ¡æ¶ˆæ¯çš„ååé‡å‘¢ï¼Ÿè´­ä¹°æ˜‚è´µçš„æœåŠ¡å™¨æ¥å¢å¼ºå•æœºRabbitMQåŠ¡çš„æ€§èƒ½æ˜¾å¾—æ‰è¥Ÿè§è‚˜ï¼Œæ­å»ºä¸€ä¸ªRabbitMQé›†ç¾¤æ‰æ˜¯è§£å†³å®é™…é—®é¢˜çš„å…³é”®ã€‚</p><h3 id="æ­å»ºæ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#æ­å»ºæ­¥éª¤" aria-hidden="true">#</a> æ­å»ºæ­¥éª¤</h3><ol><li>ä¿®æ”¹3å°æœºå™¨çš„ä¸»æœºåç§°</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span>	/etc/hostname
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>é…ç½®å„ä¸ªèŠ‚ç‚¹çš„hostsæ–‡ä»¶ï¼Œè®©å„ä¸ªèŠ‚ç‚¹éƒ½èƒ½äº’ç›¸è¯†åˆ«å¯¹æ–¹</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span>	/etc/hosts

<span class="token number">10.211</span>.55.74	node1
<span class="token number">10.211</span>.55.75	node2
<span class="token number">10.211</span>.55.76	node3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/image-20230410222125692.1b89b35c.png" alt="image-20230410222125692"></p><ol start="3"><li>ä»¥ç¡®ä¿å„ä¸ªèŠ‚ç‚¹çš„cookieæ–‡ä»¶ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªå€¼</li></ol><p>åœ¨node1ä¸Šæ‰§è¡Œè¿œç¨‹æ“ä½œå‘½ä»¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">scp</span> /var/lib/rabbitmq/.erlang.cookie root@node2:/var/lib/rabbitmq/.erlang.cookie

<span class="token function">scp</span>
/var/lib/rabbitmq/.erlang.cookie
root@node3:/var/lib/rabbitmq/.erlang.cookie
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>å¯åŠ¨RabbitMQæœåŠ¡,é¡ºå¸¦å¯åŠ¨Erlangè™šæ‹Ÿæœºå’ŒRbbitMQåº”ç”¨æœåŠ¡(åœ¨ä¸‰å°èŠ‚ç‚¹ä¸Šåˆ†åˆ«æ‰§è¡Œä»¥ä¸‹å‘½ä»¤)</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rabbitmq-server	<span class="token parameter variable">-detached</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>åœ¨èŠ‚ç‚¹2æ‰§è¡Œ</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rabbitmqctl	stop_app

<span class="token comment"># (rabbitmqctl stopä¼šå°†Erlangè™šæ‹Ÿæœºå…³é—­ï¼Œrabbitmqctl stop_appåªå…³é—­RabbitMQæœåŠ¡)</span>

rabbitmqctl reset

rabbitmqctl join_cluster rabbit@node1

rabbitmqctl start_app<span class="token punctuation">(</span>åªå¯åŠ¨åº”ç”¨æœåŠ¡<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>åœ¨èŠ‚ç‚¹3æ‰§è¡Œ</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rabbitmqctl stop_app
rabbitmqctl reset
rabbitmqctl join_cluster rabbit@node2
rabbitmqctl	start_app
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>é›†ç¾¤çŠ¶æ€</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rabbitmqctl cluster_status
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="8"><li>éœ€è¦é‡æ–°è®¾ç½®ç”¨æˆ·</li></ol><p>åˆ›å»ºè´¦å·</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rabbitmqctl add_user admin <span class="token number">123</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è®¾ç½®ç”¨æˆ·è§’è‰²</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rabbitmqctl	set_user_tags admin administrator
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è®¾ç½®ç”¨æˆ·æƒé™</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rabbitmqctl set_permissions <span class="token parameter variable">-p</span> <span class="token string">&quot;/&quot;</span> admin <span class="token string">&quot;.*&quot;</span> <span class="token string">&quot;.*&quot;</span> <span class="token string">&quot;.*&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="9"><li>è§£é™¤é›†ç¾¤èŠ‚ç‚¹(node2å’Œnode3æœºå™¨åˆ†åˆ«æ‰§è¡Œ)</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rabbitmqctl	stop_app
rabbitmqctl reset
rabbitmqctl start_app
rabbitmqctl	cluster_status
rabbitmqctl	forget_cluster_node rabbit@node2<span class="token punctuation">(</span>node1æœºå™¨ä¸Šæ‰§è¡Œ<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_02ã€é•œåƒé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#_02ã€é•œåƒé˜Ÿåˆ—" aria-hidden="true">#</a> 02ã€é•œåƒé˜Ÿåˆ—</h2><h3 id="ä½¿ç”¨é•œåƒçš„åŸå› " tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨é•œåƒçš„åŸå› " aria-hidden="true">#</a> ä½¿ç”¨é•œåƒçš„åŸå› </h3><p>å¦‚æœRabbitMQé›†ç¾¤ä¸­åªæœ‰ä¸€ä¸ªBrokerèŠ‚ç‚¹ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹çš„å¤±æ•ˆå°†å¯¼è‡´æ•´ä½“æœåŠ¡çš„ä¸´æ—¶æ€§ä¸å¯ç”¨ï¼Œå¹¶ä¸”ä¹Ÿå¯èƒ½ä¼šå¯¼è‡´æ¶ˆæ¯çš„ä¸¢å¤±ã€‚å¯ä»¥å°†æ‰€æœ‰æ¶ˆæ¯éƒ½è®¾ç½®ä¸ºæŒä¹…åŒ–ï¼Œå¹¶ä¸”å¯¹åº”é˜Ÿåˆ—çš„durableå±æ€§ä¹Ÿè®¾ç½®ä¸ºtrueï¼Œä½†æ˜¯è¿™æ ·ä»ç„¶æ— æ³•é¿å…ç”±äºç¼“å­˜å¯¼è‡´çš„é—®é¢˜ï¼šå› ä¸ºæ¶ˆæ¯åœ¨å‘é€ä¹‹åå’Œè¢«å†™å…¥ç£ç›˜äº•æ‰§è¡Œåˆ·ç›˜åŠ¨ä½œä¹‹é—´å­˜åœ¨ä¸€ä¸ªçŸ­æš‚å´ä¼šäº§ç”Ÿé—®é¢˜çš„æ—¶é—´çª—ã€‚é€šè¿‡publisherconfirmæœºåˆ¶èƒ½å¤Ÿç¡®ä¿å®¢æˆ·ç«¯çŸ¥é“å“ªäº›æ¶ˆæ¯å·±ç»å­˜å…¥ç£ç›˜ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œä¸€èˆ¬ä¸å¸Œæœ›é‡åˆ°å› å•ç‚¹æ•…éšœå¯¼è‡´çš„æœåŠ¡ä¸å¯ç”¨ã€‚</p><p>å¼•å…¥é•œåƒé˜Ÿåˆ—(MirrorQueue)çš„æœºåˆ¶ï¼Œå¯ä»¥å°†é˜Ÿåˆ—é•œåƒåˆ°é›†ç¾¤ä¸­çš„å…¶ä»–BrokerèŠ‚ç‚¹ä¹‹ä¸Šï¼Œå¦‚æœé›†ç¾¤ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹å¤±æ•ˆäº†ï¼Œé˜Ÿåˆ—èƒ½è‡ªåŠ¨åœ°åˆ‡æ¢åˆ°é•œåƒä¸­çš„å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šä»¥ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚</p><h3 id="æ­å»ºæ­¥éª¤-1" tabindex="-1"><a class="header-anchor" href="#æ­å»ºæ­¥éª¤-1" aria-hidden="true">#</a> æ­å»ºæ­¥éª¤</h3><ol><li><p>å¯åŠ¨ä¸‰å°é›†ç¾¤èŠ‚ç‚¹</p></li><li><p>éšä¾¿æ‰¾ä¸€ä¸ªèŠ‚ç‚¹æ·»åŠ policy</p></li></ol><p><img src="/assets/image-20230410222927657.efcd6adb.png" alt="image-20230410222927657"></p><ol start="3"><li>åœ¨node1ä¸Šåˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œé˜Ÿåˆ—å­˜åœ¨é•œåƒé˜Ÿåˆ—</li></ol><p><img src="/assets/image-20230410222949843.ec2b2f9e.png" alt="image-20230410222949843"></p><ol start="4"><li>åœæ‰node1ä¹‹åå‘ç°node2æˆä¸ºé•œåƒé˜Ÿåˆ—</li></ol><p><img src="/assets/image-20230410223005762.af8f0a98.png" alt="image-20230410223005762"></p><p><img src="/assets/image-20230410223019005.f6bd63fb.png" alt="image-20230410223019005"></p><ol start="5"><li>å°±ç®—æ•´ä¸ªé›†ç¾¤åªå‰©ä¸‹ä¸€å°æœºå™¨äº†ä¾ç„¶èƒ½æ¶ˆè´¹é˜Ÿåˆ—é‡Œé¢çš„æ¶ˆæ¯</li></ol><blockquote><p>è¯´æ˜é˜Ÿåˆ—é‡Œé¢çš„æ¶ˆæ¯è¢«é•œåƒé˜Ÿåˆ—ä¼ é€’åˆ°ç›¸åº”æœºå™¨é‡Œé¢äº†</p></blockquote><h2 id="_03ã€haproxy-keepaliveå®ç°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#_03ã€haproxy-keepaliveå®ç°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> 03ã€Haproxy+Keepaliveå®ç°é«˜å¯ç”¨è´Ÿè½½å‡è¡¡</h2><h3 id="æ•´ä½“æ¶æ„å›¾" tabindex="-1"><a class="header-anchor" href="#æ•´ä½“æ¶æ„å›¾" aria-hidden="true">#</a> æ•´ä½“æ¶æ„å›¾</h3><p><img src="/assets/image-20230410223108470.e517a94d.png" alt="image-20230410223108470"></p><h3 id="haproxyå®ç°è´Ÿè½½å‡è¡¡" tabindex="-1"><a class="header-anchor" href="#haproxyå®ç°è´Ÿè½½å‡è¡¡" aria-hidden="true">#</a> Haproxyå®ç°è´Ÿè½½å‡è¡¡</h3><p>HAProxyæä¾›é«˜å¯ç”¨æ€§ã€è´Ÿè½½å‡è¡¡åŠåŸºäºTCPHTTPåº”ç”¨çš„ä»£ç†ï¼Œæ”¯æŒè™šæ‹Ÿä¸»æœºï¼Œå®ƒæ˜¯å…è´¹ã€å¿«é€Ÿå¹¶ä¸”å¯é çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬Twitter,Reddit,StackOverflow,GitHubåœ¨å†…çš„å¤šå®¶çŸ¥åäº’è”ç½‘å…¬å¸åœ¨ä½¿ç”¨ã€‚HAProxyå®ç°äº†ä¸€ç§äº‹ä»¶é©±åŠ¨ã€å•ä¸€è¿›ç¨‹æ¨¡å‹ï¼Œæ­¤æ¨¡å‹æ”¯æŒéå¸¸å¤§çš„äº•å‘è¿æ¥æ•°ã€‚</p><blockquote><p>æ‰©å±•nginx,lvs,haproxyä¹‹é—´çš„åŒºåˆ«:<a href="http://www.ha97.com/5646.html" target="_blank" rel="noopener noreferrer">http://www.ha97.com/5646.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h3 id="æ­å»ºæ­¥éª¤-2" tabindex="-1"><a class="header-anchor" href="#æ­å»ºæ­¥éª¤-2" aria-hidden="true">#</a> æ­å»ºæ­¥éª¤</h3><ol><li>ä¸‹è½½haproxy(åœ¨node1å’Œnode2)</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> haproxy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>ä¿®æ”¹node1å’Œnode2çš„haproxy.cfg</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /etc/haproxy/haproxy.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>éœ€è¦ä¿®æ”¹çº¢è‰²IPä¸ºå½“å‰æœºå™¨IP</p><p><img src="/assets/image-20230410223232546.9aeaf242.png" alt="image-20230410223232546"></p><ol start="3"><li>åœ¨ä¸¤å°èŠ‚ç‚¹å¯åŠ¨haproxy</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>haproxy <span class="token parameter variable">-f</span> /etc/haproxy/haproxy.cfg
<span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> haproxy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>è®¿é—®åœ°å€</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>http://10.211.55.71:8888/stats
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="keepalivedå®ç°åŒæœº-ä¸»å¤‡-çƒ­å¤‡" tabindex="-1"><a class="header-anchor" href="#keepalivedå®ç°åŒæœº-ä¸»å¤‡-çƒ­å¤‡" aria-hidden="true">#</a> Keepalivedå®ç°åŒæœº(ä¸»å¤‡)çƒ­å¤‡</h3><p>è¯•æƒ³å¦‚æœå‰é¢é…ç½®çš„HAProxyä¸»æœºçªç„¶å®•æœºæˆ–è€…ç½‘å¡å¤±æ•ˆï¼Œé‚£ä¹ˆè™½ç„¶RbbitMQé›†ç¾¤æ²¡æœ‰ä»»ä½•æ•…éšœä½†æ˜¯å¯¹äºå¤–ç•Œçš„å®¢æˆ·ç«¯æ¥è¯´æ‰€æœ‰çš„è¿æ¥éƒ½ä¼šè¢«æ–­å¼€ç»“æœå°†æ˜¯ç¾éš¾æ€§çš„ä¸ºäº†ç¡®ä¿è´Ÿè½½å‡è¡¡æœåŠ¡çš„å¯é æ€§åŒæ ·æ˜¾å¾—ååˆ†é‡è¦ï¼Œè¿™é‡Œå°±è¦å¼•å…¥Keepalivedå®ƒèƒ½å¤Ÿé€šè¿‡è‡ªèº«å¥åº·æ£€æŸ¥ã€èµ„æºæ¥ç®¡åŠŸèƒ½åšé«˜å¯ç”¨(åŒæœºçƒ­å¤‡)ï¼Œå®ç°æ•…éšœè½¬ç§»ã€‚</p><h3 id="æ­å»ºæ­¥éª¤-3" tabindex="-1"><a class="header-anchor" href="#æ­å»ºæ­¥éª¤-3" aria-hidden="true">#</a> æ­å»ºæ­¥éª¤</h3><ol><li>ä¸‹è½½keepalived</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> keepalived
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>èŠ‚ç‚¹node1é…ç½®æ–‡ä»¶</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /etc/keepalived/keepalived.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŠŠèµ„æ–™é‡Œé¢çš„keepalived.confä¿®æ”¹ä¹‹åæ›¿æ¢</p><ol start="3"><li>èŠ‚ç‚¹node2é…ç½®æ–‡ä»¶</li></ol><blockquote><p>éœ€è¦ä¿®æ”¹global_defsçš„router_id,å¦‚:nodeB</p><p>å…¶æ¬¡è¦ä¿®æ”¹vrrp_instance_VIä¸­stateä¸º&quot;BACKUP&quot;ï¼›</p><p>æœ€åè¦å°†priorityè®¾ç½®ä¸ºå°äº100çš„å€¼</p></blockquote><ol start="4"><li>æ·»åŠ haproxy_chk.sh</li></ol><p>(ä¸ºäº†é˜²æ­¢HAProxyæœåŠ¡æŒ‚æ‰ä¹‹åKeepalivedè¿˜åœ¨æ­£å¸¸å·¥ä½œè€Œæ²¡æœ‰åˆ‡æ¢åˆ°Backupä¸Šï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ç¼–å†™ä¸€ä¸ªè„šæœ¬æ¥æ£€æµ‹HAProxyåŠ¡çš„çŠ¶æ€,å½“HAProxyæœåŠ¡æŒ‚æ‰ä¹‹åè¯¥è„šæœ¬ä¼šè‡ªåŠ¨é‡å¯HAProxyçš„æœåŠ¡ï¼Œå¦‚æœä¸æˆåŠŸåˆ™å…³é—­KeepalivedæœåŠ¡ï¼Œè¿™æ ·ä¾¿å¯ä»¥åˆ‡æ¢åˆ°Backupç»§ç»­å·¥ä½œ)</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /etc/keepalived/haproxy_chk.sh<span class="token punctuation">(</span>å¯ä»¥ç›´æ¥ä¸Šä¼ æ–‡ä»¶<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¿®æ”¹æƒé™</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>chmod777 /etc/keepalived/haproxy_chk.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="5"><li>å¯åŠ¨keepaliveå‘½ä»¤(node1å’Œnode2å¯åŠ¨)</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl start keepalived
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="6"><li>è§‚å¯ŸKeepalivedçš„æ—¥å¿—</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">tail</span> <span class="token parameter variable">-f</span> /var/log/messages <span class="token parameter variable">-n</span> <span class="token number">200</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="7"><li>è§‚å¯Ÿæœ€æ–°æ·»åŠ çš„vip</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ip</span> <span class="token function">add</span> show
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="8"><li>node1æ¨¡æ‹Ÿkeepalivedå…³é—­çŠ¶æ€</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl stop keepalived
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="9"><li>ä½¿ç”¨vipåœ°å€æ¥è®¿é—®rabbitmqé›†ç¾¤</li></ol><h2 id="_04ã€federation-exchange" tabindex="-1"><a class="header-anchor" href="#_04ã€federation-exchange" aria-hidden="true">#</a> 04ã€Federation Exchange</h2><h3 id="ä½¿ç”¨å®ƒçš„åŸå› " tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å®ƒçš„åŸå› " aria-hidden="true">#</a> ä½¿ç”¨å®ƒçš„åŸå› </h3><p>(brokeråŒ—äº¬)ï¼Œ(brokeræ·±åœ³)å½¼æ­¤ä¹‹é—´ç›¸è·ç”šè¿œï¼Œç½‘ç»œå»¶è¿Ÿæ˜¯ä¸€ä¸ªä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ã€‚æœ‰ä¸€ä¸ªåœ¨åŒ—äº¬çš„ä¸šåŠ¡(ClientåŒ—äº¬)éœ€è¦è¿æ¥(brokeråŒ—äº¬)ï¼Œå‘å…¶ä¸­çš„äº¤æ¢å™¨exchangeAå‘é€æ¶ˆæ¯ï¼Œæ­¤æ—¶çš„ç½‘ç»œå»¶è¿Ÿå¾ˆå°ï¼Œ(ClientåŒ—äº¬)å¯ä»¥è¿…é€Ÿå°†æ¶ˆæ¯å‘é€è‡³exchangeAä¸­ï¼Œå°±ç®—åœ¨å¼€å¯äº†publisherconfirmæœºåˆ¶æˆ–è€…äº‹åŠ¡æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥è¿…é€Ÿæ”¶åˆ°ç¡®è®¤ä¿¡æ¯ã€‚æ­¤æ—¶åˆæœ‰ä¸ªåœ¨æ·±åœ³çš„ä¸šåŠ¡(Clientæ·±åœ³)éœ€è¦å‘exchangeAå‘é€æ¶ˆæ¯ï¼Œé‚£ä¹ˆ(Clientæ·±åœ³) (brokeråŒ—äº¬)ä¹‹é—´æœ‰å¾ˆå¤§çš„ç½‘ç»œå»¶è¿Ÿï¼Œ(Clientæ·±åœ³)å°†å‘é€æ¶ˆæ¯è‡³exchangeAä¼šç»å†ä¸€å®šçš„å»¶è¿Ÿï¼Œå°¤å…¶æ˜¯åœ¨å¼€å¯äº†publisherconfirmæœºåˆ¶æˆ–è€…äº‹åŠ¡æœºåˆ¶çš„æƒ…å†µä¸‹ï¼Œ(Clientæ·±åœ³)ä¼šç­‰å¾…å¾ˆé•¿çš„å»¶è¿Ÿæ—¶é—´æ¥æ¥æ”¶(brokeråŒ—äº¬)çš„ç¡®è®¤ä¿¡æ¯ï¼Œè¿›è€Œå¿…ç„¶é€ æˆè¿™æ¡å‘é€çº¿ç¨‹çš„æ€§èƒ½é™ä½ï¼Œç”šè‡³é€ æˆä¸€å®šç¨‹åº¦ä¸Šçš„é˜»å¡ã€‚</p><p>å°†ä¸šåŠ¡(Clientæ·±åœ³)éƒ¨ç½²åˆ°åŒ—äº¬çš„æœºæˆ¿å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœ(Clientæ·±åœ³)è°ƒç”¨çš„å¦äº›æœåŠ¡éƒ½éƒ¨ç½²åœ¨æ·±åœ³ï¼Œé‚£ä¹ˆåˆä¼šå¼•å‘æ–°çš„æ—¶å»¶é—®é¢˜ï¼Œæ€»ä¸è§å¾—å°†æ‰€æœ‰ä¸šåŠ¡å…¨éƒ¨éƒ¨ç½²åœ¨ä¸€ä¸ªæœºæˆ¿ï¼Œé‚£ä¹ˆå®¹ç¾åˆä½•ä»¥å®ç°ï¼Ÿè¿™é‡Œä½¿ç”¨Federationæ’ä»¶å°±å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p><img src="/assets/image-20230410223821712.dd6f6310.png" alt="image-20230410223821712"></p><h3 id="æ­å»ºæ­¥éª¤-4" tabindex="-1"><a class="header-anchor" href="#æ­å»ºæ­¥éª¤-4" aria-hidden="true">#</a> æ­å»ºæ­¥éª¤</h3><ol><li><p>éœ€è¦ä¿è¯æ¯å°èŠ‚ç‚¹å•ç‹¬è¿è¡Œ</p></li><li><p>åœ¨æ¯å°æœºå™¨ä¸Šå¼€å¯<code>federation</code>ç›¸å…³æ’ä»¶</p></li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rabbitmq-plugins <span class="token builtin class-name">enable</span> rabbitmq_federation

rabbitmq-plugins <span class="token builtin class-name">enable</span> rabbitmq_federation_management
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/image-20230410223926784.87496ebf.png" alt="image-20230410223926784"></p><ol start="3"><li>åŸç†å›¾(å…ˆè¿è¡Œconsumeråœ¨node2åˆ›å»ºfed_exchange)</li></ol><p><img src="/assets/image-20230410223950014.ae20f965.png" alt="image-20230410223950014"></p><ol start="4"><li>åœ¨downstream(node2)é…ç½®upstream(node1)</li></ol><p><img src="/assets/image-20230410224008678.4e0acd5e.png" alt="image-20230410224008678"></p><ol start="5"><li>æ·»åŠ policy</li></ol><p><img src="/assets/image-20230410224046319.caecb2c2.png" alt="image-20230410224046319"></p><ol start="6"><li>æˆåŠŸçš„å‰æ</li></ol><p><img src="/assets/image-20230410224106768.44cf000d.png" alt="image-20230410224106768"></p><h2 id="_05ã€federation-queue" tabindex="-1"><a class="header-anchor" href="#_05ã€federation-queue" aria-hidden="true">#</a> 05ã€Federation Queue</h2><h3 id="ä½¿ç”¨å®ƒçš„åŸå› -1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å®ƒçš„åŸå› -1" aria-hidden="true">#</a> ä½¿ç”¨å®ƒçš„åŸå› </h3><p>è”é‚¦é˜Ÿåˆ—å¯ä»¥åœ¨å¤šä¸ªBrokerèŠ‚ç‚¹(æˆ–è€…é›†ç¾¤)ä¹‹é—´ä¸ºå•ä¸ªé˜Ÿåˆ—æä¾›å‡è¡¡è´Ÿè½½çš„åŠŸèƒ½ã€‚ä¸€ä¸ªè”é‚¦é˜Ÿåˆ—å¯ä»¥è¿æ¥ä¸€ä¸ªæˆ–è€…å¤šä¸ªä¸Šæ¸¸é˜Ÿåˆ—(upstreamqueue)ï¼Œå¹¶ä»è¿™äº›ä¸Šæ¸¸é˜Ÿåˆ—ä¸­è·å–æ¶ˆæ¯ä»¥æ»¡è¶³æœ¬åœ°æ¶ˆè´¹è€…æ¶ˆè´¹æ¶ˆæ¯çš„éœ€æ±‚ã€‚</p><h3 id="æ­å»ºæ­¥éª¤-5" tabindex="-1"><a class="header-anchor" href="#æ­å»ºæ­¥éª¤-5" aria-hidden="true">#</a> æ­å»ºæ­¥éª¤</h3><ol><li>åŸç†å›¾</li></ol><p><img src="/assets/image-20230410224153614.71417f41.png" alt="image-20230410224153614"></p><ol start="2"><li><p>æ·»åŠ upstream(åŒä¸Š)</p></li><li><p>æ·»åŠ policy</p></li></ol><p><img src="/assets/image-20230410224220026.b4394c52.png" alt="image-20230410224220026"></p><h2 id="_06ã€shovel" tabindex="-1"><a class="header-anchor" href="#_06ã€shovel" aria-hidden="true">#</a> 06ã€Shovel</h2><h3 id="ä½¿ç”¨å®ƒçš„åŸå› -2" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å®ƒçš„åŸå› -2" aria-hidden="true">#</a> ä½¿ç”¨å®ƒçš„åŸå› </h3><p>Federationå…·å¤‡çš„æ•°æ®è½¬å‘åŠŸèƒ½ç±»ä¼¼ï¼ŒShovelå¤Ÿå¯é ã€æŒç»­åœ°ä»ä¸€ä¸ªBrokerä¸­çš„é˜Ÿåˆ—(ä½œä¸ºæºç«¯ï¼Œå³source)æ‹‰å–æ•°æ®å¹¶è½¬å‘è‡³å¦ä¸€ä¸ªBrokerä¸­çš„äº¤æ¢å™¨(ä½œä¸ºç›®çš„ç«¯ï¼Œå³destination)ã€‚ä½œä¸ºæºç«¯çš„é˜Ÿåˆ—å’Œä½œä¸ºç›®çš„ç«¯çš„äº¤æ¢å™¨å¯ä»¥åŒæ—¶ä½äºåŒä¸€ä¸ªBrokerï¼Œä¹Ÿå¯ä»¥ä½äºä¸åŒçš„Brokerä¸Šã€‚Shovelå¯ä»¥ç¿»è¯‘ä¸º&quot;é“²å­&quot;ï¼Œæ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„æ¯”å–»ï¼Œè¿™ä¸ª&quot;é“²å­&quot;å¯ä»¥å°†æ¶ˆæ¯ä»ä¸€æ–¹&quot;é“²å­&quot;å¦ä¸€æ–¹ã€‚Shovelè¡Œä¸ºå°±åƒä¼˜ç§€çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºèƒ½å¤Ÿè´Ÿè´£è¿æ¥æºå’Œç›®çš„åœ°ã€è´Ÿè´£æ¶ˆæ¯çš„è¯»å†™åŠè´Ÿè´£è¿æ¥å¤±è´¥é—®é¢˜çš„å¤„ç†ã€‚</p><h3 id="æ­å»ºæ­¥éª¤-6" tabindex="-1"><a class="header-anchor" href="#æ­å»ºæ­¥éª¤-6" aria-hidden="true">#</a> æ­å»ºæ­¥éª¤</h3><ol><li>å¼€å¯æ’ä»¶(éœ€è¦çš„æœºå™¨éƒ½å¼€å¯)</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>rabbitmq-plugins <span class="token builtin class-name">enable</span> rabbitmq_shovel

rabbitmq-plugins <span class="token builtin class-name">enable</span> rabbitmq_shovel_management
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/image-20230410224403955.d0070f39.png" alt="image-20230410224403955"></p><ol start="2"><li>åŸç†å›¾(åœ¨æºå¤´å‘é€çš„æ¶ˆæ¯ç›´æ¥å›è¿›å…¥åˆ°ç›®çš„åœ°é˜Ÿåˆ—)</li></ol><p><img src="/assets/image-20230410224433913.0e41da66.png" alt="image-20230410224433913"></p><ol start="3"><li>æ·»åŠ shovelæºå’Œç›®çš„åœ°</li></ol><p><img src="/assets/image-20230410224448727.bcdaec6f.png" alt="image-20230410224448727"></p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/Ragnarokoo/LearningNotes/edit/master/src/notes/mq/rabbitmq/åä¸€ã€RabbitMQé›†ç¾¤.md" rel="noopener noreferrer" target="_blank" aria-label="åœ¨ã€Githubã€‘ä¸Šç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ã€Githubã€‘ä¸Šç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><!----></footer><nav class="page-nav"><a href="/notes/mq/rabbitmq/%E5%8D%81%E3%80%81RabbitMQ%E5%85%B6%E4%BB%96%E7%9F%A5%E8%AF%86%E7%82%B9.html" class="nav-link prev" aria-label="åã€RabbitMQå…¶ä»–çŸ¥è¯†ç‚¹"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->åã€RabbitMQå…¶ä»–çŸ¥è¯†ç‚¹</div></a><!----></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.9b10ba0a.js" defer></script>
  </body>
</html>
