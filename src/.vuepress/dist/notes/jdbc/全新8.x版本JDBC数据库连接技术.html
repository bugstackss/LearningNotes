<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.53" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://Ragnarokoo.github.io/LearningNotes/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html"><meta property="og:site_name" content="📚全栈开发学习指南"><meta property="og:title" content="全新8.x版本JDBC数据库连接技术"><meta property="og:description" content="一、前言 1.1 课程需要哪些前置技术 技术 版本 备注 -------------- ------ -------- idea 2022.2 最新版本 jdk 1.8 mysql-jdbc驱动 8.0.27 8.0.25+ druid 1.1.21 mysql 8.0.25 image-20230311133459713 1.2 课程学习路线设计 学..."><meta property="og:type" content="article"><meta property="og:image" content="https://Ragnarokoo.github.io/LearningNotes/"><meta property="og:updated_time" content="2023-05-31T09:16:41.000Z"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="全新8.x版本JDBC数据库连接技术"><meta property="article:tag" content="jdbc"><meta property="article:tag" content="java"><meta property="article:tag" content="数据库"><meta property="article:tag" content="mysql"><meta property="article:modified_time" content="2023-05-31T09:16:41.000Z"><link rel="icon" href="/site_logo.svg"><title>全新8.x版本JDBC数据库连接技术 | 📚全栈开发学习指南</title><meta name="description" content="一、前言 1.1 课程需要哪些前置技术 技术 版本 备注 -------------- ------ -------- idea 2022.2 最新版本 jdk 1.8 mysql-jdbc驱动 8.0.27 8.0.25+ druid 1.1.21 mysql 8.0.25 image-20230311133459713 1.2 课程学习路线设计 学...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style.bc8b6d7c.css" as="style" /><link rel="stylesheet" href="/assets/style.bc8b6d7c.css" />
    <link rel="modulepreload" href="/assets/app.9b10ba0a.js"><link rel="modulepreload" href="/assets/全新8.x版本JDBC数据库连接技术.html.b9f47438.js"><link rel="modulepreload" href="/assets/_plugin-vue_export-helper.cdc0426e.js"><link rel="modulepreload" href="/assets/全新8.x版本JDBC数据库连接技术.html.1741eee6.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/site_logo.svg" alt="📚全栈开发学习指南"><!----><span class="site-name hide-in-pad">📚全栈开发学习指南</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/quicknav/" class="nav-link" aria-label="快速导航"><span class="icon iconfont icon-navigation"></span>快速导航<!----></a></div><div class="nav-item hide-in-mobile"><a href="/blog/" class="nav-link" aria-label="博客主页"><span class="icon iconfont icon-blog"></span>博客主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/notes/" class="nav-link active" aria-label="Java学习教程"><span class="icon iconfont icon-java"></span>Java学习教程<!----></a></div><div class="nav-item hide-in-mobile"><a href="/web/" class="nav-link" aria-label="web学习教程"><span class="icon iconfont icon-note"></span>web学习教程<!----></a></div><div class="nav-item hide-in-mobile"><a href="/springcloud/" class="nav-link" aria-label="SpringCloud学习教程"><span class="icon iconfont icon-cache"></span>SpringCloud学习教程<!----></a></div><div class="nav-item hide-in-mobile"><a href="/distributed/" class="nav-link" aria-label="分布式微服务架构"><span class="icon iconfont icon-read"></span>分布式微服务架构<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="资源宝库"><span class="title"><span class="icon iconfont icon-advance"></span>资源宝库</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/resources/books/" class="nav-link" aria-label="书籍资源"><span class="icon iconfont icon-animation"></span>书籍资源<!----></a></li><li class="dropdown-item"><a href="/resources/videos/" class="nav-link" aria-label="影音资源"><span class="icon iconfont icon-play"></span>影音资源<!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/Ragnarokoo/LearningNotes" target="_blank" rel="noopener noreferrer" aria-label="Github"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索本站" autocomplete="off" spellcheck="false" value><!----></form><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-java"></span><span class="title">Java Language专栏</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-IO"></span><span class="title">Java网络编程NIO</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-community"></span><span class="title">JDBC数据库连接技术</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/notes/jdbc/01%E3%80%81JDBC%E7%AE%80%E4%BB%8B.html" class="nav-link sidebar-link sidebar-page" aria-label="01、JDBC简介"><!---->01、JDBC简介<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/jdbc/02%E3%80%81%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5.html" class="nav-link sidebar-link sidebar-page" aria-label="02、获取数据库连接"><!---->02、获取数据库连接<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/jdbc/03%E3%80%81%E4%BD%BF%E7%94%A8PreparedStatement%E5%AE%9E%E7%8E%B0CRUD%E6%93%8D%E4%BD%9C.html" class="nav-link sidebar-link sidebar-page" aria-label="03、使用PreparedStatement实现CRUD操作"><!---->03、使用PreparedStatement实现CRUD操作<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/jdbc/04%E3%80%81%E7%AB%A0%E8%8A%82%E7%BB%83%E4%B9%A0.html" class="nav-link sidebar-link sidebar-page" aria-label="04、章节练习"><!---->04、章节练习<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/jdbc/05%E3%80%81%E6%93%8D%E4%BD%9CBLOB%E7%B1%BB%E5%9E%8B%E5%AD%97%E6%AE%B5.html" class="nav-link sidebar-link sidebar-page" aria-label="05、操作BLOB类型字段"><!---->05、操作BLOB类型字段<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/jdbc/06%E3%80%81%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5.html" class="nav-link sidebar-link sidebar-page" aria-label="06、批量插入"><!---->06、批量插入<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/jdbc/07%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1.html" class="nav-link sidebar-link sidebar-page" aria-label="07、数据库事务"><!---->07、数据库事务<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/jdbc/08%E3%80%81DAO%E5%8F%8A%E7%9B%B8%E5%85%B3%E5%AE%9E%E7%8E%B0%E7%B1%BB.html" class="nav-link sidebar-link sidebar-page" aria-label="08、DAO及相关实现类"><!---->08、DAO及相关实现类<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/jdbc/09%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0.html" class="nav-link sidebar-link sidebar-page" aria-label="09、数据库连接池"><!---->09、数据库连接池<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/notes/jdbc/10%E3%80%81Apache-DBUtils%E5%AE%9E%E7%8E%B0CRUD%E6%93%8D%E4%BD%9C.html" class="nav-link sidebar-link sidebar-page" aria-label="10、Apache-DBUtils实现CRUD操作"><!---->10、Apache-DBUtils实现CRUD操作<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="全新8.x版本JDBC数据库连接技术"><!---->全新8.x版本JDBC数据库连接技术<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#一、前言" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="一、前言"><!---->一、前言<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_1-1-课程需要哪些前置技术" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 课程需要哪些前置技术"><!---->1.1 课程需要哪些前置技术<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_1-2-课程学习路线设计" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 课程学习路线设计"><!---->1.2 课程学习路线设计<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#二、全新jdbc技术概述" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="二、全新JDBC技术概述"><!---->二、全新JDBC技术概述<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_2-1-jdbc技术概念和理解" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 jdbc技术概念和理解"><!---->2.1 jdbc技术概念和理解<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_2-2-jdbc核心api和使用路线" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 jdbc核心api和使用路线"><!---->2.2 jdbc核心api和使用路线<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_2-3-为什么选择全新-8-版本-mysql-jdbc-驱动" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 为什么选择全新 8+ 版本 mysql-jdbc 驱动？"><!---->2.3 为什么选择全新 8+ 版本 mysql-jdbc 驱动？<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#三、全新-jdbc-核心-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="三、全新 JDBC 核心 API"><!---->三、全新 JDBC 核心 API<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-1-引入-mysql-jdbc-驱动-jar" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 引入 mysql-jdbc 驱动 jar"><!---->3.1 引入 mysql-jdbc 驱动 jar<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-2-jdbc-基本使用步骤分析" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 jdbc 基本使用步骤分析"><!---->3.2 jdbc 基本使用步骤分析<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-3-基于statement-演示查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 基于statement 演示查询"><!---->3.3 基于statement 演示查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-4-基于-statement-方式问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.4 基于 statement 方式问题"><!---->3.4 基于 statement 方式问题<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-5-基于-preparedstatment-方式优化" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.5 基于 preparedStatment 方式优化"><!---->3.5 基于 preparedStatment 方式优化<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-6-基于-preparedstatment-演示-crud" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.6 基于 preparedStatment 演示 crud"><!---->3.6 基于 preparedStatment 演示 crud<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-7-preparedstatment-使用方式总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.7 preparedStatment 使用方式总结"><!---->3.7 preparedStatment 使用方式总结<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#四、全新-jdbc扩展提升" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="四、全新 JDBC扩展提升"><!---->四、全新 JDBC扩展提升<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_4-1-自增长主键回显实现" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 自增长主键回显实现"><!---->4.1 自增长主键回显实现<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_4-2-批量数据插入性能测试" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 批量数据插入性能测试"><!---->4.2 批量数据插入性能测试<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_4-3-jdbc中数据库事务实现" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3 jdbc中数据库事务实现"><!---->4.3 jdbc中数据库事务实现<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#五、国货之光-duid连接池技术使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="五、国货之光 Duid连接池技术使用"><!---->五、国货之光 Duid连接池技术使用<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_5-1-连接性能损耗问题分析" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 连接性能损耗问题分析"><!---->5.1 连接性能损耗问题分析<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_5-2-数据库连接池的作用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 数据库连接池的作用"><!---->5.2 数据库连接池的作用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_5-3-市面常见连接池产品和对比" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.3 市面常见连接池产品和对比"><!---->5.3 市面常见连接池产品和对比<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_5-4-国货之光-druid-连接池使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.4 国货之光 druid 连接池使用"><!---->5.4 国货之光 druid 连接池使用<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#六、全新jdbc使用优化以及工具类封装" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="六、全新JDBC使用优化以及工具类封装"><!---->六、全新JDBC使用优化以及工具类封装<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_6-1-jdbc工具类封装-v1-0" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1 jdbc工具类封装 v1.0"><!---->6.1 jdbc工具类封装 v1.0<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_6-2-jdbc工具类封装v-2-0" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2 jdbc工具类封装v.2.0"><!---->6.2 jdbc工具类封装v.2.0<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_6-3高级应用层封装basedao" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3高级应用层封装BaseDao"><!---->6.3高级应用层封装BaseDao<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#七、基于cms项目jdbc实战练习" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="七、基于CMS项目JDBC实战练习"><!---->七、基于CMS项目JDBC实战练习<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_7-1-cms项目介绍和导入" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.1 cms项目介绍和导入"><!---->7.1 cms项目介绍和导入<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_7-2基于cms项目添加数据库相关配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2基于cms项目添加数据库相关配置"><!---->7.2基于cms项目添加数据库相关配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_7-2基于cms项目添加数据库相关配置-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2基于cms项目添加数据库相关配置"><!---->7.2基于cms项目添加数据库相关配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_7-3-基于cms项目实战" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.3 基于cms项目实战"><!---->7.3 基于cms项目实战<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-categoryselected"></span><span class="title">JavaWeb</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-array"></span><span class="title">SSM Framework</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-geometry"></span><span class="title">SpringData</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-type"></span><span class="title">SpringBoot</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-module"></span><span class="title">mybatisplus</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-operate"></span><span class="title">构建工具&amp;云原生Devops</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-mysql"></span><span class="title">数据库以及调优策略</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-quote"></span><span class="title">消息中间件</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-tool"></span><span class="title">软件以及环境配置</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-ability"></span><span class="title">Linux操作系统</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-rank"></span><span class="title">JUC高并发编程</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-mount"></span><span class="title">深入了解Java虚拟机</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-view"></span><span class="title">GOF23种设计模式</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-tag"></span><span class="title">技术要点业务篇</span><span class="arrow right"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->全新8.x版本JDBC数据库连接技术</h1><div class="page-info"><span class="category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li><span class="category category3 clickable" role="navigation">jdbc</span></li></ul><meta property="articleSection" content="jdbc"></span><span aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li><span class="tag tag3 clickable" role="navigation">jdbc</span></li><li><span class="tag tag6 clickable" role="navigation">java</span></li><li><span class="tag tag6 clickable" role="navigation">数据库</span></li><li><span class="tag tag4 clickable" role="navigation">mysql</span></li></ul><meta property="keywords" content="jdbc,java,数据库,mysql"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 39 分钟</span><meta property="timeRequired" content="PT39M"></span><span class="author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://github.com/Ragnarokoo/" target="_blank" rel="noopener noreferrer">Ragnarok</a></span><span property="author" content="Ragnarok"></span></span><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-05-31T09:16:41.000Z"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#一、前言" class="router-link-active router-link-exact-active toc-link level2">一、前言</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_1-1-课程需要哪些前置技术" class="router-link-active router-link-exact-active toc-link level3">1.1 课程需要哪些前置技术</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_1-2-课程学习路线设计" class="router-link-active router-link-exact-active toc-link level3">1.2 课程学习路线设计</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#二、全新jdbc技术概述" class="router-link-active router-link-exact-active toc-link level2">二、全新JDBC技术概述</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_2-1-jdbc技术概念和理解" class="router-link-active router-link-exact-active toc-link level3">2.1 jdbc技术概念和理解</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_2-2-jdbc核心api和使用路线" class="router-link-active router-link-exact-active toc-link level3">2.2 jdbc核心api和使用路线</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_2-3-为什么选择全新-8-版本-mysql-jdbc-驱动" class="router-link-active router-link-exact-active toc-link level3">2.3 为什么选择全新 8+ 版本 mysql-jdbc 驱动？</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#三、全新-jdbc-核心-api" class="router-link-active router-link-exact-active toc-link level2">三、全新 JDBC 核心 API</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-1-引入-mysql-jdbc-驱动-jar" class="router-link-active router-link-exact-active toc-link level3">3.1 引入 mysql-jdbc 驱动 jar</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-2-jdbc-基本使用步骤分析" class="router-link-active router-link-exact-active toc-link level3">3.2 jdbc 基本使用步骤分析</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-3-基于statement-演示查询" class="router-link-active router-link-exact-active toc-link level3">3.3 基于statement 演示查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-4-基于-statement-方式问题" class="router-link-active router-link-exact-active toc-link level3">3.4 基于 statement 方式问题</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-5-基于-preparedstatment-方式优化" class="router-link-active router-link-exact-active toc-link level3">3.5 基于 preparedStatment 方式优化</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-6-基于-preparedstatment-演示-crud" class="router-link-active router-link-exact-active toc-link level3">3.6 基于 preparedStatment 演示 crud</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_3-7-preparedstatment-使用方式总结" class="router-link-active router-link-exact-active toc-link level3">3.7 preparedStatment 使用方式总结</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#四、全新-jdbc扩展提升" class="router-link-active router-link-exact-active toc-link level2">四、全新 JDBC扩展提升</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_4-1-自增长主键回显实现" class="router-link-active router-link-exact-active toc-link level3">4.1 自增长主键回显实现</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_4-2-批量数据插入性能测试" class="router-link-active router-link-exact-active toc-link level3">4.2 批量数据插入性能测试</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_4-3-jdbc中数据库事务实现" class="router-link-active router-link-exact-active toc-link level3">4.3 jdbc中数据库事务实现</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#五、国货之光-duid连接池技术使用" class="router-link-active router-link-exact-active toc-link level2">五、国货之光 Duid连接池技术使用</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_5-1-连接性能损耗问题分析" class="router-link-active router-link-exact-active toc-link level3">5.1 连接性能损耗问题分析</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_5-2-数据库连接池的作用" class="router-link-active router-link-exact-active toc-link level3">5.2 数据库连接池的作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_5-3-市面常见连接池产品和对比" class="router-link-active router-link-exact-active toc-link level3">5.3 市面常见连接池产品和对比</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_5-4-国货之光-druid-连接池使用" class="router-link-active router-link-exact-active toc-link level3">5.4 国货之光 druid 连接池使用</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#六、全新jdbc使用优化以及工具类封装" class="router-link-active router-link-exact-active toc-link level2">六、全新JDBC使用优化以及工具类封装</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_6-1-jdbc工具类封装-v1-0" class="router-link-active router-link-exact-active toc-link level3">6.1 jdbc工具类封装 v1.0</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_6-2-jdbc工具类封装v-2-0" class="router-link-active router-link-exact-active toc-link level3">6.2 jdbc工具类封装v.2.0</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_6-3高级应用层封装basedao" class="router-link-active router-link-exact-active toc-link level3">6.3高级应用层封装BaseDao</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#七、基于cms项目jdbc实战练习" class="router-link-active router-link-exact-active toc-link level2">七、基于CMS项目JDBC实战练习</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_7-1-cms项目介绍和导入" class="router-link-active router-link-exact-active toc-link level3">7.1 cms项目介绍和导入</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_7-2基于cms项目添加数据库相关配置" class="router-link-active router-link-exact-active toc-link level3">7.2基于cms项目添加数据库相关配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_7-2基于cms项目添加数据库相关配置-1" class="router-link-active router-link-exact-active toc-link level3">7.2基于cms项目添加数据库相关配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/notes/jdbc/%E5%85%A8%E6%96%B08.x%E7%89%88%E6%9C%ACJDBC%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%8A%80%E6%9C%AF.html#_7-3-基于cms项目实战" class="router-link-active router-link-exact-active toc-link level3">7.3 基于cms项目实战</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h2 id="一、前言" tabindex="-1"><a class="header-anchor" href="#一、前言" aria-hidden="true">#</a> 一、前言</h2><h3 id="_1-1-课程需要哪些前置技术" tabindex="-1"><a class="header-anchor" href="#_1-1-课程需要哪些前置技术" aria-hidden="true">#</a> 1.1 课程需要哪些前置技术</h3><table><thead><tr><th>技术</th><th>版本</th><th>备注</th></tr></thead><tbody><tr><td>idea</td><td>2022.2</td><td>最新版本</td></tr><tr><td>jdk</td><td>1.8</td><td></td></tr><tr><td>mysql-jdbc驱动</td><td>8.0.27</td><td>8.0.25+</td></tr><tr><td>druid</td><td>1.1.21</td><td></td></tr><tr><td>mysql</td><td>8.0.25</td><td></td></tr></tbody></table><p><img src="/assets/image-20230311133459713.5ad30c30.png" alt="image-20230311133459713"></p><h3 id="_1-2-课程学习路线设计" tabindex="-1"><a class="header-anchor" href="#_1-2-课程学习路线设计" aria-hidden="true">#</a> 1.2 课程学习路线设计</h3><blockquote><p>学 悟 行</p></blockquote><p><img src="/assets/image-20230311133851807.bbd3fd33.png" alt="image-20230311133851807"></p><h2 id="二、全新jdbc技术概述" tabindex="-1"><a class="header-anchor" href="#二、全新jdbc技术概述" aria-hidden="true">#</a> 二、全新JDBC技术概述</h2><h3 id="_2-1-jdbc技术概念和理解" tabindex="-1"><a class="header-anchor" href="#_2-1-jdbc技术概念和理解" aria-hidden="true">#</a> 2.1 jdbc技术概念和理解</h3><ul><li>jdbc技术理解</li></ul><p><img src="/assets/image-20230311134139162.cbd28c9b.png" alt="image-20230311134139162"></p><p><img src="/assets/image-20230311134153754.fa682ecb.png" alt="image-20230311134153754"></p><p><img src="/assets/image-20230311134203758.7aeb307c.png" alt="image-20230311134203758"></p><p><img src="/assets/image-20230311134215069.0ff5cacc.png" alt="image-20230311134215069"></p><p><img src="/assets/image-20230311134224333.3b7bd5d9.png" alt="image-20230311134224333"></p><p><img src="/assets/image-20230311134234461.e49282f0.png" alt="image-20230311134234461"></p><p><img src="/assets/image-20230311134246104.ccb2d60f.png" alt="image-20230311134246104"></p><p><img src="/assets/image-20230311134257791.089575d1.png" alt="image-20230311134257791"></p><ul><li>jdbc概念总结 <ol><li>jdbc是(Java Database Connectivity)单词的缩写,翻译为java连接数据库</li><li>jdbc是java程序连接数据库的技术统称</li><li>jdbc由java语言的规范(接口)和各个数据库厂商的实现驱动(jar)组成</li><li>jdbc优势 <ol><li>只需要学习jdbc规范接口的方法,即可操作所有的数据库软件</li><li>项目中期切换数据库软件,只需要更换对应的数据库驱动jar包,不需要更改代码</li></ol></li></ol></li></ul><p><img src="/assets/image-20230311141803232.3d16227d.png" alt="image-20230311141803232"></p><h3 id="_2-2-jdbc核心api和使用路线" tabindex="-1"><a class="header-anchor" href="#_2-2-jdbc核心api和使用路线" aria-hidden="true">#</a> 2.2 jdbc核心api和使用路线</h3><ul><li><p>jdbc技术组成</p><ol><li><p>jdk下jdbc规范接口, 存储在java.sql和javax.sql包中的api</p><blockquote><p>为了项目代码的可移植性，可维护性，SUN公司从最初就制定了Java程序连接各种数据库的统一接口规范。这样的话，不管是连接哪一种DBMS软件，Java代码可以保持一致性。</p></blockquote></li><li><p>各个数据库厂商提供的驱动<code>jar</code>包</p><blockquote><p>因为各个数据库厂商的DBMS软件各有不同，那么内部如何通过sql实现增、删、改、查等管理数据，只有这个数据库厂商自己更清楚，因此把接口规范的实现交给各个数据库厂商自己实现。</p></blockquote></li><li><p>jar包是什么？</p><blockquote><p>java程序打成的一种压缩包格式，你可以将这些jar包引入你的项目中，然后你可以使用这个java程序中类和方法以及属性了!</p></blockquote></li></ol></li><li><p>涉及具体核心类和接口</p><ul><li>DriverManager <ol><li>将第三方数据库厂商的实现驱动<code>jar</code>注册到程序中</li><li>可以根据数据库连接信息获取 <code>connection</code></li></ol></li><li>connection <ol><li>和数据库建立连接，在连接对象上，可以多次执行数据库 crud动作</li><li>可以获取statement 和 preparedStatment，callablestatement对象</li></ol></li><li>Statement | PreparedStatement | CallableStatement <ol><li>具体发送SQL语句到数据库管理软件的对象</li><li>不同发送方式稍有不同！preparedStatment使用为重点！</li></ol></li><li>Result <ol><li>面向对象思维的产物（抽象成数据库的查询结果集）</li><li>存储DQL查询数据库结果的对象</li><li>需要我们进行解析，获取具体的数据库对象</li></ol></li></ul></li><li><p>jdbc api 使用路线</p></li></ul><p><img src="/assets/image-20230311135239274.271080cd.png" alt="image-20230311135239274"></p><h3 id="_2-3-为什么选择全新-8-版本-mysql-jdbc-驱动" tabindex="-1"><a class="header-anchor" href="#_2-3-为什么选择全新-8-版本-mysql-jdbc-驱动" aria-hidden="true">#</a> 2.3 为什么选择全新 8+ 版本 mysql-jdbc 驱动？</h3><blockquote><p>官网介绍：<a href="https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-whats-new.html" target="_blank" rel="noopener noreferrer">MySQL :: MySQL Connector/J 8.0 Developer Guide :: 3 What&#39;s New in Connector/J 8.0?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><ul><li><p>mysql 8.0+版本 mysql管理软件</p><ul><li><p>mysql软件知名版本迭代时间</p><table><thead><tr><th>版本号</th><th>迭代时间</th><th>大小</th></tr></thead><tbody><tr><td>mysql-8.0.25</td><td>4 月 30，2021</td><td>435.7M</td></tr><tr><td>mysql-5.7.25</td><td>1 月 10,2019</td><td>387.7M</td></tr><tr><td>mysql-5.5.30</td><td>9 月 19,2012</td><td>201.5M</td></tr></tbody></table></li><li><p>mysql 8.x版本数据库性能提升介绍</p><p>性能提升级。官方表示MySQL 8.0 的速度要比 MySQL 5.7 快 2 倍。</p><p>MySQL 8.0 在读/写工作负载、IO 密集型工作负载、以及高竞争工作负载时相比MySQL5.7有更好的性能。</p><p><img src="/assets/image.f60054b8.png" alt="img"></p></li></ul></li><li><p>支持java jdbc 规范 4.2+ 版本新特性</p><ul><li><p>java jdbc 规范驱动版本和更新时间</p><table><thead><tr><th>Year</th><th>JDBC Version</th><th>JSR Specification</th><th>JDK Implementation</th></tr></thead><tbody><tr><td>2017</td><td>JDBC 4.3</td><td>JSR 221</td><td>Java SE 9</td></tr><tr><td><strong>2014</strong></td><td><strong>JDBC 4.2</strong></td><td><strong>JSR 221</strong></td><td><strong>Java SE 8</strong></td></tr><tr><td>2011</td><td>JDBC 4.1</td><td>JSR 221</td><td>Java SE 7</td></tr><tr><td>2006</td><td>JDBC 4.0</td><td>JSR 221</td><td>Java SE 6</td></tr><tr><td>2001</td><td>JDBC 3.0</td><td>JSR 54</td><td>JDK 1.4</td></tr><tr><td>1999</td><td>JDBC 2.1</td><td></td><td>JDK 1.2</td></tr><tr><td>1997</td><td>JDBC 1.2</td><td></td><td>JDK 1.1</td></tr></tbody></table></li><li><p>jdbc规范版本更新内容（了解）</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token constant">JDBC</span> <span class="token number">4.3</span> 中引入的主要新功能包括：
添加了对分片的支持
添加了 java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>连接生成器接口
添加了 <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span>ShardigKey</span> 接口
添加了 java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>分片密钥生成器接口
添加了<span class="token punctuation">.</span>sql<span class="token punctuation">.</span><span class="token constant">XA</span> 连接生成器接口
添加了 javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>池连接生成器接口

<span class="token constant">JDBC</span> <span class="token number">4.2</span> 中引入的主要新功能包括：
添加了对引用光标的支持
添加了 java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>驱动程序操作接口
添加了<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>SQLType 接口
添加 <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span>JDBCType</span> 枚举
一些 <span class="token constant">JDBC</span> 接口更改

<span class="token constant">JDBC</span> <span class="token number">4.1</span> 中引入的主要新功能包括：
添加了对“使用资源试用”语句的支持
增强的日期值和时间戳值
从 <span class="token class-name">Java</span> 对象到 <span class="token constant">JDBC</span> 类型的其他映射
一些 <span class="token constant">JDBC</span> 接口更改

<span class="token constant">JDBC</span> <span class="token number">4.0</span> 中引入的主要新功能包括：
自动加载爪哇<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>驱动程序
数据类型支持
国家字符集转换支持
支持

由于 <span class="token constant">JDBC</span> <span class="token number">4.3</span> <span class="token constant">API</span> 是向后兼容的，因此将 <span class="token class-name">Java</span> <span class="token constant">SE</span> <span class="token number">9</span> 或更高版本与 <span class="token constant">JDBC</span> <span class="token number">4.2</span>、<span class="token number">4.1</span>、<span class="token number">4.0</span> 
或 <span class="token number">3.0</span> 驱动程序一起使用没有问题，只要您不使用 <span class="token constant">JDBC</span> <span class="token number">4.3</span> <span class="token constant">API</span> 中引入的新方法或类。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>支持 jdk1.8版本语法变更特性</p><p>Connector/J 8.0是专门为在Java 8平台上运行而创建的。</p><p>众所周知，Java8与早期的Java版本高度兼容，</p><p>但还是存在少量不兼容性，所以,驱动技术版本,尽量选择支持jdk 8.0+!</p></li><li><p>支持全新的驱动api,增加自动时区选择和默认utf-8编码格式等配置</p></li></ul><h2 id="三、全新-jdbc-核心-api" tabindex="-1"><a class="header-anchor" href="#三、全新-jdbc-核心-api" aria-hidden="true">#</a> 三、全新 JDBC 核心 API</h2><h3 id="_3-1-引入-mysql-jdbc-驱动-jar" tabindex="-1"><a class="header-anchor" href="#_3-1-引入-mysql-jdbc-驱动-jar" aria-hidden="true">#</a> 3.1 引入 mysql-jdbc 驱动 jar</h3><ol><li><p>驱动<code>jar</code>本不能选择</p><p>驱动 <code>jar</code>版本选择</p><p>我们选择 8.0.27 版本</p><table><thead><tr><th>mysql版本</th><th>推荐驱动版本</th><th>备注</th></tr></thead><tbody><tr><td>mysql 5.5.x</td><td>5.0.x</td><td>com.mysql.jdbc.Driver</td></tr><tr><td>mysql 5.7.x</td><td>5.1.x</td><td>com.mysql.jdbc.Driver</td></tr><tr><td>msyql 8.x</td><td>8.0.x</td><td>建议: 8.0.25+省略时区设置com.mysql.cj.jdbc.Driver</td></tr></tbody></table></li><li><p>java工程导入依赖</p><ul><li><p>导入创建lib目录</p></li><li><p>导入驱动依赖<code>jar</code>包</p></li><li><p><code>jar</code>包右键-添加为项目依赖</p><p><img src="/assets/image-20230311141133866.7969dad1.png" alt="img"></p></li></ul></li></ol><h3 id="_3-2-jdbc-基本使用步骤分析" tabindex="-1"><a class="header-anchor" href="#_3-2-jdbc-基本使用步骤分析" aria-hidden="true">#</a> 3.2 jdbc 基本使用步骤分析</h3><blockquote><ol><li>注册驱动</li><li>获取连接</li><li>创建发送sql语句对象</li><li>发送sql语句，并获取返回结果</li><li>结果集解析</li><li>资源关闭</li></ol></blockquote><h3 id="_3-3-基于statement-演示查询" tabindex="-1"><a class="header-anchor" href="#_3-3-基于statement-演示查询" aria-hidden="true">#</a> 3.3 基于statement 演示查询</h3><ul><li>准备数据库数据</li></ul><div class="language-mysql line-numbers-mode" data-ext="mysql"><pre class="language-mysql"><code>CREATE DATABASE atguigu;

USE atguigu;

CREATE TABLE t_user(
   id INT PRIMARY KEY AUTO_INCREMENT COMMENT &#39;用户主键&#39;,
   account VARCHAR(20) NOT NULL UNIQUE COMMENT &#39;账号&#39;,
   PASSWORD VARCHAR(64) NOT NULL COMMENT &#39;密码&#39;,
   nickname VARCHAR(20) NOT NULL COMMENT &#39;昵称&#39;);
   
INSERT INTO t_user(account,PASSWORD,nickname) VALUES
  (&#39;root&#39;,&#39;123456&#39;,&#39;经理&#39;),(&#39;admin&#39;,&#39;666666&#39;,&#39;管理员&#39;);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查询目标</li></ul><blockquote><p>查询全部用户信息，进行控制台输出</p></blockquote><p><img src="/assets/image-20230311141333531.1d3618cd.png" alt="img"></p><ul><li>基于statement 实现查询（演示步骤）</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Description: 利用jdbc技术,完成用户数据查询工作
 *
 * TODO: 步骤总结 (6步)
 *    1. 注册驱动
 *    2. 获取连接
 *    3. 创建statement
 *    4. 发送SQL语句,并获取结果
 *    5. 结果集解析
 *    6. 关闭资源
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcBasePart</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>

        <span class="token comment">//1.注册驱动</span>
        <span class="token doc-comment comment">/**
         * TODO: 注意
         *   Driver -&gt; com.mysql.cj.jdbc.Driver
         */</span>
        <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.获取连接</span>
        <span class="token doc-comment comment">/**
         * TODO: 注意
         *   面向接口编程
         *   java.sql 接口 = 实现类
         *   connection 使用java.sql.Connection接口接收
         */</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql://localhost:3306/atguigu&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span>
                <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//3.创建小车</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//4.发送SQL语句</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select id,account,password,nickname from t_user ;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span>  statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//5.结果集解析</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">int</span> id <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> account <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;account&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> password <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> nickname <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;nickname&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>id<span class="token operator">+</span><span class="token string">&quot;::&quot;</span><span class="token operator">+</span>account<span class="token operator">+</span><span class="token string">&quot;::&quot;</span><span class="token operator">+</span>password<span class="token operator">+</span><span class="token string">&quot;::&quot;</span><span class="token operator">+</span>nickname<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//6.关闭资源  【先开后关】</span>
        resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-基于-statement-方式问题" tabindex="-1"><a class="header-anchor" href="#_3-4-基于-statement-方式问题" aria-hidden="true">#</a> 3.4 基于 statement 方式问题</h3><ul><li>本案例目标 <ul><li>明确jdbc流程和详情使用（注册驱动，获取连接，发送语句，结果解析）</li><li>发现问题，引出preparedStatment</li></ul></li><li>准备数据库数据 <ul><li>上个案例相同的数据库</li></ul></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> atguigu<span class="token punctuation">;</span>

<span class="token keyword">USE</span> atguigu<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_user<span class="token punctuation">(</span>
   id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;用户主键&#39;</span><span class="token punctuation">,</span>
   account <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;账号&#39;</span><span class="token punctuation">,</span>
   PASSWORD <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;密码&#39;</span><span class="token punctuation">,</span>
   nickname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;昵称&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_user<span class="token punctuation">(</span>account<span class="token punctuation">,</span>PASSWORD<span class="token punctuation">,</span>nickname<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
  <span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;经理&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;666666&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;管理员&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>演示目标</li></ul><blockquote><p>模拟登录,控制台输入账号和密码,判断是否登陆成功成功!</p></blockquote><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAS0AAABQCAYAAABMKCNFAAANaUlEQVR4Ae2dD1BVVR7HzzAMDKOjQ0yOm4NNW6Pp2GrTn01HNx23scL+7NZWts20/XHa2m3KZra2th6QCohhKCj+S+EpRoliiWGEBQsphYmoQKKSfzAlCP8RBQjfnQucx3mX94/3Xvu8736ZuXPO+Z3f+Z3f+Rzvd96973mvAP9IgARIwEAEhIFyZaokQAIkAIoW/xGQAAkYigBFy1DbxWRJgAQoWvw3QAIkYCgCFC1DbReTJQESoGjx3wAJkIChCBhetE4czsCSinK0GAo7kyUBEvCWgMFFqxXvbxAQGz9Aq7cEOI4ESMBQBAwuWgcw/12BGz/dayjoTJYESMB7Aj6LVsnHIyFWpaBo3zzclXI1IhPHYfrmlaj6WZfU5bPYvedl3J8+FiMWjMDY9D/jzQNHoHeDB37Vu26FiBWOj6RXsUc3NZskQALBQ8BH0foB760TCE2dijm5S7G5pgC5JU9iXKzA7wor0WXjdA7F2ychNGkmXtudh4KaXCzZNB6hsZOR2tht8wI882tpLEPJ0RKUfDUX11pG4enykt62Zjt5Am1KRFZJgASCi4CPovUV/r1IYLg1G402Li3IyhQQWVack7bmNEyxjMTfay5IC3ApCzEWgcf3K3ejPPXri9J+6FmEWWKQdak/LGskQALBTcA30WrLxoMWgUf3KWKEVhTk/wF37vjUdun3ffm9EHFPI79TgXnhPcyyhOKZg+02o6d+ckBdyRSIhHkolQaWJEACQU/AN9E6FY8bLGMxv8E1p9Lt10CkL0ad6lb/Oq6xTMSiM/1GT/16R3Rh55ZhEKsz4Gb6/glYIwESMDwBn0TrUuUcCMtDyBlwN13l0nu5GJKTh/7PVEBTxYMQcU/i4w7p66mf9D+F5SsFhm8thHpXTPayJAESCE4CPolWVdFEiOT/oMIlm3q8u0IgLGebIlrN2GQdinBrdv99L3jqJycrwysJAlNK7D6/yU6WJEACQUrAB9Fqx9b3QyEys9z8Gr0du7ZFQ8Tfihe+3IadtblIz5uGqPipWNTwk4LVUz85pFe0Rmen4dMjvd8eljX+KDtZkgAJBCkBH0TrMJLTBKLzy9yjaTuAzG0xuDk5CsMTx2GK9TVsaGhWfhLRF8JTvx73Thz+5jlMS45EqKX3N1uTig64z4UeJEAChibgg2gZet1MngRIwKAEKFoG3TimTQJmJUDRMuvOc90kYFACFC2DbhzTJgGzEqBomXXnuW4SMCgBipZBN45pk4BZCVC0zLrzXDcJGJQARcugG8e0ScCsBChaZt15rpsEDEqAomXQjWPaJGBWAhQts+48100CBiVA0TLoxjFtEjArAYqWWXee6yYBgxLwj2h1NaLsv3NwY5yAsMzEatvD4VUql9F4fA3mZd6O6xYOQ1TyLZj9kRWHdA8Q7Kh5DuF9T22we+PO0kTUqOHUevdpfLgpGhHLF6JSfdKg5lP/OkY5ipcSh/1qDKX+/f4ncE3cbUhs+EWxskoCJHAlEPBZtH5pKYBlbTRCE6fj8XVjIOb/E7scPEr0x7pXcFPcbzDjo/Set/bklT2PW94WGLW10O7tOe3nqvrfrHO0BDu//BvGxA7HtF174VhC2lFbOgvDFsbgvSb1IfS9eBu/vh9i/sNI097Uox4NpxzG62qx4oGFYZhctF95aOGVsFXMgQRIQCPgo2g1YMWqcIy1LkbJhXZ8/tHVEBnLcFzPtrsSsUsExm0vVd4E3YHPto6AcPGJ52JDOmYnjcA9u77GeX3MvvbF797EzXHX4pmDZx16lOVHQ6xMx0mHvTpjVx3S1gxD+IpFODhQ/3TObJIACQSCgI+idRRFVVU43/PJ6ixWrxUYkvsJLutX0laBjcVp+MzuwaKXUZSnidxSfKf3B9BSn4AZC0fj4d0HoT7f1M71Yj6eTg7FxPxSXLTrkI0mrFsncFVeUc9z5Lu7Ogc+eFC6oh1Vu6YiPG4KUs7orzFtTqyQAAkEmICPoqVmvxv/ShK4o/hb1ei83rYDzyQJ/P6L2oE+59bjnvkC4cvmIqP6kPIcecW16xhWrYvC0JXvoNrpp6LenGZsT8XLq6/H0NhQRCZPx0uVRwZcGrYet2BSbATuLK6G7V0bynSskgAJXBkE/CdarVbc1/MeQ8d3nuyW23UKOdmjEZLyMop1N+J7/E5n4vkPn8KjaybgKksEJn1Spvu01YaKwskIT3wI2S1977FuWo4ZC36LN+qVmS5l4l6LQMQ7jyC56guU1uXgrTUjIeIfQo7yjlh0fAPL0hCEL3kM83LvwoSkkYhOnYUXv9oPvgdW4ckqCVwBBPwnWifewrW69xg6XF/XKeTlTkDYwj9i2Wl3L7D/BZWFt0HE/RV5yhVb87cvYkzsDfhHbZNtis7a5xFhmY4M9ZvLC6VYU7wM2870X2B2f/cGRluuR5xyk6uu9E6EWYbjjtwM7DxZjdqGIqzMmYAQy/V4vV6Z2DYbKyRAAoEi4DfROv/NXyBi52CLq3O8ow7WTWMQmjALS046vgulB9F56FkIy32w2j4Z9d6nCrOuR8NPLWjpO6o+nwYx/wUUOfjm0i7mAHE9iAWpAlEbP8APquPPm/FIrMDUkiOqlXUSIIEAE/CbaO0rHA+REo8qZwv6uRKp60chdPFjyDrb/8nH5t5Rh8/2bkRJs/0NqhNlM3U/o9iDVxf1vn3H7ndcsQIiIxXq1aEttlI5v+8RiDhFXC+sxV0WgSeqdDm1b8GcWIEHK+ykTInEKgmQQCAI+Em02rA5OwTCusnht3jdraWwZFyFoWkvYcc5e1GyLbrnnpjAA6pIdNVj2apQRL6/tT9udzMOHy9Hud2Rh3mpAhGb89Ef/RisuQ9gboX6xUATcjZEInR9JmwXlq1WzLYIxJSfsaUCdOLY7hgMjb8H69XLTcWDVRIggcAQ8F60Ok+h4ttCFPYcmXguRSBqw7t97a9xQn4F11WJBUuHQCTejYQDxfY/8Dx+FBds6z6KpRlhCFn8JyTs3YGd1RuQsHECIhJnY90PA35EYRvVWynFvASB2+2+iWxFQe4oiKS7YanIR2FtLtK2TkVU/GQk2b0k9jSyModDJM7Aq3vyUFCzBSt3zMZ1cVcj5ssa/sBUR5pNEgg0Ae9F62wyJjn67zHaZVrcU8iXOtOchinO/FatQINCoONcAd7ecAeuWzAEwxLHY+YHichv0l22Kf62as+ntBA8dUD3VWRrBTK2zMJNiyIRmTQeU528JLa7tRzLtW8NE4dhyIJoTFw7F8nVx+x+qW+bixUSIIGAEvBetAKaNicnARIwKwGKlll3nusmAYMSoGgZdOOYNgmYlQBFy6w7z3WTgEEJULQMunFMmwTMSoCiZdad57pJwKAEKFoG3TimTQJmJUDRMuvOc90kYFACFK0AbJwQAvIIwPSckgQMTYCiFYDtk4KllfwjARIYHAGeNYPj5RdvipZfMDKISQn8aqJ1JXyKkDnIcrB77O04d/NoceXhzpf9JEAC9gR8Fi158qmlNoXWln9qXdpkqY5zVZf+gynVedW6pzE8HeOpn5xX85eHtLEkARLwjEC/snjm79ZLnsD6UhsobW6D6Bz+3+Pk9J7O66mfGlcbM9hxcjxLEjAzAZ9FSz3x1LoGVW2r9cECdzVW6xvsIXNzNk7m52pe6SNjqW13dXVed77sJwESsCfgs2hp4eTJLUs5hWzLUtr1pdbv7tCPkW1XsV31yfFaqfdzlYs6Ttb146XdWanGd+ZDOwmQgGMCfhEtLbSzE9eZ3XE6jq2uYnjbp87kLIberm/LGM7ssl9fav7y0PexTQIk4JqAX0RLnrTyRFRLbXrZ7zoV572uxg+mz5mvp3ZP/ZyvpLdHiyMPd77sJwESsCfgs2g5O5HtpxkoXPKk9aZUYzsaL/v1uenbzvyc2Qc7XsbRl2rO+j62SYAEXBPwWrTkiaeFl3VXpernOqWBAufKX5tT/VPbal3z0bflOE/tnvrJuM5KLY48nPnQTgIk4JiA/Rnv2Met1dnJLAe66nfU56lNi6/3ddbW22VujmIMxubMV42vr2u5yEPfxzYJkIBrAgEXLS09vaDoT2h9v7okfZ+ztt7uKoajnJzZ1Die1rVc5OHpGPqRAAn0EvCbaMmT0FnpCXBtrPanlrLubLy+X99W4+nrMqY2Rj1c+ckxvpT6uXyJxbEkYDYCfhEtDZojsXBl14NWxzur68eo8eUYWUpfra3aZF3aZSn91ZiqzRu7frxsyzllLtLOkgRIwD0Bv4mWNpX+JNS3HaUjT2C1Tz/OkY8n86lxZF2WjsbLHFQfafPGXx2r1rX48lDtrJMACbgn4JNoyRNvMKVMSY6Rba3UbGqp9km79JFtvY9sq36qzZFd9mulvl+2Zan6elvXYsnD2xgcRwJmJeCTaP0a0DwVB1d+/u5zFc8bBlo8eXgznmNIwMwErjjRMsNmSMHytxiagR3XSAIUrQD8G6BoBQA6pwwaAhStAGwlRSsA0Dll0BCgaAXNVnIhJGAOAhQtc+wzV0kCQUOAohU0W8mFkIA5CFC0zLHPXCUJBA0BilbQbCUXQgLmIEDRMsc+c5UkEDQE/ge4LwyHhz2uGwAAAABJRU5ErkJggg==" alt=""></p><ul><li>基于statement 实现模拟登录</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Description: 输入账号密码,模拟用户登录!
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcStatementLoginPart</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>

        <span class="token comment">//1.输入账号和密码</span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> account <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scanner<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.jdbc的查询使用</span>
        <span class="token doc-comment comment">/**
         * 类加载： java文件 -&gt; 编译 -&gt; 【 class字节码文件 --&gt;  类加载 --&gt; jvm虚拟中  --&gt; Class对象】
         * 类加载具体步骤：  加载 【class文件转成对象加载到虚拟机中】-&gt;
         *                连接 【验证（检查类文件） -&gt; 准备 (静态变量赋默认值) -&gt; 解析 (调用静态代码块) 】 -&gt;
         *                初始化 -&gt; (赋真实值)
         * 以下7种方式会触发类加载：
         *    1. new关键字
         *    2. 调用静态属性
         *    3. 调用静态方法
         *    4. 接口 包含1.8 新特性 default关键字
         *    5. 反射 【Class.forName() 类名.class】
         *    6. 子类调用会触发父类的静态代码块
         *    7. 触发类的入口方法main
         */</span>
        <span class="token comment">//注册一次驱动</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



        <span class="token doc-comment comment">/**
         * 重写： 为了子类扩展父类的方法！父类也间接的规范了子类方法的参数和返回！
         * 重载： 重载一般应用在第三方的工具类上，为了方便用户多种方式传递参数形式！简化形式！
         */</span>
        <span class="token doc-comment comment">/**
         * 三个参数：
         *    String URL: 连接数据库地址
         *    String user: 连接数据库用户名
         *    String password: 连接数据库用户对应的密码
         * 数据库URL语法：
         *    JDBC:
         *        ip port
         *        jdbc:mysql | jdbc:oracle :// 127.0.0.1 | localhost : 3306 / 数据库名
         *        jdbc:mysql://localhost:3306/day01
         *        192.168.33.45
         *        jdbc:mysql://192.168.33.45/3306/day01
         *        当前电脑的省略写法！ 注意：本机和端口3306
         *        jdbc:mysql://localhost:3306/day01 = jdbc:mysql:///day01
         *
         * 两个参数：
         *     String URL : 写法还是jdbc的路径写法！
         *     Properties : 就是一个参数封装容器！至少要包含 user / password key!存储连接账号信息！
         *
         * 一个参数：
         *    String URL: URl可以携带目标地址，可以通过?分割，在后面key=value&amp;key=value形式传递参数
         *                jdbc:mysql:///day01?user=root&amp;password=123456
         * 扩展路径参数(了解):
         *    serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true
         *
         */</span>
        <span class="token comment">//获取连接</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///atguigu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//固定方法固定剂</span>
        <span class="token comment">//创建statement</span>
        <span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//执行SQL语句 [动态SQL语句,需要字符串拼接]</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_user where account = &#39;&quot;</span><span class="token operator">+</span>account<span class="token operator">+</span><span class="token string">&quot;&#39; and password = &#39;&quot;</span><span class="token operator">+</span>password<span class="token operator">+</span><span class="token string">&quot;&#39; ;&quot;</span><span class="token punctuation">;</span>


        <span class="token doc-comment comment">/**
         *  ResultSet 结果集对象 = executeQuery(DQL语句)
         *  int       响应行数  = executeUpdate(非DQL语句)
         */</span>
        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//ResultSet == 小海豚  你必须有面向对象的思维：Java是面向对象编程的语言 OOP！</span>
        <span class="token doc-comment comment">/**
         *
         * TODO:1.需要理解ResultSet的数据结构和小海豚查询出来的是一样，需要在脑子里构建结果表！
         * TODO:2.有一个光标指向的操作数据行，默认指向第一行的上边！我们需要移动光标，指向行，在获取列即可！
         *        boolean = next()
         *              false: 没有数据，也不移动了！
         *              true:  有更多行，并且移动到下一行！
         *       推荐：推荐使用if 或者 while循环，嵌套next方法，循环和判断体内获取数据！
         *       if(next())<span class="token punctuation">{</span>获取列的数据！<span class="token punctuation">}</span> ||  while(next())<span class="token punctuation">{</span>获取列的数据！<span class="token punctuation">}</span>
         *
         *TODO：3.获取当前行列的数据！
         *         get类型(int columnIndex | String columnLabel)
         *        列名获取  //lable 如果没有别名，等于列名， 有别名label就是别名，他就是查询结果的标识！
         *        列的角标  //从左到右 从1开始！ 数据库全是从1开始！
         */</span>

        <span class="token comment">//进行结果集对象解析</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//只要向下移动，就是有数据 就是登录成功！</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;登录成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;登录失败！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//关闭资源</span>
        resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>存在问题</p><ol><li><p>SQL语句需要字符串拼接,比较麻烦</p></li><li><p>只能拼接字符串类型,其他的数据库类型无法处理</p></li><li><p><strong>可能发生注入攻击</strong></p><blockquote><p>动态值充当了SQL语句结构,影响了原有的查询结果!</p></blockquote></li></ol></li></ul><h3 id="_3-5-基于-preparedstatment-方式优化" tabindex="-1"><a class="header-anchor" href="#_3-5-基于-preparedstatment-方式优化" aria-hidden="true">#</a> 3.5 基于 preparedStatment 方式优化</h3><blockquote><p>利用<strong>preparedStatement</strong>解决上述案<strong>例注入攻击</strong>和<strong>SQL语句拼接问题</strong>! (重点掌握)</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Description: 使用预编译Statement解决注入攻击问题
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JdbcPreparedStatementLoginPart</span> <span class="token punctuation">{</span>


    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>

        <span class="token comment">//1.输入账号和密码</span>
        <span class="token class-name">Scanner</span> scanner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Scanner</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> account <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> scanner<span class="token punctuation">.</span><span class="token function">nextLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        scanner<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//2.jdbc的查询使用</span>
        <span class="token comment">//注册驱动</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//获取连接</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///atguigu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//创建preparedStatement</span>
        <span class="token comment">//connection.createStatement();</span>
        <span class="token comment">//TODO 需要传入SQL语句结构</span>
        <span class="token comment">//TODO 要的是SQL语句结构，动态值的部分使用 ? ,  占位符！</span>
        <span class="token comment">//TODO ?  不能加 &#39;?&#39;  ? 只能替代值，不能替代关键字和容器名</span>
        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select * from t_user where account = ? and password = ? ;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//占位符赋值</span>
        <span class="token comment">//给占位符赋值！ 从左到右，从1开始！</span>
        <span class="token doc-comment comment">/**
         *  int 占位符的下角标
         *  object 占位符的值
         */</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>account<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//这哥们内部完成SQL语句拼接！</span>
        <span class="token comment">//执行SQL语句即可</span>
        <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//preparedStatement.executeUpdate()</span>

        <span class="token comment">//进行结果集对象解析</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//只要向下移动，就是有数据 就是登录成功！</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;登录成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;登录失败！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//关闭资源</span>
        resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/image-20230311141738408.a6a8fbc9.png" alt="img"></p><h3 id="_3-6-基于-preparedstatment-演示-crud" tabindex="-1"><a class="header-anchor" href="#_3-6-基于-preparedstatment-演示-crud" aria-hidden="true">#</a> 3.6 基于 preparedStatment 演示 crud</h3><blockquote><p>数据库插入</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 插入一条用户数据!
 * 账号: test
 * 密码: test
 * 昵称: 测试
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

    <span class="token comment">//注册驱动</span>
    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//获取连接</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///atguigu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//TODO: 切记, ? 只能代替 值!!!!!  不能代替关键字 特殊符号 容器名</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_user(account,password,nickname) values (?,?,?);&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//占位符赋值</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;测试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//发送SQL语句</span>
    <span class="token keyword">int</span> rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//输出结果</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//关闭资源close</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>数据库数据修改</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 修改一条用户数据!
 * 修改账号: test的用户,将nickname改为tomcat
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

    <span class="token comment">//注册驱动</span>
    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//获取连接</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///atguigu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//TODO: 切记, ? 只能代替 值!!!!!  不能代替关键字 特殊符号 容器名</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_user set nickname = ? where account = ? ;&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//占位符赋值</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;tomcat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//发送SQL语句</span>
    <span class="token keyword">int</span> rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//输出结果</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//关闭资源close</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>数据库数据删除</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 删除一条用户数据!
 * 根据账号: test
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

    <span class="token comment">//注册驱动</span>
    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//获取连接</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///atguigu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//TODO: 切记, ? 只能代替 值!!!!!  不能代替关键字 特殊符号 容器名</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;delete from t_user where account = ? ;&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//占位符赋值</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//发送SQL语句</span>
    <span class="token keyword">int</span> rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//输出结果</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//关闭资源close</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>数据库数据查询</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 查询全部数据!
 *   将数据存到List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Map</span><span class="token punctuation">&gt;</span></span>中
 *   map -&gt; 对应一行数据
 *      map key -&gt; 数据库列名或者别名
 *      map value -&gt; 数据库列的值
 * TODO: 思路分析
 *    1.先创建一个List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Map</span><span class="token punctuation">&gt;</span></span>集合
 *    2.遍历resultSet对象的行数据
 *    3.将每一行数据存储到一个map对象中!
 *    4.将对象存到List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Map</span><span class="token punctuation">&gt;</span></span>中
 *    5.最终返回
 *
 * TODO:
 *    初体验,结果存储!
 *    学习获取结果表头信息(列名和数量等信息)
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testQueryMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

    <span class="token comment">//注册驱动</span>
    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//获取连接</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///atguigu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//TODO: 切记, ? 只能代替 值!!!!!  不能代替关键字 特殊符号 容器名</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;select id,account,password,nickname from t_user ;&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//占位符赋值 本次没有占位符,省略</span>

    <span class="token comment">//发送查询语句</span>
    <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//创建一个集合</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Map</span><span class="token punctuation">&gt;</span></span> mapList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//获取列信息对象</span>
    <span class="token class-name">ResultSetMetaData</span> metaData <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getMetaData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> columnCount <span class="token operator">=</span> metaData<span class="token punctuation">.</span><span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Map</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> columnCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>metaData<span class="token punctuation">.</span><span class="token function">getColumnLabel</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> resultSet<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        mapList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>mapList<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//关闭资源close</span>
    preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resultSet<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-7-preparedstatment-使用方式总结" tabindex="-1"><a class="header-anchor" href="#_3-7-preparedstatment-使用方式总结" aria-hidden="true">#</a> 3.7 preparedStatment 使用方式总结</h3><blockquote><p>使用步骤总结：</p><ol><li><p>注册驱动</p></li><li><p>获取连接</p></li><li><p>编写SQL语句</p></li><li><p>创建preparedstatement并且传入SQL语句结构</p></li><li><p>占位符赋值</p></li><li><p>发送SQL语句,并且获取结果</p></li><li><p>结果集解析</p></li><li><p>关闭资源</p></li></ol></blockquote><blockquote><p>使用 API 总结</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//1.注册驱动</span>
方案<span class="token number">1</span><span class="token operator">:</span> 调用静态方法<span class="token punctuation">,</span>但是会注册两次
<span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">registerDriver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span></span>Driver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
方案<span class="token number">2</span><span class="token operator">:</span> 反射触发
<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2.获取连接</span>

<span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token number">3</span> <span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">,</span><span class="token class-name">String</span> user<span class="token punctuation">,</span><span class="token class-name">String</span> password<span class="token punctuation">)</span>
<span class="token number">2</span> <span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token punctuation">,</span><span class="token class-name">Properties</span> <span class="token function">info</span><span class="token punctuation">(</span>user password<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token number">1</span> <span class="token punctuation">(</span><span class="token class-name">String</span> url<span class="token operator">?</span>user<span class="token operator">=</span>账号<span class="token operator">&amp;</span>password<span class="token operator">=</span>密码 <span class="token punctuation">)</span>

<span class="token comment">//3.创建statement</span>

<span class="token comment">//静态</span>
<span class="token class-name">Statement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//预编译</span>
<span class="token class-name">PreparedStatement</span> preparedstatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">preparedStatement</span><span class="token punctuation">(</span>sql语句结构<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4.占位符赋值</span>

preparedstatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token operator">?</span>的位置 从左到右 从<span class="token number">1</span>开始<span class="token punctuation">,</span>值<span class="token punctuation">)</span>

<span class="token comment">//5.发送sql语句获取结果</span>

<span class="token keyword">int</span> rows <span class="token operator">=</span> <span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//非DQL</span>
<span class="token class-name">Resultset</span> <span class="token operator">=</span> <span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//DQL</span>

<span class="token comment">//6.查询结果集解析</span>

<span class="token comment">//移动光标指向行数据 next();  if(next())  while(next())</span>
<span class="token comment">//获取列的数据即可   get类型(int 列的下角标 从1开始 | int 列的label (别名或者列名))</span>
<span class="token comment">//获取列的信息   getMetadata(); ResultsetMetaData对象 包含的就是列的信息</span>
                <span class="token function">getColumnCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">|</span> <span class="token function">getCloumnLebal</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
<span class="token comment">//7.关闭资源</span>
<span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="四、全新-jdbc扩展提升" tabindex="-1"><a class="header-anchor" href="#四、全新-jdbc扩展提升" aria-hidden="true">#</a> 四、全新 JDBC扩展提升</h2><h3 id="_4-1-自增长主键回显实现" tabindex="-1"><a class="header-anchor" href="#_4-1-自增长主键回显实现" aria-hidden="true">#</a> 4.1 自增长主键回显实现</h3><ul><li><p>功能需求</p><ol><li><strong>java程序</strong>获取<strong>插入</strong>数据时mysql维护<strong>自增长</strong>维护的主键<strong>id值</strong>,这就是主键回显</li><li>作用: 在多表关联插入数据时,一般主表的主键都是自动生成的,所以在插入数据之前无法知道这条数据的主键,但是从表需要在插入数据之前就绑定主表的主键,这是可以使用主键回显技术。</li></ol></li><li><p>功能实现</p><blockquote><p>继续沿用之前的表数据</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 返回插入的主键！
 * 主键：数据库帮助维护的自增长的整数主键！
 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">returnPrimaryKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

    <span class="token comment">//1.注册驱动</span>
    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2.获取连接</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///atguigu?user=root&amp;password=root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3.编写SQL语句结构</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_user (account,password,nickname) values (?,?,?);&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//4.创建预编译的statement，传入SQL语句结构</span>
    <span class="token doc-comment comment">/**
     * TODO: 第二个参数填入 1 | Statement.RETURN_GENERATED_KEYS
     *       告诉statement携带回数据库生成的主键！
     */</span>
    <span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token class-name">Statement</span><span class="token punctuation">.</span><span class="token constant">RETURN_GENERATED_KEYS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//5.占位符赋值</span>
    statement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;towgog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    statement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    statement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;二狗子&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//6.执行SQL语句 【注意：不需要传入SQL语句】 DML</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//7.结果集解析</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;i = &quot;</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//一行一列的数据！里面就装主键值！</span>
      <span class="token class-name">ResultSet</span> resultSet <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">getGeneratedKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resultSet<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> anInt <span class="token operator">=</span> resultSet<span class="token punctuation">.</span><span class="token function">getInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;anInt = &quot;</span> <span class="token operator">+</span> anInt<span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//8.释放资源</span>
    statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_4-2-批量数据插入性能测试" tabindex="-1"><a class="header-anchor" href="#_4-2-批量数据插入性能测试" aria-hidden="true">#</a> 4.2 批量数据插入性能测试</h3><ul><li>功能需求 <ol><li>批量数据插入优化</li><li>提升大数据插入效率</li></ol></li><li>功能实现</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 *
 * 批量细节：
 *    1.url?rewriteBatchedStatements=true
 *    2.insert 语句必须使用 values
 *    3.语句后面不能添加分号;
 *    4.语句不能直接执行，每次需要装货  addBatch() 最后 executeBatch();
 *
 * 批量插入优化！
 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span>  <span class="token function">batchInsertYH</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>

    <span class="token comment">//1.注册驱动</span>
    <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//2.获取连接</span>
    <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///atguigu?rewriteBatchedStatements=true&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//3.编写SQL语句结构</span>
    <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;insert into t_user (account,password,nickname) values (?,?,?)&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//4.创建预编译的statement，传入SQL语句结构</span>
    <span class="token doc-comment comment">/**
     * TODO: 第二个参数填入 1 | Statement.RETURN_GENERATED_KEYS
     *       告诉statement携带回数据库生成的主键！
     */</span>
    <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">//5.占位符赋值</span>
        statement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;ergouzi&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        statement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;lvdandan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        statement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;驴蛋蛋&quot;</span><span class="token operator">+</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//6.装车</span>
        statement<span class="token punctuation">.</span><span class="token function">addBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//发车！ 批量操作！</span>
    statement<span class="token punctuation">.</span><span class="token function">executeBatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">long</span> end <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;消耗时间：&quot;</span><span class="token operator">+</span><span class="token punctuation">(</span>end <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//7.结果集解析</span>

    <span class="token comment">//8.释放资源</span>
    connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-jdbc中数据库事务实现" tabindex="-1"><a class="header-anchor" href="#_4-3-jdbc中数据库事务实现" aria-hidden="true">#</a> 4.3 jdbc中数据库事务实现</h3><blockquote><p>章节目标</p><ul><li>使用jdbc代码,添加数据库事务动作!</li><li>开启事务</li><li>事务提交 / 事务回滚</li></ul></blockquote><blockquote><p>事务概念回顾</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 事务概念</span>
   数据库事务就是一种<span class="token constant">SQL</span>语句执行的缓存机制<span class="token punctuation">,</span>不会单条执行完毕就更新数据库数据<span class="token punctuation">,</span>最终根据缓
   存内的多条语句执行结果统一判定<span class="token operator">!</span>
   一个事务内所有语句都成功及事务成功<span class="token punctuation">,</span>我们可以触发commit提交事务来结束事务<span class="token punctuation">,</span>更新数据<span class="token operator">!</span>
   一个事务内任意一条语句失败<span class="token punctuation">,</span>及事务失败<span class="token punctuation">,</span>我们可以触发rollback回滚结束事务<span class="token punctuation">,</span>
   数据回到事务之前状态<span class="token operator">!</span>
   
   举个例子<span class="token operator">:</span> 
           临近高考<span class="token punctuation">,</span>你好吃懒做<span class="token punctuation">,</span>偶尔还瞎花钱<span class="token punctuation">,</span>父母也只会说<span class="token char">&#39;你等着!&#39;</span><span class="token punctuation">,</span>待到高考完毕<span class="token operator">!</span>
           成绩<span class="token number">600</span><span class="token operator">+</span><span class="token punctuation">,</span>翻篇<span class="token punctuation">,</span>庆祝<span class="token operator">!</span>
           成绩<span class="token number">200</span><span class="token operator">+</span><span class="token punctuation">,</span>翻旧账<span class="token punctuation">,</span>男女混合双打<span class="token operator">!</span>
           
<span class="token comment">//优势</span>
   允许我们在失败情况下<span class="token punctuation">,</span>数据回归到业务之前的状态<span class="token operator">!</span> 
   
<span class="token comment">//场景</span>
   一个业务涉及多条修改数据库语句<span class="token operator">!</span>
   例如<span class="token operator">:</span> 经典的转账案例<span class="token punctuation">,</span>转账业务<span class="token punctuation">(</span>加钱和减钱<span class="token punctuation">)</span>   
         批量删除<span class="token punctuation">(</span>涉及多个删除<span class="token punctuation">)</span>
         批量添加<span class="token punctuation">(</span>涉及多个插入<span class="token punctuation">)</span>     
         
<span class="token comment">// 事务特性</span>
  <span class="token number">1.</span> 原子性（<span class="token class-name">Atomicity</span>）原子性是指事务是一个不可分割的工作单位，事务中的操作要么都发生，要么都不发生。 

  <span class="token number">2.</span> 一致性（<span class="token class-name">Consistency</span>）事务必须使数据库从一个一致性状态变换到另外一个一致性状态。

  <span class="token number">3.</span> 隔离性（<span class="token class-name">Isolation</span>）事务的隔离性是指一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相干扰。

  <span class="token number">4.</span> 持久性（<span class="token class-name">Durability</span>）持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响

<span class="token comment">// 事务类型</span>
  
  自动提交 <span class="token operator">:</span> 每条语句自动存储一个事务中<span class="token punctuation">,</span>执行成功自动提交<span class="token punctuation">,</span>执行失败自动回滚<span class="token operator">!</span> <span class="token punctuation">(</span><span class="token class-name">MySQL</span><span class="token punctuation">)</span>
  手动提交<span class="token operator">:</span>  手动开启事务<span class="token punctuation">,</span>添加语句<span class="token punctuation">,</span>手动提交或者手动回滚即可<span class="token operator">!</span>
  
<span class="token comment">// sql开启事务方式</span>
   针对自动提交<span class="token operator">:</span> 关闭自动提交即可<span class="token punctuation">,</span>多条语句添加以后<span class="token punctuation">,</span>最终手动提交或者回滚<span class="token operator">!</span> <span class="token punctuation">(</span>推荐<span class="token punctuation">)</span>
     
      <span class="token class-name">SET</span> autocommit <span class="token operator">=</span> off<span class="token punctuation">;</span> <span class="token comment">//关闭当前连接自动事务提交方式</span>
      # 只有当前连接有效
      # 编写<span class="token constant">SQL</span>语句即可
      <span class="token constant">SQL</span>
      <span class="token constant">SQL</span>
      <span class="token constant">SQL</span>
      #手动提交或者回滚 【结束当前的事务】
      <span class="token constant">COMMIT</span> <span class="token operator">/</span> <span class="token constant">ROLLBACK</span> <span class="token punctuation">;</span>  
     
   手动开启事务<span class="token operator">:</span> 开启事务代码<span class="token punctuation">,</span>添加<span class="token constant">SQL</span>语句<span class="token punctuation">,</span>事务提交或者事务回滚<span class="token operator">!</span> <span class="token punctuation">(</span>不推荐<span class="token punctuation">)</span>

<span class="token comment">// 呼应jdbc技术</span>
 
  <span class="token keyword">try</span><span class="token punctuation">{</span>
    connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//关闭自动提交了</span>
    
    <span class="token comment">//注意,只要当前connection对象,进行数据库操作,都不会自动提交事务</span>
    <span class="token comment">//数据库动作!</span>
    <span class="token comment">//statement - 单一的数据库动作 c u r d </span>
    
    connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Execption</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>数据库表数据</p></blockquote><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">-- 继续在atguigu的库中创建银行表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> t_bank<span class="token punctuation">(</span>
   id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;账号主键&#39;</span><span class="token punctuation">,</span>
   account <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;账号&#39;</span><span class="token punctuation">,</span>
   money  <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;金额,不能为负值&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
   
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> t_bank<span class="token punctuation">(</span>account<span class="token punctuation">,</span>money<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
  <span class="token punctuation">(</span><span class="token string">&#39;ergouzi&#39;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&#39;lvdandan&#39;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>代码结构设计</p></blockquote><p><img src="/assets/image-20230311142635083.a94e8b66.png" alt="image-20230311142635083"></p><blockquote><p>jdbc事务实现</p></blockquote><ul><li>测试类</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Description: 测试类
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BankTest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testBank</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">BankService</span> bankService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BankService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bankService<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token string">&quot;ergouzi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lvdandan&quot;</span><span class="token punctuation">,</span>
                <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>BankService</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Description: bank表业务类,添加转账业务
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BankService</span> <span class="token punctuation">{</span>


    <span class="token doc-comment comment">/**
     * 转账业务方法
     * <span class="token keyword">@param</span> <span class="token parameter">addAccount</span>  加钱账号
     * <span class="token keyword">@param</span> <span class="token parameter">subAccount</span>  减钱账号
     * <span class="token keyword">@param</span> <span class="token parameter">money</span>  金额
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">String</span> addAccount<span class="token punctuation">,</span><span class="token class-name">String</span> subAccount<span class="token punctuation">,</span> <span class="token keyword">int</span> money<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;addAccount = &quot;</span> <span class="token operator">+</span> addAccount <span class="token operator">+</span> <span class="token string">&quot;, subAccount = &quot;</span> <span class="token operator">+</span> subAccount <span class="token operator">+</span> <span class="token string">&quot;, money = &quot;</span> <span class="token operator">+</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//注册驱动</span>
        <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//获取连接</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///atguigu&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token comment">//利用try代码块,调用dao</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//开启事务(关闭事务自动提交)</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">BankDao</span> bankDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BankDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//调用加钱 和 减钱</span>
            bankDao<span class="token punctuation">.</span><span class="token function">addMoney</span><span class="token punctuation">(</span>addAccount<span class="token punctuation">,</span>money<span class="token punctuation">,</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;--------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            bankDao<span class="token punctuation">.</span><span class="token function">subMoney</span><span class="token punctuation">(</span>subAccount<span class="token punctuation">,</span>money<span class="token punctuation">,</span>connection<span class="token punctuation">)</span><span class="token punctuation">;</span>
            flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment">//不报错,提交事务</span>
            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token comment">//报错回滚事务</span>
            connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
            connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;转账成功!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;转账失败!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>BankDao</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * Description: 数据库访问dao类
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BankDao</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * 加钱方法
     * <span class="token keyword">@param</span> <span class="token parameter">account</span>
     * <span class="token keyword">@param</span> <span class="token parameter">money</span>
     * <span class="token keyword">@param</span> <span class="token parameter">connection</span> 业务传递的connection和减钱是同一个! 才可以在一个事务中!
     * <span class="token keyword">@return</span> 影响行数
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addMoney</span><span class="token punctuation">(</span><span class="token class-name">String</span> account<span class="token punctuation">,</span> <span class="token keyword">int</span> money<span class="token punctuation">,</span><span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>


        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_bank set money = money + ? where account = ? ;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//占位符赋值</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> account<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//发送SQL语句</span>
        <span class="token keyword">int</span> rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//输出结果</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;加钱执行完毕!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//关闭资源close</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> rows<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * 减钱方法
     * <span class="token keyword">@param</span> <span class="token parameter">account</span>
     * <span class="token keyword">@param</span> <span class="token parameter">money</span>
     * <span class="token keyword">@param</span> <span class="token parameter">connection</span> 业务传递的connection和加钱是同一个! 才可以在一个事务中!
     * <span class="token keyword">@return</span> 影响行数
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">subMoney</span><span class="token punctuation">(</span><span class="token class-name">String</span> account<span class="token punctuation">,</span> <span class="token keyword">int</span> money<span class="token punctuation">,</span><span class="token class-name">Connection</span> connection<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>

        <span class="token class-name">String</span> sql <span class="token operator">=</span> <span class="token string">&quot;update t_bank set money = money - ? where account = ? ;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">PreparedStatement</span> preparedStatement <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//占位符赋值</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">setObject</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">setString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> account<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//发送SQL语句</span>
        <span class="token keyword">int</span> rows <span class="token operator">=</span> preparedStatement<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//输出结果</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;减钱执行完毕!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//关闭资源close</span>
        preparedStatement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> rows<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="五、国货之光-duid连接池技术使用" tabindex="-1"><a class="header-anchor" href="#五、国货之光-duid连接池技术使用" aria-hidden="true">#</a> 五、国货之光 Duid连接池技术使用</h2><h3 id="_5-1-连接性能损耗问题分析" tabindex="-1"><a class="header-anchor" href="#_5-1-连接性能损耗问题分析" aria-hidden="true">#</a> 5.1 连接性能损耗问题分析</h3><blockquote><p><strong>贪污和浪费是极大的犯罪</strong></p><p>​ <strong>-毛爷爷</strong></p><p><strong>connection可以复用!</strong> (年纪轻轻你就范了 浪费连接的罪啊!)</p></blockquote><h3 id="_5-2-数据库连接池的作用" tabindex="-1"><a class="header-anchor" href="#_5-2-数据库连接池的作用" aria-hidden="true">#</a> 5.2 数据库连接池的作用</h3><blockquote><p>总结缺点:</p><p>（1）不使用数据库连接池，每次都通过DriverManager获取新连接，用完直接抛弃断开， 连接的利用率太低，太浪费。</p><p>（2）对于数据库服务器来说，压力太大了。我们数据库服务器和Java程序对连接数也无法控制，很容易导致数据库服务器崩溃。</p><p>我们就希望能管理连接。</p><ul><li>我们可以建立一个连接池，这个池中可以容纳一定数量的连接对象，一开始， 我们可以先替用户先创建好一些连接对象，等用户要拿连接对象时，就直接从池中拿， 不用新建了，这样也可以节省时间。然后用户用完后，放回去，别人可以接着用。</li><li>可以提高连接的使用率。当池中的现有的连接都用完了，那么连接池可以向服务器申 请新的连接放到池中。</li><li>直到池中的连接达到“最大连接数”，就不能在申请新的连接了，如果没有拿到连接的用户只能等待。</li></ul></blockquote><h3 id="_5-3-市面常见连接池产品和对比" tabindex="-1"><a class="header-anchor" href="#_5-3-市面常见连接池产品和对比" aria-hidden="true">#</a> 5.3 市面常见连接池产品和对比</h3><blockquote><p>JDBC 的数据库连接池使用 javax.sql.DataSource接口进行规范,所有的第三方连接池</p><p>​ 都实现此接口,自行添加具体实现!也就是说,所有连接池获取连接的和回收</p><p>​ 连接方法都一样,不同的只有性能和扩展功能!</p><ul><li>DBCP 是Apache提供的数据库连接池，速度相对c3p0较快，但因自身存在BUG</li><li>C3P0 是一个开源组织提供的一个数据库连接池，速度相对较慢，稳定性还可以</li><li>Proxool 是sourceforge下的一个开源项目数据库连接池，有监控连接池状态的功能，稳定性较c3p0差一点</li><li>Druid 是阿里提供的数据库连接池，据说是集DBCP 、C3P0 、Proxool 优点于一身 的数据库连接池,妥妥国货之光!!!!</li></ul><p><img src="/assets/image-20230311143144897.27f83c78.png" alt="img"></p><p><img src="/assets/image-20230311143320851.7cc9614f.png" alt="img"></p></blockquote><h3 id="_5-4-国货之光-druid-连接池使用" tabindex="-1"><a class="header-anchor" href="#_5-4-国货之光-druid-连接池使用" aria-hidden="true">#</a> 5.4 国货之光 druid 连接池使用</h3><blockquote><p>记得导入druid 工具类 <code>jar</code></p></blockquote><blockquote><p>硬编码的方式（了解，不推荐）</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 创建druid连接池对象，使用硬编码进行核心参数设置！
 *   必须参数： 账号
 *             密码
 *             url
 *             driverClass
 *   非必须参数：
 *           初始化个数
 *           最大数量等等  不推荐设置
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">druidHard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>

   <span class="token class-name">DruidDataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">//设置四个必须参数</span>
   dataSource<span class="token punctuation">.</span><span class="token function">setDriverClassName</span><span class="token punctuation">(</span><span class="token string">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   dataSource<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   dataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   dataSource<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">&quot;jdbc:mysql:///day01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">//获取连接</span>
   <span class="token class-name">Connection</span> connection <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">// JDBC的步骤</span>
   <span class="token comment">//回收连接</span>
   connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>软编码方式</p></blockquote><ul><li><p>外部配置</p><p>存放在src/druid.properties</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># druid连接池需要的配置参数,key固定命名</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql:///atguigu</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>druid 声明代码</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 不直接在java代码编写配置文件！
 * 利用工厂模式，传入配置文件对象，创建连接池！
 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">druidSoft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">InputStream</span> ips <span class="token operator">=</span> <span class="token class-name">DruidDemo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>ips<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">DataSource</span> dataSource <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>druid配置（了解）</p><table><thead><tr><th>配置</th><th>缺省</th><th>说明</th></tr></thead><tbody><tr><td>name</td><td></td><td>配置这个属性的意义在于，如果存在多个数据源，监控的时候可以通过名字来区分开来。 如果没有配置，将会生成一个名字，格式是：”DataSource-” + System.identityHashCode(this)</td></tr><tr><td>jdbcUrl</td><td></td><td>连接数据库的url，不同数据库不一样。例如：mysql : jdbc:mysql://10.20.153.104:3306/druid2 oracle : jdbc:oracle:thin:@10.20.149.85:1521:ocnauto</td></tr><tr><td>username</td><td></td><td>连接数据库的用户名</td></tr><tr><td>password</td><td></td><td>连接数据库的密码。如果你不希望密码直接写在配置文件中，可以使用ConfigFilter。详细看这里：<a href="https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td></tr><tr><td>driverClassName</td><td></td><td>根据url自动识别 这一项可配可不配，如果不配置druid会根据url自动识别dbType，然后选择相应的driverClassName(建议配置下)</td></tr><tr><td>initialSize</td><td>0</td><td>初始化时建立物理连接的个数。初始化发生在显示调用init方法，或者第一次getConnection时</td></tr><tr><td>maxActive</td><td>8</td><td>最大连接池数量</td></tr><tr><td>maxIdle</td><td>8</td><td>已经不再使用，配置了也没效果</td></tr><tr><td>minIdle</td><td></td><td>最小连接池数量</td></tr><tr><td>maxWait</td><td></td><td>获取连接时最大等待时间，单位毫秒。配置了maxWait之后，缺省启用公平锁，并发效率会有所下降，如果需要可以通过配置useUnfairLock属性为true使用非公平锁。</td></tr><tr><td>poolPreparedStatements</td><td>false</td><td>是否缓存preparedStatement，也就是PSCache。PSCache对支持游标的数据库性能提升巨大，比如说oracle。在mysql下建议关闭。</td></tr><tr><td>maxOpenPreparedStatements</td><td>-1</td><td>要启用PSCache，必须配置大于0，当大于0时，poolPreparedStatements自动触发修改为true。在Druid中，不会存在Oracle下PSCache占用内存过多的问题，可以把这个数值配置大一些，比如说100</td></tr><tr><td>validationQuery</td><td></td><td>用来检测连接是否有效的sql，要求是一个查询语句。如果validationQuery为null，testOnBorrow、testOnReturn、testWhileIdle都不会其作用。</td></tr><tr><td>testOnBorrow</td><td>true</td><td>申请连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能。</td></tr><tr><td>testOnReturn</td><td>false</td><td>归还连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能</td></tr><tr><td>testWhileIdle</td><td>false</td><td>建议配置为true，不影响性能，并且保证安全性。申请连接的时候检测，如果空闲时间大于timeBetweenEvictionRunsMillis，执行validationQuery检测连接是否有效。</td></tr><tr><td>timeBetweenEvictionRunsMillis</td><td></td><td>有两个含义： 1)Destroy线程会检测连接的间隔时间2)testWhileIdle的判断依据，详细看testWhileIdle属性的说明</td></tr><tr><td>numTestsPerEvictionRun</td><td></td><td>不再使用，一个DruidDataSource只支持一个EvictionRun</td></tr><tr><td>minEvictableIdleTimeMillis</td><td></td><td></td></tr><tr><td>connectionInitSqls</td><td></td><td>物理连接初始化的时候执行的sql</td></tr><tr><td>exceptionSorter</td><td></td><td>根据dbType自动识别 当数据库抛出一些不可恢复的异常时，抛弃连接</td></tr><tr><td>filters</td><td></td><td>属性类型是字符串，通过别名的方式配置扩展插件，常用的插件有： 监控统计用的filter:stat日志用的filter:log4j防御sql注入的filter:wall</td></tr><tr><td>proxyFilters</td><td></td><td>类型是List，如果同时配置了filters和proxyFilters，是组合关系，并非替换关系</td></tr></tbody></table></li></ul><h2 id="六、全新jdbc使用优化以及工具类封装" tabindex="-1"><a class="header-anchor" href="#六、全新jdbc使用优化以及工具类封装" aria-hidden="true">#</a> 六、全新JDBC使用优化以及工具类封装</h2><h3 id="_6-1-jdbc工具类封装-v1-0" tabindex="-1"><a class="header-anchor" href="#_6-1-jdbc工具类封装-v1-0" aria-hidden="true">#</a> 6.1 jdbc工具类封装 v1.0</h3><blockquote><p>我们封装一个工具类,内部包含<strong>连接池对象</strong>,同时对外提供连接的方法和回收连接的方法!</p></blockquote><p>外部配置文件</p><p>位置: src/druid.properties</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># druid连接池需要的配置参数,key固定命名</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql:///atguigu</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>工具类代码</p></blockquote><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>druid<span class="token punctuation">.</span>pool<span class="token punctuation">.</span></span><span class="token class-name">DruidDataSourceFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DataSource</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Properties</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JDBCToolsVersion1</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">DataSource</span> ds<span class="token punctuation">;</span>
    <span class="token keyword">static</span><span class="token punctuation">{</span><span class="token comment">//静态代码块，JDBCToolsVersion1类初始化执行</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Properties</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            pro<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;druid.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            ds <span class="token operator">=</span> <span class="token class-name">DruidDataSourceFactory</span><span class="token punctuation">.</span><span class="token function">createDataSource</span><span class="token punctuation">(</span>pro<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Connection</span> <span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ds<span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这么写，不能保证同一个线程，两次getConnection()得到的是同一个Connection对象</span>
                            <span class="token comment">//如果不能保证是同一个连接对象，就无法保证事务的管理</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">free</span><span class="token punctuation">(</span><span class="token class-name">Connection</span> conn<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">{</span>
        conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//还给连接池</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-2-jdbc工具类封装v-2-0" tabindex="-1"><a class="header-anchor" href="#_6-2-jdbc工具类封装v-2-0" aria-hidden="true">#</a> 6.2 jdbc工具类封装v.2.0</h3><blockquote><p>优化工具类v1.0版本,考虑事务的情况下!如何一个线程的不同方法获取同一个连接!</p></blockquote><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>ThreadLocal的介绍：

JDK 1.2的版本中就提供java.lang.ThreadLocal，为解决多线程程序的并发问题提供了一种新的思路。
使用这个工具类可以很简洁地编写出优美的多线程程序。通常用来在在多线程中管理共享数据库连接、
Session等

ThreadLocal用于保存某个线程共享变量，原因是在Java中，每一个线程对象中都有一个
ThreadLocalMap&lt;ThreadLocal, Object&gt;，其key就是一个ThreadLocal，而Object即为该线程的
共享变量。而这个map是通过ThreadLocal的set和get方法操作的。对于同一个static ThreadLocal，
不同线程只能从中get，set，remove自己的变量，而不会影响其他线程的变量。

1、ThreadLocal对象.get: 获取ThreadLocal中当前线程共享变量的值。

2、ThreadLocal对象.set: 设置ThreadLocal中当前线程共享变量的值。

3、ThreadLocal对象.remove: 移除ThreadLocal中当前线程共享变量的值。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>v2.0版本工具类</p></blockquote><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>import com.alibaba.druid.pool.DruidDataSourceFactory;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.SQLException;
import java.util.Properties;

/*
这个工具类的作用就是用来给所有的SQL操作提供“连接”，和释放连接。
这里使用ThreadLocal的目的是为了让同一个线程，在多个地方getConnection得到的是同一个连接。
这里使用DataSource的目的是为了（1）限制服务器的连接的上限（2）连接的重用性等
 */
public class JDBCTools {
    private static DataSource ds;
    private static ThreadLocal&lt;Connection&gt; tl = new ThreadLocal&lt;&gt;();
    static{//静态代码块，JDBCToolsVersion1类初始化执行
        try {
            Properties pro = new Properties();
            pro.load(ClassLoader.getSystemResourceAsStream(&quot;druid.properties&quot;));
            ds = DruidDataSourceFactory.createDataSource(pro);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static Connection getConnection() throws SQLException {
         Connection connection = tl.get();
         if(connection  == null){//当前线程还没有拿过连接，就给它从数据库连接池拿一个
             connection = ds.getConnection();
             tl.set(connection);
         }
         return connection;
    }

    public static void free() throws SQLException {
        Connection connection = tl.get();
        if(connection != null){
            tl.remove();
            connection.setAutoCommit(true);//避免还给数据库连接池的连接不是自动提交模式（建议）
            connection.close();
        }
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>**注意: **修改转账业务,使用此工具类</p></blockquote><h3 id="_6-3高级应用层封装basedao" tabindex="-1"><a class="header-anchor" href="#_6-3高级应用层封装basedao" aria-hidden="true">#</a> 6.3高级应用层封装BaseDao</h3><blockquote><p>基本上每一个数据表都应该有一个对应的DAO接口及其实现类，发现对所有表的操作（增、删、改、查）代码重复度很高，所以可以<strong>抽取公共代码</strong>，给这些DAO的实现类可以抽取一个公共的父类，我们称为BaseDao</p></blockquote><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>public abstract class BaseDao {
    /*
    通用的增、删、改的方法
    String sql：sql
    Object... args：给sql中的?设置的值列表，可以是0~n
     */
    protected int update(String sql,Object... args) throws SQLException {
//        创建PreparedStatement对象，对sql预编译
        Connection connection = JDBCTools.getConnection();
        PreparedStatement ps = connection.prepareStatement(sql);
        //设置?的值
        if(args != null &amp;&amp; args.length&gt;0){
            for(int i=0; i&lt;args.length; i++) {
                ps.setObject(i+1, args[i]);//?的编号从1开始，不是从0开始，数组的下标是从0开始
            }
        }

        //执行sql
        int len = ps.executeUpdate();
        ps.close();
        //这里检查下是否开启事务,开启不关闭连接,业务方法关闭!
        //没有开启事务的话,直接回收关闭即可!
        if (connection.getAutoCommit()) {
            //回收
            JDBCTools.free();
        }
        return len;
    }

    /*
    通用的查询多个Javabean对象的方法，例如：多个员工对象，多个部门对象等
    这里的clazz接收的是T类型的Class对象，
    如果查询员工信息，clazz代表Employee.class，
    如果查询部门信息，clazz代表Department.class，
     */
    protected &lt;T&gt; ArrayList&lt;T&gt; query(Class&lt;T&gt; clazz,String sql, Object... args) throws Exception {
        //        创建PreparedStatement对象，对sql预编译
        Connection connection = JDBCTools.getConnection();
        PreparedStatement ps = connection.prepareStatement(sql);
        //设置?的值
        if(args != null &amp;&amp; args.length&gt;0){
            for(int i=0; i&lt;args.length; i++) {
                ps.setObject(i+1, args[i]);//?的编号从1开始，不是从0开始，数组的下标是从0开始
            }
        }

        ArrayList&lt;T&gt; list = new ArrayList&lt;&gt;();
        ResultSet res = ps.executeQuery();

        /*
        获取结果集的元数据对象。
        元数据对象中有该结果集一共有几列、列名称是什么等信息
         */
         ResultSetMetaData metaData = res.getMetaData();
        int columnCount = metaData.getColumnCount();//获取结果集列数

        //遍历结果集ResultSet，把查询结果中的一条一条记录，变成一个一个T 对象，放到list中。
        while(res.next()){
            //循环一次代表有一行，代表有一个T对象
            T t = clazz.newInstance();//要求这个类型必须有公共的无参构造

            //把这条记录的每一个单元格的值取出来，设置到t对象对应的属性中。
            for(int i=1; i&lt;=columnCount; i++){
                //for循环一次，代表取某一行的1个单元格的值
                Object value = res.getObject(i);

                //这个值应该是t对象的某个属性值
                //获取该属性对应的Field对象
//                String columnName = metaData.getColumnName(i);//获取第i列的字段名
                String columnName = metaData.getColumnLabel(i);//获取第i列的字段名或字段的别名
                Field field = clazz.getDeclaredField(columnName);
                field.setAccessible(true);//这么做可以操作private的属性

                field.set(t, value);
            }

            list.add(t);
        }

        res.close();
        ps.close();
        //这里检查下是否开启事务,开启不关闭连接,业务方法关闭!
        //没有开启事务的话,直接回收关闭即可!
        if (connection.getAutoCommit()) {
            //回收
            JDBCTools.free();
        }
        return list;
    }

    protected &lt;T&gt; T queryBean(Class&lt;T&gt; clazz,String sql, Object... args) throws Exception {
        ArrayList&lt;T&gt; list = query(clazz, sql, args);
        if(list == null || list.size() == 0){
            return null;
        }
        return list.get(0);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="七、基于cms项目jdbc实战练习" tabindex="-1"><a class="header-anchor" href="#七、基于cms项目jdbc实战练习" aria-hidden="true">#</a> 七、基于CMS项目JDBC实战练习</h2><h3 id="_7-1-cms项目介绍和导入" tabindex="-1"><a class="header-anchor" href="#_7-1-cms项目介绍和导入" aria-hidden="true">#</a> 7.1 cms项目介绍和导入</h3><ul><li><p><strong>项目介绍</strong></p><blockquote><p>利用JavaSE技术,进行控制台输出的客户管理系统! 主要功能让包含<strong>客户展示</strong>,<strong>客户删除</strong>,<strong>客户添加</strong>,<strong>客户修改</strong>,<strong>退出系统</strong>!</p></blockquote><ul><li>添加客户</li></ul><p><img src="/assets/image-20230311152026559.c0529e87.png" alt="img"></p><ul><li>修改客户</li></ul><p><img src="/assets/image-20230311152041102.5330d910.png" alt="img"></p><ul><li>展示客户列表</li></ul><p><img src="/assets/image-20230311152104236.8bf33ec9.png" alt="img"></p><ul><li>删除客户</li></ul><p><img src="/assets/image-20230311152113111.68361bd6.png" alt="img"></p><ul><li>退出系统</li></ul><p><img src="/assets/image-20230311152124151.5f0b021a.png" alt="img"></p><p><strong>项目导入</strong></p><ol><li><p>打开项目</p><p><img src="/assets/image-20230311152140738.4041a84f.png" alt="img"></p></li><li><p>配置jdk</p><p><img src="/assets/image-20230311152150868.2f964747.png" alt="img"></p><p><img src="/assets/image-20230311152158502.690b3350.png" alt="img"></p></li></ol></li></ul><h3 id="_7-2基于cms项目添加数据库相关配置" tabindex="-1"><a class="header-anchor" href="#_7-2基于cms项目添加数据库相关配置" aria-hidden="true">#</a> 7.2基于cms项目添加数据库相关配置</h3><ul><li>准备数据库脚本</li></ul><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code>-- 员工表

CREATE TABLE t_customer(
  id INT PRIMARY KEY AUTO_INCREMENT COMMENT &#39;客户主键&#39;,
  NAME VARCHAR(20)  COMMENT &#39;客户名称&#39;,
  gender VARCHAR(4) COMMENT &#39;客户性别&#39;,
  age INT  COMMENT &#39;客户年龄&#39;,
  salary DOUBLE(8,1) COMMENT &#39;客户工资&#39;,
  phone VARCHAR(11) COMMENT &#39;客户电话&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>添加配置文件</p><blockquote><p>位置: src下, druid.properties</p></blockquote><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># druid连接池需要的配置参数,key固定命名</span>
<span class="token key attr-name">driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span>
<span class="token key attr-name">username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
<span class="token key attr-name">url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql:///atguigu</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>导入jdbcv2.0工具类</p></li></ul><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>import com.alibaba.druid.pool.DruidDataSourceFactory;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.SQLException;
import java.util.Properties;

/*
这个工具类的作用就是用来给所有的SQL操作提供“连接”，和释放连接。
这里使用ThreadLocal的目的是为了让同一个线程，在多个地方getConnection得到的是同一个连接。
这里使用DataSource的目的是为了（1）限制服务器的连接的上限（2）连接的重用性等
 */
public class JDBCTools {
    private static DataSource ds;
    private static ThreadLocal&lt;Connection&gt; tl = new ThreadLocal&lt;&gt;();
    static{//静态代码块，JDBCToolsVersion1类初始化执行
        try {
            Properties pro = new Properties();
            pro.load(ClassLoader.getSystemResourceAsStream(&quot;druid.properties&quot;));
            ds = DruidDataSourceFactory.createDataSource(pro);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static Connection getConnection() throws SQLException {
         Connection connection = tl.get();
         if(connection  == null){//当前线程还没有拿过连接，就给它从数据库连接池拿一个
             connection = ds.getConnection();
             tl.set(connection);
         }
         return connection;
    }

    public static void free() throws SQLException {
        Connection connection = tl.get();
        if(connection != null){
            tl.remove();
            connection.setAutoCommit(true);//避免还给数据库连接池的连接不是自动提交模式（建议）
            connection.close();
        }
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>导入baseDao工具类</li></ul><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>public abstract class BaseDao {
    /*
    通用的增、删、改的方法
    String sql：sql
    Object... args：给sql中的?设置的值列表，可以是0~n
     */
    protected int update(String sql,Object... args) throws SQLException {
//        创建PreparedStatement对象，对sql预编译
        Connection connection = JDBCTools.getConnection();
        PreparedStatement ps = connection.prepareStatement(sql);
        //设置?的值
        if(args != null &amp;&amp; args.length&gt;0){
            for(int i=0; i&lt;args.length; i++) {
                ps.setObject(i+1, args[i]);//?的编号从1开始，不是从0开始，数组的下标是从0开始
            }
        }

        //执行sql
        int len = ps.executeUpdate();
        ps.close();
        //这里检查下是否开启事务,开启不关闭连接,业务方法关闭!
        //没有开启事务的话,直接回收关闭即可!
        if (connection.getAutoCommit()) {
            //回收
            JDBCTools.free();
        }
        return len;
    }

    /*
    通用的查询多个Javabean对象的方法，例如：多个员工对象，多个部门对象等
    这里的clazz接收的是T类型的Class对象，
    如果查询员工信息，clazz代表Employee.class，
    如果查询部门信息，clazz代表Department.class，
     */
    protected &lt;T&gt; ArrayList&lt;T&gt; query(Class&lt;T&gt; clazz,String sql, Object... args) throws Exception {
        //        创建PreparedStatement对象，对sql预编译
        Connection connection = JDBCTools.getConnection();
        PreparedStatement ps = connection.prepareStatement(sql);
        //设置?的值
        if(args != null &amp;&amp; args.length&gt;0){
            for(int i=0; i&lt;args.length; i++) {
                ps.setObject(i+1, args[i]);//?的编号从1开始，不是从0开始，数组的下标是从0开始
            }
        }

        ArrayList&lt;T&gt; list = new ArrayList&lt;&gt;();
        ResultSet res = ps.executeQuery();

        /*
        获取结果集的元数据对象。
        元数据对象中有该结果集一共有几列、列名称是什么等信息
         */
         ResultSetMetaData metaData = res.getMetaData();
        int columnCount = metaData.getColumnCount();//获取结果集列数

        //遍历结果集ResultSet，把查询结果中的一条一条记录，变成一个一个T 对象，放到list中。
        while(res.next()){
            //循环一次代表有一行，代表有一个T对象
            T t = clazz.newInstance();//要求这个类型必须有公共的无参构造

            //把这条记录的每一个单元格的值取出来，设置到t对象对应的属性中。
            for(int i=1; i&lt;=columnCount; i++){
                //for循环一次，代表取某一行的1个单元格的值
                Object value = res.getObject(i);

                //这个值应该是t对象的某个属性值
                //获取该属性对应的Field对象
//                String columnName = metaData.getColumnName(i);//获取第i列的字段名
                String columnName = metaData.getColumnLabel(i);//获取第i列的字段名或字段的别名
                Field field = clazz.getDeclaredField(columnName);
                field.setAccessible(true);//这么做可以操作private的属性

                field.set(t, value);
            }

            list.add(t);
        }

        res.close();
        ps.close();
        //这里检查下是否开启事务,开启不关闭连接,业务方法关闭!
        //没有开启事务的话,直接回收关闭即可!
        if (connection.getAutoCommit()) {
            //回收
            JDBCTools.free();
        }
        return list;
    }

    protected &lt;T&gt; T queryBean(Class&lt;T&gt; clazz,String sql, Object... args) throws Exception {
        ArrayList&lt;T&gt; list = query(clazz, sql, args);
        if(list == null || list.size() == 0){
            return null;
        }
        return list.get(0);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2基于cms项目添加数据库相关配置-1" tabindex="-1"><a class="header-anchor" href="#_7-2基于cms项目添加数据库相关配置-1" aria-hidden="true">#</a> 7.2基于cms项目添加数据库相关配置</h3><ul><li>准备数据库脚本</li></ul><div class="language-SQL line-numbers-mode" data-ext="SQL"><pre class="language-SQL"><code>-- 员工表

CREATE TABLE t_customer(
  id INT PRIMARY KEY AUTO_INCREMENT COMMENT &#39;客户主键&#39;,
  NAME VARCHAR(20)  COMMENT &#39;客户名称&#39;,
  gender VARCHAR(4) COMMENT &#39;客户性别&#39;,
  age INT  COMMENT &#39;客户年龄&#39;,
  salary DOUBLE(8,1) COMMENT &#39;客户工资&#39;,
  phone VARCHAR(11) COMMENT &#39;客户电话&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>添加配置文件</p><blockquote><p>位置: src下, druid.properties</p></blockquote></li></ul><div class="language-.properties line-numbers-mode" data-ext=".properties"><pre class="language-.properties"><code># druid连接池需要的配置参数,key固定命名
driverClassName=com.mysql.cj.jdbc.Driver
username=root
password=root
url=jdbc:mysql:///atguigu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>导入jdbcv2.0工具类</li></ul><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>import com.alibaba.druid.pool.DruidDataSourceFactory;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.SQLException;
import java.util.Properties;

/*
这个工具类的作用就是用来给所有的SQL操作提供“连接”，和释放连接。
这里使用ThreadLocal的目的是为了让同一个线程，在多个地方getConnection得到的是同一个连接。
这里使用DataSource的目的是为了（1）限制服务器的连接的上限（2）连接的重用性等
 */
public class JDBCTools {
    private static DataSource ds;
    private static ThreadLocal&lt;Connection&gt; tl = new ThreadLocal&lt;&gt;();
    static{//静态代码块，JDBCToolsVersion1类初始化执行
        try {
            Properties pro = new Properties();
            pro.load(ClassLoader.getSystemResourceAsStream(&quot;druid.properties&quot;));
            ds = DruidDataSourceFactory.createDataSource(pro);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static Connection getConnection() throws SQLException {
         Connection connection = tl.get();
         if(connection  == null){//当前线程还没有拿过连接，就给它从数据库连接池拿一个
             connection = ds.getConnection();
             tl.set(connection);
         }
         return connection;
    }

    public static void free() throws SQLException {
        Connection connection = tl.get();
        if(connection != null){
            tl.remove();
            connection.setAutoCommit(true);//避免还给数据库连接池的连接不是自动提交模式（建议）
            connection.close();
        }
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>导入baseDao工具类</li></ul><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>public abstract class BaseDao {
    /*
    通用的增、删、改的方法
    String sql：sql
    Object... args：给sql中的?设置的值列表，可以是0~n
     */
    protected int update(String sql,Object... args) throws SQLException {
//        创建PreparedStatement对象，对sql预编译
        Connection connection = JDBCTools.getConnection();
        PreparedStatement ps = connection.prepareStatement(sql);
        //设置?的值
        if(args != null &amp;&amp; args.length&gt;0){
            for(int i=0; i&lt;args.length; i++) {
                ps.setObject(i+1, args[i]);//?的编号从1开始，不是从0开始，数组的下标是从0开始
            }
        }

        //执行sql
        int len = ps.executeUpdate();
        ps.close();
        //这里检查下是否开启事务,开启不关闭连接,业务方法关闭!
        //没有开启事务的话,直接回收关闭即可!
        if (connection.getAutoCommit()) {
            //回收
            JDBCTools.free();
        }
        return len;
    }

    /*
    通用的查询多个Javabean对象的方法，例如：多个员工对象，多个部门对象等
    这里的clazz接收的是T类型的Class对象，
    如果查询员工信息，clazz代表Employee.class，
    如果查询部门信息，clazz代表Department.class，
     */
    protected &lt;T&gt; ArrayList&lt;T&gt; query(Class&lt;T&gt; clazz,String sql, Object... args) throws Exception {
        //        创建PreparedStatement对象，对sql预编译
        Connection connection = JDBCTools.getConnection();
        PreparedStatement ps = connection.prepareStatement(sql);
        //设置?的值
        if(args != null &amp;&amp; args.length&gt;0){
            for(int i=0; i&lt;args.length; i++) {
                ps.setObject(i+1, args[i]);//?的编号从1开始，不是从0开始，数组的下标是从0开始
            }
        }

        ArrayList&lt;T&gt; list = new ArrayList&lt;&gt;();
        ResultSet res = ps.executeQuery();

        /*
        获取结果集的元数据对象。
        元数据对象中有该结果集一共有几列、列名称是什么等信息
         */
         ResultSetMetaData metaData = res.getMetaData();
        int columnCount = metaData.getColumnCount();//获取结果集列数

        //遍历结果集ResultSet，把查询结果中的一条一条记录，变成一个一个T 对象，放到list中。
        while(res.next()){
            //循环一次代表有一行，代表有一个T对象
            T t = clazz.newInstance();//要求这个类型必须有公共的无参构造

            //把这条记录的每一个单元格的值取出来，设置到t对象对应的属性中。
            for(int i=1; i&lt;=columnCount; i++){
                //for循环一次，代表取某一行的1个单元格的值
                Object value = res.getObject(i);

                //这个值应该是t对象的某个属性值
                //获取该属性对应的Field对象
//                String columnName = metaData.getColumnName(i);//获取第i列的字段名
                String columnName = metaData.getColumnLabel(i);//获取第i列的字段名或字段的别名
                Field field = clazz.getDeclaredField(columnName);
                field.setAccessible(true);//这么做可以操作private的属性

                field.set(t, value);
            }

            list.add(t);
        }

        res.close();
        ps.close();
        //这里检查下是否开启事务,开启不关闭连接,业务方法关闭!
        //没有开启事务的话,直接回收关闭即可!
        if (connection.getAutoCommit()) {
            //回收
            JDBCTools.free();
        }
        return list;
    }

    protected &lt;T&gt; T queryBean(Class&lt;T&gt; clazz,String sql, Object... args) throws Exception {
        ArrayList&lt;T&gt; list = query(clazz, sql, args);
        if(list == null || list.size() == 0){
            return null;
        }
        return list.get(0);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-基于cms项目实战" tabindex="-1"><a class="header-anchor" href="#_7-3-基于cms项目实战" aria-hidden="true">#</a> 7.3 基于cms项目实战</h3><ul><li>customerService</li></ul><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>package com.atguigu.cms.service;

import com.atguigu.cms.dao.CustomerDao;
import com.atguigu.cms.javabean.Customer;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

/**
 * 这是一个具有管理功能的功能类. 内部数据不允许外部随意修改, 具有更好的封装性.
 */
public class CustomerService {


    private CustomerDao customerDao = new CustomerDao();

    /**
     * 用途：返回所有客户对象
     * 返回：集合
     */
    public List&lt;Customer&gt; getList() {

        try {
            return customerDao.queryList();
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }



    /**
     * 用途：添加新客户
     * 参数：customer指定要添加的客户对象
     */
    public void addCustomer(Customer customer)  {
        try {
            customerDao.insertCustomer(customer);
        } catch (SQLException e) {
            throw new RuntimeException(e);
        }
    }

    /**
     * 用途：返回指定id的客户对象记录
     * 参数： id 就是要获取的客户的id号.
     * 返回：封装了客户信息的Customer对象
     */
    public Customer getCustomer(int id) {

        try {
            return customerDao.queryById(id);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

    /**
     * 修改指定id号的客户对象的信息
     * @param id 客户id
     * @param cust 对象
     * @return 修改成功返回true, false表明指定id的客户未找到
     */
    public boolean modifyCustomer(int id, Customer cust)  {
        int rows = 0;
        try {
            rows = customerDao.updateCustomer(cust);
        } catch (SQLException e) {
            throw new RuntimeException(e);
        }
        return rows &gt; 0;
    }

    /**
     * 用途：删除指定id号的的客户对象记录
     * 参数： id 要删除的客户的id号
     * 返回：删除成功返回true；false表示没有找到
     */
    public boolean removeCustomer(int id) {
        int rows = 0;
        try {
            rows = customerDao.deleteCustomer(id);
        } catch (SQLException e) {
            throw new RuntimeException(e);
        }
        return rows &gt; 0;
    }

}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>customerDao</li></ul><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>package com.atguigu.cms.dao;

import com.atguigu.cms.javabean.Customer;
import com.atguigu.cms.utils.BaseDao;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

/**
 * Description: 客户进行数据库操作的类
 */
public class CustomerDao extends BaseDao {


    public List&lt;Customer&gt; queryList() throws Exception {
        ArrayList&lt;Customer&gt; list = query(Customer.class, &quot;select * from t_customer&quot;);
        return list;
    }

    public void insertCustomer(Customer customer) throws SQLException {
       int rows = update(&quot;insert into t_customer(name,gender,age,salary,phone) values (?,?,?,?,?)&quot;,
                customer.getName(), customer.getGender(),customer.getAge(),customer.getSalary(),customer.getPhone());
    }

    public Customer queryById(int id) throws Exception {
        Customer customer = queryBean(Customer.class, &quot;select * from t_customer where id = ?&quot;, id);
        return customer;
    }

    public int deleteCustomer(int id) throws SQLException {
        return update(&quot;delete from t_customer where id =?&quot;, id);
    }

    public int updateCustomer(Customer cust) throws SQLException {
        return update(&quot;update t_customer set name = ? , gender = ? , age = ? ,&quot; +
                &quot;salary = ? , phone = ? where id = ? ;&quot;, cust.getName(), cust.getGender(),
                cust.getAge(), cust.getSalary(), cust.getPhone(), cust.getId());
    }
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/Ragnarokoo/LearningNotes/edit/master/src/notes/jdbc/全新8.x版本JDBC数据库连接技术.md" rel="noopener noreferrer" target="_blank" aria-label="在【Github】上编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在【Github】上编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><!----></div><!----></footer><nav class="page-nav"><a href="/notes/jdbc/10%E3%80%81Apache-DBUtils%E5%AE%9E%E7%8E%B0CRUD%E6%93%8D%E4%BD%9C.html" class="nav-link prev" aria-label="10、Apache-DBUtils实现CRUD操作"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><!---->10、Apache-DBUtils实现CRUD操作</div></a><!----></nav><!----><!----><!--]--></main><!--]--><!----><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.9b10ba0a.js" defer></script>
  </body>
</html>
